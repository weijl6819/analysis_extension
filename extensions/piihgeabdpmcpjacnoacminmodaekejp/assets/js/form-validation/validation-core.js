var validationCore=function(r,e,a){var t={init:function(){$("[data-validate]").each(function(e,a){var t=$(a),i=[],o=t.data("validate").replace(/\s/g,"").split(";"),n=t.parents("form");if(0==n.length&&(n=t.parents("[data-form]")),1==n.length){var s=n.data("validate-messages");void 0!==s&&($(s).hasClass("shared-validation-holder")||$(s).addClass("shared-validation-holder"))}var d=t.data("validate-messages");void 0!==d&&($(d).hasClass("external-validation-holder")||$(d).addClass("external-validation-holder")),""==o[o.length-1]&&delete o[o.length-1],$(o).each(function(r,e){if(void 0!==e){var a=e.split(":");i.push(a[0]),i[a[0]]=a[1]}}),t[0].validation=i,t[0].errors=[],r.holder.push(t)}),t.wrapElements(),t.trigger(),t.triggerForceCheck(),t.processing(),t.submit(),e.syntaxChecker()},wrapElements:function(){$(r.holder).each(function(r,a){var t="";!0!==a.data("validator-no-wrap")&&($(a).wrap($("<span>").addClass("validation-holder")),"checkbox"===a[0].type&&(t="",void 0!==$(a).data("label")&&(t=$(a).data("label")),$(a).prop("tabindex")&&$(a).attr("tabindex"),$(a).addClass("css-checkbox").after($("<label>").addClass("css-label-text").attr("for",e.getIdentifier(a)).html(t)).after($("<label>").addClass("css-label no-error-icon").attr("for",e.getIdentifier(a)))),"radio"===a[0].type&&(t="",void 0!==$(a).data("label")&&(t=$(a).data("label")),$(a).addClass("css-radio").after($("<label>").addClass("css-label-text").attr("for",e.getIdentifier(a)).html(t)).after($("<label>").addClass("css-label no-error-icon").attr("for",e.getIdentifier(a)))))})},trigger:function(){$(r.holder).each(function(r,e){"checkbox"==e[0].type||"radio"==e[0].type?$(e).on("focusout blur click",function(r){var e=$(r.currentTarget),t=e[0].validation,i=!0;return $(t).each(function(o,n){var s=a[n](t[n],e,r);return i=s,s}),i}):$(e).on("focusout blur",function(r){var e=$(r.currentTarget),t=e[0].validation,i=!0;return $(t).each(function(o,n){var s=a[n](t[n],e,r);return i=s,s}),i})})},submit:function(){$(r.holder).each(function(a,t){void 0;var i=$(t).parents("form");e.inArray(i[0],r.forms)||(i[0].errors=[],r.forms.push(i[0]))}),$.each(r.forms,function(a,i){void 0===$(i).attr("id")&&e.logInternalError(i,"Form must have an ID assigned to it"),$(document).on("submit","form#"+$(i).attr("id"),function(a){return validationLoopCount++,i.errors=[],t.forceCheck(i),validationFinishedCallback(a,i),i.errors.length<=0||r.forceSubmit?e.inArray(i,r.forms)?(validationLoopCount=0,$(i).data("validate-ajax")&&(void 0,a.preventDefault()),"true"!=$(i).attr("data-valid")&&($(i).attr("data-valid","true"),$(i).submit()),validationSuccessCallback(a,i),!0):void 0:(void 0,a.preventDefault(),r.formErrors=!0,e.inArray(i,r.forms)&&(validationLoopCount=0,void 0,"false"!=$(i).attr("data-valid")&&($(i).attr("data-valid","false"),$(i).submit()),validationFailedCallback(a,i)),!1)})})},triggerForceCheck:function(){$(document).on("click","[data-submit]",function(r){function e(r){r.attr("data-submit","success"),r[0].click()}var a=$(this).parents("[data-form]");void 0===a[0].errors&&(a[0].errors=[]);var i=a.find("input, select, textarea");t.forceCheck(i),$(this).attr("data-submit","failed"),void 0!==a[0].errors?0===a[0].errors.length&&e($(this)):e($(this))})},forceCheck:function(e){if(void 0!==e)return $.each(e,function(r,e){e=$(e);var t=e[0].validation,i=!0;return!!e.prop("disabled")||(void 0!==t&&$(t).each(function(r,o){var n=a[o](t[o],e);return i=n,n}),i)}),!0;$(r.holder).each(function(r,e){var a=e[0].validation,i=!0;return void 0!==a&&$(a).each(function(r,o){var n=t[o](a[o],e);return i=n,n}),i})},addMessages:function(a,i,o){function n(){$("#error-"+c+"-"+e.getIdentifier(i)).length<=0&&$("<label>").attr("for",e.getIdentifier(i)).attr("id","error-"+c+"-"+e.getIdentifier(i)).addClass("validation "+r.errorClass+" "+o).css({bottom:i.outerHeight()+"px"}).text(a).insertAfter(i)}function s(){var t=i.parents("form");if(0!=t.length){var n=t.data("validate-messages");if(void 0!==n){var s=$(n);0==s.children("ul").length?$("#shared-error-"+c+"-"+e.getIdentifier(i)).length<=0&&s.prepend($("<ul>").append($("<li>").attr("id","shared-error-"+c+"-"+e.getIdentifier(i)).addClass(r.errorClass+" "+o).html($("<label>").attr("for",e.getIdentifier(i)).text(a)))):$("#shared-error-"+c+"-"+e.getIdentifier(i)).length<=0&&s.children("ul").append($("<li>").attr("id","shared-error-"+c+"-"+e.getIdentifier(i)).addClass(r.errorClass+" "+o).html($("<label>").attr("for",e.getIdentifier(i)).text(a)))}}}function d(){var t=i.data("validate-messages");if(void 0!==t){var n=$(t);0==n.children("ul").length?$("#external-error-"+c+"-"+e.getIdentifier(i)).length<=0&&n.prepend($("<ul>").append($("<li>").attr("id","external-error-"+c+"-"+e.getIdentifier(i)).addClass(r.errorClass+" "+o).html($("<label>").attr("for",e.getIdentifier(i)).text(a)))):$("#external-error-"+c+"-"+e.getIdentifier(i)).length<=0&&n.children("ul").append($("<li>").attr("id","external-error-"+c+"-"+e.getIdentifier(i)).addClass(r.errorClass+" "+o).html($("<label>").attr("for",e.getIdentifier(i)).text(a)))}}var l=(""===i[0].name?i[0].id:i[0].name,i[0].id,i.parents("form")),c=l.attr("id");e.inArray(o,i[0].errors)&&(t.addError(i,o),i.addClass(r.errorClass),"checkbox"===i[0].type&&$(i).parent(".validation-holder").find(".css-label").addClass(r.errorClass),function(){void 0===i.data("validate-message-type")?n():"inline"==i.data("validate-message-type")?n():"shared"==i.data("validate-message-type")?s():"external"==i.data("validate-message-type")?d():"inline-external"==i.data("validate-message-type")?(n(),d()):"inline-shared"==i.data("validate-message-type")?(n(),s()):"external-shared"==i.data("validate-message-type")?(d(),s()):"all"==i.data("validate-message-type")&&(n(),d(),s())}())},removeMessages:function(a,i){function o(t){e.inArray("required",a[0].errors)?$("#"+t+"-"+s+"-"+e.getIdentifier(a)).html(r.errorMessages[a[0].errors[e.getKeyFromArray("required",a[0].errors)]]):$("#"+t+"-"+s+"-"+e.getIdentifier(a)).html(r.errorMessages[a[0].errors[0]])}var n=a.parents("form"),s=n.attr("id");0===a[0].errors.length?(t.removeError(a,i),a.removeClass(r.errorClass),"checkbox"===a[0].type&&$(a).parent(".validation-holder").find(".css-label").removeClass(r.errorClass),$("#error-"+s+"-"+e.getIdentifier(a)).length>0&&$("#error-"+s+"-"+e.getIdentifier(a)).hasClass(i)&&$("#error-"+s+"-"+e.getIdentifier(a)).remove(),$("#shared-error-"+s+"-"+e.getIdentifier(a)).length>0&&$("#shared-error-"+s+"-"+e.getIdentifier(a)).hasClass(i)&&$("#shared-error-"+s+"-"+e.getIdentifier(a)).remove(),$("#external-error-"+s+"-"+e.getIdentifier(a)).length>0&&$("#external-error-"+s+"-"+e.getIdentifier(a)).hasClass(i)&&$("#external-error-"+s+"-"+e.getIdentifier(a)).remove()):e.inArray(i,a[0].errors)||($("#error-"+s+"-"+e.getIdentifier(a)).length>0&&o("error"),$("#shared-error-"+s+"-"+e.getIdentifier(a)).length>0&&o("shared-error"),$("#external-error-"+s+"-"+e.getIdentifier(a)).length>0&&o("external-error"))},addError:function(a,t){function i(){e.inArray(t,a[0].errors)||(a[0].errors.push(t),a.addClass(r.errorClass),a.removeClass(r.successClass)),0===n.length&&(n=a.parents("[data-form]")),e.inArray(a[0],n[0].errors)||(void 0===n[0].errors&&(n[0].errors=[]),n[0].errors.push(a[0]))}var o=(""===a[0].name?a[0].id:a[0].name,a[0].id),n=a.parents("form");if(void 0===n[0].ignoreValidationRadioFields)i();else for(var s in n[0].ignoreValidationRadioFields)$("#"+s)[0].checked?e.inArray(o,n[0]["ignore-"+s])||i():i()},removeError:function(a,t){function i(){var i=a.parents("form");0===i.length&&(i=a.parents("[data-form]")),e.inArray(t,a[0].errors)&&e.removeFromArray(t,a[0].errors),0===a[0].errors.length&&(a.addClass(r.successClass),a.removeClass(r.errorClass),e.inArray(a[0],i[0].errors)&&e.removeFromArray(a[0],i[0].errors))}var o=a[0].id,n=a.parents("form");if(void 0===n[0].ignoreValidationRadioFields)i();else for(var s in n[0].ignoreValidationRadioFields)$("#"+s)[0].checked?e.inArray(o,n[0]["ignore-"+s])||i():i()},processing:function(e){$(document).on("click","[data-validate-process]",function(e){var a=$(this),i=a.parents("form");if(i.attr("form-submitted"))return e.preventDefault(),!0;if(i[0].errors=[],t.forceCheck(i[0]),void 0===a.attr("data-validate-process-selector"))0===i[0].errors.length||r.forceSubmit?(i.attr("form-submitted",!0),void 0===a.attr("data-validate-original-content")&&a.attr("data-validate-original-content",a.html()),a.html(r.btnProcessingContent).addClass(r.btnProcessingClass)):void 0!==a.attr("data-validate-original-content")&&a.html(a.attr("data-validate-original-content")).removeAttr("data-validate-original-content").removeClass(r.btnProcessingClass);else{var o=$(a.attr("data-validate-process-selector"));0===i[0].errors.length?(void 0===o.attr("data-validate-original-content")&&o.attr("data-validate-original-content",o.html()),o.html(r.btnProcessingContent).addClass(r.btnProcessingClass)):void 0!==o.attr("data-validate-original-content")&&o.html(o.attr("data-validate-original-content")).removeAttr("data-validate-original-content").removeClass(r.btnProcessingClass)}})},overwriteMessages:function(e){$.each(e,function(e,a){e in r.errorMessages&&(r.errorMessages[e]=a)})}};return t};