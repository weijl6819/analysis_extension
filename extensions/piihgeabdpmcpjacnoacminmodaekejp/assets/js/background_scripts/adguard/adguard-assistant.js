!function(t,e){function n(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}function r(){}var i={};!function(t,e){"use strict";var n=function(t){return Object.prototype.hasOwnProperty.call(e,t)}("browser")?e.browser:e.chrome;t.i18n=n.i18n,t.runtimeImpl=function(){return{onMessage:function(){return n.runtime&&n.runtime.onMessage?n.runtime.onMessage:n.extension.onMessage||n.extension.onRequest}(),sendMessage:function(){return n.runtime&&n.runtime.sendMessage?n.runtime.sendMessage:n.extension.sendMessage||n.extension.sendRequest}()}}()}(void 0!==i?i:adguard,this),function(e){"use strict";t.i18n=e.i18n,t.contentPage={sendMessage:e.runtimeImpl.sendMessage,onMessage:e.runtimeImpl.onMessage}}(i);n.Diff,n.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var s=n,a=this.diff_commonPrefix(t,e),o=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var l=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var c=this.diff_compute_(t,e,s,i);return o&&c.unshift([0,o]),l&&c.push([0,l]),this.diff_cleanupMerge(c),c},n.prototype.diff_compute_=function(t,e,n,r){var i;if(!t)return[[1,e]];if(!e)return[[-1,t]];var s=t.length>e.length?t:e,a=t.length>e.length?e:t,o=s.indexOf(a);if(-1!=o)return i=[[1,s.substring(0,o)],[0,a],[1,s.substring(o+a.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i;if(1==a.length)return[[-1,t],[1,e]];var l=this.diff_halfMatch_(t,e);if(l){var c=l[0],h=l[1],f=l[2],u=l[3],d=l[4],g=this.diff_main(c,f,n,r),p=this.diff_main(h,u,n,r);return g.concat([[0,d]],p)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},n.prototype.diff_lineMode_=function(t,e,n){var r=this.diff_linesToChars_(t,e);t=r.chars1,e=r.chars2;var i=r.lineArray,s=this.diff_main(t,e,!1,n);this.diff_charsToLines_(s,i),this.diff_cleanupSemantic(s),s.push([0,""]);for(var a=0,o=0,l=0,c="",h="";a<s.length;){switch(s[a][0]){case 1:l++,h+=s[a][1];break;case-1:o++,c+=s[a][1];break;case 0:if(o>=1&&l>=1){s.splice(a-o-l,o+l),a=a-o-l;for(var r=this.diff_main(c,h,!1,n),f=r.length-1;f>=0;f--)s.splice(a,0,r[f]);a+=r.length}l=0,o=0,c="",h=""}a++}return s.pop(),s},n.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,i=e.length,s=Math.ceil((r+i)/2),a=s,o=2*s,l=new Array(o),c=new Array(o),h=0;h<o;h++)l[h]=-1,c[h]=-1;l[a+1]=0,c[a+1]=0;for(var f=r-i,u=f%2!=0,d=0,g=0,p=0,v=0,m=0;m<s&&!((new Date).getTime()>n);m++){for(var b=-m+d;b<=m-g;b+=2){var _,y=a+b;_=b==-m||b!=m&&l[y-1]<l[y+1]?l[y+1]:l[y-1]+1;for(var x=_-b;_<r&&x<i&&t.charAt(_)==e.charAt(x);)_++,x++;if(l[y]=_,_>r)g+=2;else if(x>i)d+=2;else if(u){var k=a+f-b;if(k>=0&&k<o&&-1!=c[k]){var C=r-c[k];if(_>=C)return this.diff_bisectSplit_(t,e,_,x,n)}}}for(var w=-m+p;w<=m-v;w+=2){var C,k=a+w;C=w==-m||w!=m&&c[k-1]<c[k+1]?c[k+1]:c[k-1]+1;for(var E=C-w;C<r&&E<i&&t.charAt(r-C-1)==e.charAt(i-E-1);)C++,E++;if(c[k]=C,C>r)v+=2;else if(E>i)p+=2;else if(!u){var y=a+f-w;if(y>=0&&y<o&&-1!=l[y]){var _=l[y],x=a+_-y;if(C=r-C,_>=C)return this.diff_bisectSplit_(t,e,_,x,n)}}}}return[[-1,t],[1,e]]},n.prototype.diff_bisectSplit_=function(t,e,n,r,i){var s=t.substring(0,n),a=e.substring(0,r),o=t.substring(n),l=e.substring(r),c=this.diff_main(s,a,!1,i),h=this.diff_main(o,l,!1,i);return c.concat(h)},n.prototype.diff_linesToChars_=function(t,n){function r(t){for(var n="",r=0,a=-1,o=i.length;a<t.length-1;){a=t.indexOf("\n",r),-1==a&&(a=t.length-1);var l=t.substring(r,a+1);r=a+1,(s.hasOwnProperty?s.hasOwnProperty(l):s[l]!==e)?n+=String.fromCharCode(s[l]):(n+=String.fromCharCode(o),s[l]=o,i[o++]=l)}return n}var i=[],s={};return i[0]="",{chars1:r(t),chars2:r(n),lineArray:i}},n.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],s=0;s<r.length;s++)i[s]=e[r.charCodeAt(s)];t[n][1]=i.join("")}},n.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(s,i)==e.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var s=0,a=1;;){var o=t.substring(i-a),l=e.indexOf(o);if(-1==l)return s;a+=l,0!=l&&t.substring(i-a)!=e.substring(0,a)||(s=a,a++)}},n.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var r,i,s,o,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,h="";-1!=(c=e.indexOf(l,c+1));){var f=a.diff_commonPrefix(t.substring(n),e.substring(c)),u=a.diff_commonSuffix(t.substring(0,n),e.substring(0,c));h.length<u+f&&(h=e.substring(c-u,c)+e.substring(c,c+f),r=t.substring(0,n-u),i=t.substring(n+f),s=e.substring(0,c-u),o=e.substring(c+f))}return 2*h.length>=t.length?[r,i,s,o,h]:null}if(this.Diff_Timeout<=0)return null;var r=t.length>e.length?t:e,i=t.length>e.length?e:t;if(r.length<4||2*i.length<r.length)return null;var s,a=this,o=n(r,i,Math.ceil(r.length/4)),l=n(r,i,Math.ceil(r.length/2));if(!o&&!l)return null;s=l?o&&o[4].length>l[4].length?o:l:o;var c,h,f,u;return t.length>e.length?(c=s[0],h=s[1],f=s[2],u=s[3]):(f=s[0],u=s[1],c=s[2],h=s[3]),[c,h,f,u,s[4]]},n.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,s=0,a=0,o=0,l=0,c=0;s<t.length;)0==t[s][0]?(n[r++]=s,a=l,o=c,l=0,c=0,i=t[s][1]):(1==t[s][0]?l+=t[s][1].length:c+=t[s][1].length,i&&i.length<=Math.max(a,o)&&i.length<=Math.max(l,c)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,r--,s=r>0?n[r-1]:-1,a=0,o=0,l=0,c=0,i=null,e=!0)),s++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),s=1;s<t.length;){if(-1==t[s-1][0]&&1==t[s][0]){var h=t[s-1][1],f=t[s][1],u=this.diff_commonOverlap_(h,f),d=this.diff_commonOverlap_(f,h);u>=d?(u>=h.length/2||u>=f.length/2)&&(t.splice(s,0,[0,f.substring(0,u)]),t[s-1][1]=h.substring(0,h.length-u),t[s+1][1]=f.substring(u),s++):(d>=h.length/2||d>=f.length/2)&&(t.splice(s,0,[0,h.substring(0,d)]),t[s-1][0]=1,t[s-1][1]=f.substring(0,f.length-d),t[s+1][0]=-1,t[s+1][1]=h.substring(d),s++),s++}s++}},n.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var r=t.charAt(t.length-1),i=e.charAt(0),s=r.match(n.nonAlphaNumericRegex_),a=i.match(n.nonAlphaNumericRegex_),o=s&&r.match(n.whitespaceRegex_),l=a&&i.match(n.whitespaceRegex_),c=o&&r.match(n.linebreakRegex_),h=l&&i.match(n.linebreakRegex_),f=c&&t.match(n.blanklineEndRegex_),u=h&&e.match(n.blanklineStartRegex_);return f||u?5:c||h?4:s&&!o&&l?3:o||l?2:s||a?1:0}for(var r=1;r<t.length-1;){if(0==t[r-1][0]&&0==t[r+1][0]){var i=t[r-1][1],s=t[r][1],a=t[r+1][1],o=this.diff_commonSuffix(i,s);if(o){var l=s.substring(s.length-o);i=i.substring(0,i.length-o),s=l+s.substring(0,s.length-o),a=l+a}for(var c=i,h=s,f=a,u=e(i,s)+e(s,a);s.charAt(0)===a.charAt(0);){i+=s.charAt(0),s=s.substring(1)+a.charAt(0),a=a.substring(1);var d=e(i,s)+e(s,a);d>=u&&(u=d,c=i,h=s,f=a)}t[r-1][1]!=c&&(c?t[r-1][1]=c:(t.splice(r-1,1),r--),t[r][1]=h,f?t[r+1][1]=f:(t.splice(r+1,1),r--))}r++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,s=0,a=!1,o=!1,l=!1,c=!1;s<t.length;)0==t[s][0]?(t[s][1].length<this.Diff_EditCost&&(l||c)?(n[r++]=s,a=l,o=c,i=t[s][1]):(r=0,i=null),l=c=!1):(-1==t[s][0]?c=!0:l=!0,i&&(a&&o&&l&&c||i.length<this.Diff_EditCost/2&&a+o+l+c==3)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,i=null,a&&o?(l=c=!0,r=0):(r--,s=r>0?n[r-1]:-1,l=c=!1),e=!0)),s++;e&&this.diff_cleanupMerge(t)},n.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,i=0,s="",a="";n<t.length;)switch(t[n][0]){case 1:i++,a+=t[n][1],n++;break;case-1:r++,s+=t[n][1],n++;break;case 0:r+i>1?(0!==r&&0!==i&&(e=this.diff_commonPrefix(a,s),0!==e&&(n-r-i>0&&0==t[n-r-i-1][0]?t[n-r-i-1][1]+=a.substring(0,e):(t.splice(0,0,[0,a.substring(0,e)]),n++),a=a.substring(e),s=s.substring(e)),0!==(e=this.diff_commonSuffix(a,s))&&(t[n][1]=a.substring(a.length-e)+t[n][1],a=a.substring(0,a.length-e),s=s.substring(0,s.length-e))),0===r?t.splice(n-i,r+i,[1,a]):0===i?t.splice(n-r,r+i,[-1,s]):t.splice(n-r-i,r+i,[-1,s],[1,a]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,s="",a=""}""===t[t.length-1][1]&&t.pop();var o=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),o=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),o=!0)),n++;o&&this.diff_cleanupMerge(t)},n.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,s=0,a=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),-1!==t[n][0]&&(i+=t[n][1].length),!(r>e));n++)s=r,a=i;return t.length!=n&&-1===t[n][0]?a:a+(e-s)},n.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,s=/\n/g,a=0;a<t.length;a++){var o=t[a][0],l=t[a][1],c=l.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(s,"&para;<br>");switch(o){case 1:e[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:e[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:e[a]="<span>"+c+"</span>"}}return e.join("")},n.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},n.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},n.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var s=t[i][0],a=t[i][1];switch(s){case 1:n+=a.length;break;case-1:r+=a.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+=Math.max(n,r)},n.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,i=0,s=e.split(/\t/g),a=0;a<s.length;a++){var o=s[a].substring(1);switch(s[a].charAt(0)){case"+":try{n[r++]=[1,decodeURI(o)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+o)}break;case"-":case"=":var l=parseInt(o,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+o);var c=t.substring(i,i+=l);"="==s[a].charAt(0)?n[r++]=[0,c]:n[r++]=[-1,c];break;default:if(s[a])throw new Error("Invalid diff operation in diff_fromDelta: "+s[a])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},n.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},n.prototype.match_bitap_=function(t,e,n){function r(t,r){var i=t/e.length,a=Math.abs(n-r);return s.Match_Distance?i+a/s.Match_Distance:a?1:i}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),s=this,a=this.Match_Threshold,o=t.indexOf(e,n);-1!=o&&(a=Math.min(r(0,o),a),-1!=(o=t.lastIndexOf(e,n+e.length))&&(a=Math.min(r(0,o),a)));var l=1<<e.length-1;o=-1;for(var c,h,f,u=e.length+t.length,d=0;d<e.length;d++){for(c=0,h=u;c<h;)r(d,n+h)<=a?c=h:u=h,h=Math.floor((u-c)/2+c);u=h;var g=Math.max(1,n-h+1),p=Math.min(n+h,t.length)+e.length,v=Array(p+2);v[p+1]=(1<<d)-1;for(var m=p;m>=g;m--){var b=i[t.charAt(m-1)];if(v[m]=0===d?(v[m+1]<<1|1)&b:(v[m+1]<<1|1)&b|(f[m+1]|f[m])<<1|1|f[m+1],v[m]&l){var _=r(d,m-1);if(_<=a){if(a=_,!((o=m-1)>n))break;g=Math.max(1,2*n-o)}}}if(r(d+1,n)>a)break;f=v}return o},n.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},n.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var i=e.substring(t.start2-r,t.start2);i&&t.diffs.unshift([0,i]);var s=e.substring(t.start2+t.length1,t.start2+t.length1+r);s&&t.diffs.push([0,s]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+s.length,t.length2+=i.length+s.length}},n.prototype.patch_make=function(t,e,r){var i,s;if("string"==typeof t&&"string"==typeof e&&void 0===r)i=t,s=this.diff_main(i,e,!0),s.length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(t&&"object"==typeof t&&void 0===e&&void 0===r)s=t,i=this.diff_text1(s);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===r)i=t,s=e;else{if("string"!=typeof t||"string"!=typeof e||!r||"object"!=typeof r)throw new Error("Unknown call format to patch_make.");i=t,s=r}if(0===s.length)return[];for(var a=[],o=new n.patch_obj,l=0,c=0,h=0,f=i,u=i,d=0;d<s.length;d++){var g=s[d][0],p=s[d][1];switch(l||0===g||(o.start1=c,o.start2=h),g){case 1:o.diffs[l++]=s[d],o.length2+=p.length,u=u.substring(0,h)+p+u.substring(h);break;case-1:o.length1+=p.length,o.diffs[l++]=s[d],u=u.substring(0,h)+u.substring(h+p.length);break;case 0:p.length<=2*this.Patch_Margin&&l&&s.length!=d+1?(o.diffs[l++]=s[d],o.length1+=p.length,o.length2+=p.length):p.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(o,f),a.push(o),o=new n.patch_obj,l=0,f=u,c=h)}1!==g&&(c+=p.length),-1!==g&&(h+=p.length)}return l&&(this.patch_addContext_(o,f),a.push(o)),a},n.prototype.patch_deepCopy=function(t){for(var e=[],r=0;r<t.length;r++){var i=t[r],s=new n.patch_obj;s.diffs=[];for(var a=0;a<i.diffs.length;a++)s.diffs[a]=i.diffs[a].slice();s.start1=i.start1,s.start2=i.start2,s.length1=i.length1,s.length2=i.length2,e[r]=s}return e},n.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],s=0;s<t.length;s++){var a,o=t[s].start2+r,l=this.diff_text1(t[s].diffs),c=-1;if(l.length>this.Match_MaxBits?-1!=(a=this.match_main(e,l.substring(0,this.Match_MaxBits),o))&&(-1==(c=this.match_main(e,l.substring(l.length-this.Match_MaxBits),o+l.length-this.Match_MaxBits))||a>=c)&&(a=-1):a=this.match_main(e,l,o),-1==a)i[s]=!1,r-=t[s].length2-t[s].length1;else{i[s]=!0,r=a-o;var h;if(h=-1==c?e.substring(a,a+l.length):e.substring(a,c+this.Match_MaxBits),l==h)e=e.substring(0,a)+this.diff_text2(t[s].diffs)+e.substring(a+l.length);else{var f=this.diff_main(l,h,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(f)/l.length>this.Patch_DeleteThreshold)i[s]=!1;else{this.diff_cleanupSemanticLossless(f);for(var u,d=0,g=0;g<t[s].diffs.length;g++){var p=t[s].diffs[g];0!==p[0]&&(u=this.diff_xIndex(f,d)),1===p[0]?e=e.substring(0,a+u)+p[1]+e.substring(a+u):-1===p[0]&&(e=e.substring(0,a+u)+e.substring(a+this.diff_xIndex(f,d+p[1].length))),-1!==p[0]&&(d+=p[1].length)}}}}}return e=e.substring(n.length,e.length-n.length),[e,i]},n.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(var r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var i=t[0],s=i.diffs;if(0==s.length||0!=s[0][0])s.unshift([0,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>s[0][1].length){var a=e-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1],i.start1-=a,i.start2-=a,i.length1+=a,i.length2+=a}if(i=t[t.length-1],s=i.diffs,0==s.length||0!=s[s.length-1][0])s.push([0,n]),i.length1+=e,i.length2+=e;else if(e>s[s.length-1][1].length){var a=e-s[s.length-1][1].length;s[s.length-1][1]+=n.substring(0,a),i.length1+=a,i.length2+=a}return n},n.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,r=0;r<t.length;r++)if(!(t[r].length1<=e)){var i=t[r];t.splice(r--,1);for(var s=i.start1,a=i.start2,o="";0!==i.diffs.length;){var l=new n.patch_obj,c=!0;for(l.start1=s-o.length,l.start2=a-o.length,""!==o&&(l.length1=l.length2=o.length,l.diffs.push([0,o]));0!==i.diffs.length&&l.length1<e-this.Patch_Margin;){var h=i.diffs[0][0],f=i.diffs[0][1];1===h?(l.length2+=f.length,a+=f.length,l.diffs.push(i.diffs.shift()),c=!1):-1===h&&1==l.diffs.length&&0==l.diffs[0][0]&&f.length>2*e?(l.length1+=f.length,s+=f.length,c=!1,l.diffs.push([h,f]),i.diffs.shift()):(f=f.substring(0,e-l.length1-this.Patch_Margin),l.length1+=f.length,s+=f.length,0===h?(l.length2+=f.length,a+=f.length):c=!1,l.diffs.push([h,f]),f==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(f.length))}o=this.diff_text2(l.diffs),o=o.substring(o.length-this.Patch_Margin);var u=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==u&&(l.length1+=u.length,l.length2+=u.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=u:l.diffs.push([0,u])),c||t.splice(++r,0,l)}}},n.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},n.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var r=t.split("\n"),i=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var a=r[i].match(s);if(!a)throw new Error("Invalid patch string: "+r[i]);var o=new n.patch_obj;for(e.push(o),o.start1=parseInt(a[1],10),""===a[2]?(o.start1--,o.length1=1):"0"==a[2]?o.length1=0:(o.start1--,o.length1=parseInt(a[2],10)),o.start2=parseInt(a[3],10),""===a[4]?(o.start2--,o.length2=1):"0"==a[4]?o.length2=0:(o.start2--,o.length2=parseInt(a[4],10)),i++;i<r.length;){var l=r[i].charAt(0);try{var c=decodeURI(r[i].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==l)o.diffs.push([-1,c]);else if("+"==l)o.diffs.push([1,c]);else if(" "==l)o.diffs.push([0,c]);else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+c)}i++}}return e},n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},n.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,r=["@@ -"+t+" +"+e+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}r[i+1]=n+encodeURI(this.diffs[i][1])+"\n"}return r.join("").replace(/%20/g," ")},this.diff_match_patch=n,this.DIFF_DELETE=-1,this.DIFF_INSERT=1,this.DIFF_EQUAL=0,r.prototype=new Object,r.prototype.recursiveNodes=function(t){var e;return e=t.nodeName&&t.parentNode&&t!=document.body?this.recursiveNodes(t.parentNode):new Array,e.push(t),e},r.prototype.escapeCssNames=function(t){if(!t)return"";try{return t.replace(/\s*sg_\w+\s*/g,"").replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/#/g,"\\#").replace(/\>/g,"\\>").replace(/\,/g,"\\,").replace(/\:/g,"\\:")}catch(e){return void 0,void 0,void 0,void 0,""}},r.prototype.childElemNumber=function(t){for(var e=0;t.previousSibling&&(t=t.previousSibling);)1==t.nodeType&&e++;return e},r.prototype.pathOf=function(t){for(var e=this.recursiveNodes(t),n=this,r="",i=0;i<e.length;i++){var s=e[i];if(s){r+=s.nodeName.toLowerCase();var a=s.id&&CSS.escape(String(s.id));if(a&&a.length>0&&(r+="#"+a),s.classList)for(var o=0;o<s.classList.length;o++)a=CSS.escape(s.classList[o]),s.classList[o]&&a.length>0&&(r+="."+a);r+=":nth-child("+(n.childElemNumber(s)+1)+")",r+=" "}}return" "==r.charAt(r.length-1)&&(r=r.substring(0,r.length-1)),r},r.prototype.commonCss=function(t){try{var e=new n}catch(t){throw"Please include the diff_match_patch library."}if(void 0===t||0==t.length)return"";var r={},i=this.encodeCssForDiff(t,r),s=i.pop();return i.forEach(function(t){var n=e.diff_main(s,t);s="",n.forEach(function(t){0==t[0]&&(s+=t[1])})}),this.decodeCss(s,r)},r.prototype.tokenizeCss=function(t){for(var e=!1,n="",r=[],t=t.replace(/,/," , ").replace(/\s+/g," "),i=t.length,s="",a=0;a<i;a++)s=t[a],e?e=!1:"\\"==s?e=!0:"."!=s&&" "!=s&&"#"!=s&&">"!=s&&":"!=s&&","!=s||(n.length>0&&r.push(n),n=""),n+=s," "!=s&&","!=s||(r.push(n),n="");return n.length>0&&r.push(n),r},r.prototype.decodeCss=function(t,e){for(var n=this.invertObject(e),r="",i=t.split(""),s=0;s<i.length;s++)r+=n[i[s]];return this.cleanCss(r)},r.prototype.encodeCssForDiff=function(t,e){for(var n=50,r=this,i=[],s=0;s<t.length;s++){for(var a=new String,o=r.tokenizeCss(t[s]),l=0;l<o.length;l++){var c=o[l];e[c]||(e[c]=String.fromCharCode(n++)),a+=e[c]}i.push(a)}return i},r.prototype.simplifyCss=function(t,e,n){var r=this,i=r.tokenizeCss(t),s="";r.selectorGets("all",e,t)&&r.selectorGets("none",n,t)&&(s=t);for(var a=0;a<4;a++)for(var o=0;o<i.length;o++){var l=i[o].substring(0,1);if(!r.wouldLeaveFreeFloatingNthChild(i,o)&&(0==a&&":"==l||1==a&&":"!=l&&"."!=l&&"#"!=l&&" "!=l||2==a&&"."==l||3==a&&"#"==l)){var c=i[o];i[o]="";var h=r.cleanCss(i.join(""));if(""==h){i[o]=c;continue}r.selectorGets("all",e,h)&&r.selectorGets("none",n,h)?s=h:i[o]=c}}return r.cleanCss(s)},r.prototype.wouldLeaveFreeFloatingNthChild=function(t,e){return e-1>=0&&":"==t[e-1].substring(0,1)&&(e-2<0||" "==t[e-2])&&(e+1>=t.length||" "==t[e+1])||e+1<t.length&&":"==t[e+1].substring(0,1)&&(e+2>=t.length||" "==t[e+2])&&(e-1<0||" "==t[e-1])},r.prototype.cleanCss=function(t){return t.replace(/\>/," > ").replace(/,/," , ").replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").replace(/,$/,"")},r.prototype.getPathsFor=function(t){for(var e=this,n=[],r=0;r<t.length;r++){var i=t[r];i&&i.nodeName&&n.push(e.pathOf(i))}return n},r.prototype.predictCss=function(t,e){var n=this;if(0==t.length)return"";var r=n.getPathsFor(t),i=n.getPathsFor(e),s=n.commonCss(r),a=n.simplifyCss(s,r,i);if(a.length>0)return a;for(var o="",l=0;l<t.length;l++)o=n.pathOf(t[l])+", "+o;return o=n.cleanCss(o),n.simplifyCss(o,r,i)},r.prototype.fragmentSelector=function(t){for(var e=this,n=[],r=t.split(/\,/),i=0;i<r.length;i++){for(var s=[],a=e.cleanCss(r[i]).split(/\s+/),o=0;o<a.length;o++)s.push(e.tokenizeCss(a[o]));n.push(s)}return n},r.prototype.selectorBlockMatchesSelectorBlock=function(t,e){for(var n=0;n<t.length;n++)if(-1==e.indexOf(t[n]))return!1;return!0},r.prototype.selectorGets=function(t,e,n){var r=this,i=!0;if(0==e.length&&"all"==t)return!1;if(0==e.length&&"none"==t)return!0;for(var s=r.fragmentSelector(n),a=[],o=0;o<e.length;o++)a.push(r.fragmentSelector(e[o])[0]);for(var o=0;o<s.length;o++){if(!i)return;for(var l=s[o];0<a.length;o++){if(!i||""==a[0])return;r._selectorGets(a[0],l)&&("none"==t&&(i=!1),a[0]="")}}return"all"==t&&a.join("").length>0&&(i=!1),i},r.prototype._selectorGets=function(t,e){for(var n=!1,r=t.length-1,i=e.length-1;i>-1&&!n;i--)if(i==e.length-1)this.selectorBlockMatchesSelectorBlock(e[i],t[r])||(n=!0),r--;else{for(var s=!1;r>-1&&!s;)s=this.selectorBlockMatchesSelectorBlock(e[i],t[r]),r--;s||(n=!0)}return!n},r.prototype.invertObject=function(t){var e={};for(var n in t){e[t[n]]=n}return e},r.prototype.cssToXPath=function(t){var e=this.tokenizeCss(t);e[0]&&" "==e[0]&&e.splice(0,1),e[e.length-1]&&" "==e[e.length-1]&&e.splice(e.length-1,1);for(var n=[],r="",i=0;i<e.length;i++)" "==e[i]?(r+=this.cssToXPathBlockHelper(n),n=[]):n.push(e[i]);return r+this.cssToXPathBlockHelper(n)},r.prototype.cssToXPathBlockHelper=function(t){if(0==t.length)return"//";var e="//",n=t[0].substring(0,1);if(","==n)return" | ";":"!=n&&"#"!=n&&"."!=n||(e+="*");for(var r=[],i=null,s=0;s<t.length;s++){var a=t[s];n=a.substring(0,1);var o=a.substring(1);":"==n?(i=o.match(/^nth-child\((\d+)\)$/))&&r.push("(((count(preceding-sibling::*) + 1) = "+i[1]+") and parent::*)"):"."==n?r.push('contains(concat( " ", @class, " " ), concat( " ", "'+o+'", " " ))'):"#"==n?r.push('(@id = "'+o+'")'):","==n||(e+=a)}r.length>0&&(e+="[");for(var s=0;s<r.length;s++)e+=r[s],s<r.length-1&&(e+=" and ");return r.length>0&&(e+="]"),e};var s=function(t,e,n,r,i,s,a,o,l,c,h,f){return f=function(t,e){return new f.i(t,e)},f.i=function(r,i){n.push.apply(this,r?r.nodeType||r==t?[r]:""+r===r?/</.test(r)?((o=e.createElement(i||"q")).innerHTML=r,o.children):(i&&f(i)[0]||e).querySelectorAll(r):/f/.test(typeof r)?/c/.test(e.readyState)?r():f(e).on("DOMContentLoaded",r):r:n)},f.i[h="prototype"]=(f.extend=function(t){for(c=arguments,o=1;o<c.length;o++)if(h=c[o])for(l in h)t[l]=h[l];return t})(f.fn=f[h]=n,{on:function(t,e){return t=t.split(r),this.map(function(n){(r[o=t[0]+(n.b$=n.b$||++i)]=r[o]||[]).push([e,t[1]]),n.addEventListener(t[0],e)}),this},off:function(t,e){return t=t.split(r),h="removeEventListener",this.map(function(n){if(c=r[t[0]+n.b$],o=c&&c.length)for(;l=c[--o];)e&&e!=l[0]||t[1]&&t[1]!=l[1]||(n[h](t[0],l[0]),c.splice(o,1));else!t[1]&&n[h](t[0],e)}),this},is:function(t){return o=this[0],(o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector).call(o,t)}}),f}(t,document,[],/\.(.+)/,0);s.fn.hasClass=function(t){return!!this[0]&&this[0].classList!=e&&this[0].classList.contains(t)},s.fn.addClass=function(t){return this.forEach(function(e){var n=e.classList;n.add.apply(n,t.split(/\s/))}),this},s.fn.removeClass=function(t){return this.forEach(function(e){var n=e.classList;n.remove.apply(n,t.split(/\s/))}),this},s.fn.get=function(t){return this.length>t?this[t]:null},s.fn.css=function(t,e){return this.forEach(function(n){n.style[t]=e}),this},s.fn.hide=function(){return this.forEach(function(t){t.style.display="none"}),this},s.fn.show=function(){return this.forEach(function(t){t.style.display="block"}),this},s.fn.remove=function(){return this.forEach(function(t){t.parentNode.removeChild(t)}),this},s.fn.text=function(t){return this.forEach(function(e){e.textContent=t}),this},s.fn.attr=function(t,e){return this.forEach(function(n){n.setAttribute(t,e)}),this},s.fn.removeAttr=function(t){return this.forEach(function(e){e.removeAttribute(t)}),this},s.fn.trigger=function(e,n){return this.forEach(function(r){if(t.CustomEvent)var i=new CustomEvent(e,{detail:n});else{var i=document.createEvent("CustomEvent");i.initCustomEvent(e,!0,!0,n)}r.dispatchEvent(i)}),this};var a={translateElement:function(t,e){try{for(;t.lastChild;)t.removeChild(t.lastChild);this.processString(e,t)}catch(t){}},processString:function(t,e){var n,r=/^([^]*?)<(a|strong|span|i)([^>]*)>(.*?)<\/\2>([^]*)$/m.exec(t),i=/^([^]*?)<(br|input)([^>]*)\/?>([^]*)$/m.exec(t);r?(this.processString(r[1],e),n=this.createElement(r[2],r[3]),this.processString(r[4],n),e.appendChild(n),this.processString(r[5],e)):i?(this.processString(i[1],e),n=this.createElement(i[2],i[3]),e.appendChild(n),this.processString(i[4],e)):e.appendChild(document.createTextNode(t.replace(/&nbsp;/g,"Â ")))},createElement:function(t,e){var n=document.createElement(t);if(!e)return n;for(var r=e.split(/([a-z]+='[^']+')/),i=0;i<r.length;i++){var s=r[i].trim();if(s){var a,o,l=s.indexOf("=");l>0&&(a=s.substring(0,l),o=s.substring(l+2,s.length-1)),a&&o&&n.setAttribute(a,o)}}return n}},o=function(e){var n,i=null,s=null,a=null,o=[],l=[],c=!0,h=null,f="iPad"===navigator.platform||"iPhone"===navigator.platform||"Android"===navigator.platform,u=0,d=function(t){e("."+t).removeClass(t)},g=function(t){var n=e(t);n.hasClass("sg_selected")?(n.removeClass("sg_selected"),o.splice(e.inArray(t,o),1)):n.hasClass("sg_rejected")?(n.removeClass("sg_rejected"),l.splice(e.inArray(t,l),1)):n.hasClass("sg_suggested")?(n.addClass("sg_rejected"),l.push(t)):(o.length>0&&(d("sg_selected"),o=[]),o.push(t));var r=a.predictCss(o,l.concat(s));return r},p=function(t){if(e(t).hasClass("sg_suggested")||e(t).hasClass("sg_selected"))return t;for(;t.parentNode&&(t=t.parentNode);)if(-1==s.indexOf(t)&&(e(t).hasClass("sg_suggested")||e(t).hasClass("sg_selected")))return t;return null},v=function(t){return t+"px"},m=function(t){return t.parentNode?t.parentNode.tagName.toLowerCase()+" "+t.tagName.toLowerCase():t.tagName.toLowerCase()},b=function(){o=[],l=[],d("sg_selected"),d("sg_rejected"),n.remove(),d("sg_suggested")},_=function(t){var e=document.body.getBoundingClientRect(),n=t.getBoundingClientRect();return{top:n.top-e.top,left:n.left-e.left,outerWidth:t.offsetWidth,outerHeight:t.offsetHeight}},y=function(t){var n=null,r=null,i=null,s=null,a=function(){n&&s&&r&&i&&(n.show(),s.show(),r.show(),i.show())},o=function(){document.body.appendChild(n.get(0)),document.body.appendChild(s.get(0)),document.body.appendChild(r.get(0)),document.body.appendChild(i.get(0))},l=function(){if(n&&n.get(0)){var t=n.get(0).parentNode;t&&(t.removeChild(n.get(0)),t.removeChild(s.get(0)),t.removeChild(r.get(0)),t.removeChild(i.get(0)))}n=s=i=r=null};return t.init=function(){if(!n){var t=v(5);n=e("<div/>").addClass("sg_border").css("height",t).hide().on("click",L),s=e("<div/>").addClass("sg_border").addClass("sg_bottom_border").css("height",v(11)).hide().on("click",L),r=e("<div/>").addClass("sg_border").css("width",t).hide().on("click",L),i=e("<div/>").addClass("sg_border").css("width",t).hide().on("click",L),o()}},t.finalize=function(){l()},t.add=function(e){if(t.remove(),e){var o=_(e),l=o.top,c=o.left,h=o.outerWidth,f=o.outerHeight;n.css("width",v(h+4+10)).css("top",v(l-5-2)).css("left",v(c-2-5)),s.css("width",v(h+4+5)).css("top",v(l+f+2)).css("left",v(c-2-5)),r.css("height",v(f+4)).css("top",v(l-2)).css("left",v(c-2-5)),i.css("height",v(f+4)).css("top",v(l-2)).css("left",v(c+h+2)),s.get(0).textContent=m(e),i.get(0).target_elem=r.get(0).target_elem=n.get(0).target_elem=s.get(0).target_elem=e,a()}},t.remove=function(){n&&s&&r&&i&&(n.hide(),s.hide(),r.hide(),i.hide())},t.BORDER_CLASS="sg_border",t}(y||{}),x=document.createElement("a"),k=function(t){return t?(x.href=t,x.hostname):""},C=function(e){var n=document.createElement("div"),r=t.getComputedStyle(e);n.style.height=r.height,n.style.width=r.width,n.style.position=r.position,n.style.top=r.top,n.style.bottom=r.bottom,n.style.left=r.left,n.style.right=r.right,n.className+="adguard-placeholder sg_ignore";var i=document.createElement("div");i.className+="adguard-placeholder-icon sg_ignore";var s=document.createElement("div");return s.textContent=k(e.src),s.className+="adguard-placeholder-domain sg_ignore",i.appendChild(s),n.appendChild(i),n},w=function(){if(i){for(var t=i,n=0;n<t.length;n++){var r=t[n],s="adguard-placeholder"+n,a=e("#"+s).get(0);if(a){var o=a.parentNode;o&&o.replaceChild(r,a)}}i=null}},E=function(t){n.remove(),w(),h(t)},M=function(){i=e("iframe:not(.sg_ignore),embed,object").filter(function(t){var e="none"!=t.style.display,n=0!=t.offsetWidth&&0!=t.offsetHeight;return e&&n});for(var t=i,n=0;n<t.length;n++){var r=t[n];!function(t){var r=C(t),i="adguard-placeholder"+n;r.setAttribute("id",i);var s=t.parentNode;s&&(s.replaceChild(r,t),f?(e(r).on("gestureend",D),e(r).on("touchmove",B),e(r).on("touchend",function(e){if(e.preventDefault(),P())return!0;E(t)})):e("#"+i).on("click",function(e){e.preventDefault(),E(t)}))}(r)}},S=function(t){if(t.stopPropagation(),c)return!0;if(this==document.body||this==document.body.parentNode)return!1;var e=p(this);return null!=e&&e!=this?n.add(e):n.add(this),!1},A=function(){return!!c||this!=document.body&&this!=document.body.parentNode&&(n.remove(),!1)},L=function(t){if(e(t.target).hasClass("sg_ignore"))return!1;if(t.preventDefault(),t.stopImmediatePropagation(),c)return!0;var r=t.target;return e(r).hasClass(n.BORDER_CLASS)&&(r=r.target_elem||r),r!=document.body&&r!=document.body.parentNode?(g(r),n.remove(),h(r),!1):void 0},N=function(t){
t.preventDefault(),t.stopImmediatePropagation(),S.call(this,t),L.call(this,t)},P=function(){return u>0&&(u--,!0)},T=function(t){return!e(t.target).hasClass("sg_ignore")&&(t.stopPropagation(),!!P()||(N.call(this,t),!1))},I=function(t){return t.stopPropagation(),!1},D=function(){return u=2,!0},B=function(){return u=1,!0},R=function(){M();var t=e("body *:not(.sg_ignore)");f?t.forEach(function(t){t.addEventListener("gestureend",D),t.addEventListener("touchmove",B),t.addEventListener("touchend",T,!0),t.addEventListener("touchstart",I)}):t.forEach(function(t){t.addEventListener("mouseover",S),t.addEventListener("mouseout",A),t.addEventListener("click",L,!0)})},O=function(){w();var t=e("body *");f?t.forEach(function(t){t.removeEventListener("gestureend",D),t.removeEventListener("touchmove",B),t.removeEventListener("touchend",T,!0),t.removeEventListener("touchstart",I)}):t.forEach(function(t){t.removeEventListener("mouseover",S),t.removeEventListener("mouseout",A),t.removeEventListener("click",L,!0)})};n=y;var j={};return j.init=function(t,i){h=t,i&&"object"==typeof i&&(n=i),s=["html","body","head","base"].map(function(t){return e(t).get(0)}),a=new r(e,String),n.init(),R(),c=!1},j.reset=function(){b()},j.close=function(){c=!0,n.finalize(),O()},j.selectElement=function(t){O(),n.add(t),c=!0},j.ignoreClassName=function(){return"sg_ignore"},j}(s),l=function(){var t=["src","data"],e=document.createElement("a"),n=function(t,e,n,r){var i=n?"":t.tagName.toLowerCase();return t.id&&!r&&(i+="#"+CSS.escape(t.id)),i+=g(e||t.classList)},r=function(t,e){e=e||{};for(var r=e.classList,i=("excludeTagName"in e),s=e.excludeTagName,a=("excludeId"in e),o=e.excludeId,l=[],c=t;c.parentNode;){if("BODY"===(c&&c.nodeName?c.nodeName.toUpperCase():""))break;if(c.id){var h="";h=c===t?n(c,r||[],!i||s,!!a&&o):n(c,[],!0,!1),l.unshift(h);break}for(var f=1,u=c;u.previousSibling;u=u.previousSibling)1===u.previousSibling.nodeType&&f++;for(var d=0,g=0;c.parentNode&&g<c.parentNode.childNodes.length;g++)d+=1===c.parentNode.childNodes[g].nodeType?1:0;var p;if(p=0===d||1===d?"":1===f?":first-child":f===d?":last-child":":nth-child("+f+")",c===t){var v=n(c,r,!!i&&s,o);v+=p,l.unshift(v)}else l.unshift(n(c,c.classList,!1,!1)+p);c=c.parentNode}return l.join(" > ")},i=function(t,e){return p(e||t.classList)},s=function(t,e){if(t){e=e||{};var s,a=e.cssSelectorType||"STRICT_FULL";switch(a){case"STRICT_FULL":s=r(t,e);break;case"STRICT":s=n(t,e.classList,e.excludeTagName,e.excludeId);break;case"SIMILAR":s=i(t,e.classList)}return s?"##"+s:""}},a=function(t,e,n,r){if(!e)return null;var i=e.replace(/^http:\/\/(www\.)?/,"||");return 0===i.indexOf(".")&&(i=i.substring(1)),n||(i=i+"$domain="+r),i},o=function(e){if(!e||!e.getAttribute)return null;for(var n=0;n<t.length;n++){var r=t[n],i=e.getAttribute(r);if(d(i))return i}return null},l=function(t){var e=o(t);return e&&""!==e},c=function(t){return t.classList&&t.classList.length>0},h=function(t){return t.id&&""!==t.id.trim()},f=function(t){return u(t).host.replace("www.","").replace(/:\d+/,"")},u=function(t){var e=new RegExp("^(([^:/\\?#]+):)?(//(([^:/\\?#]*)(?::([^/\\?#]*))?))?([^\\?#]*)(\\?([^#]*))?(#(.*))?$"),n=e.exec(t);return{host:n[4]||"",path:n[7]||""}},d=function(t){return!(!t||(e.href=t,!e.hostname))},g=function(t){var e=[];if(t)for(var n=0;n<t.length;n++)e.push("."+CSS.escape(t[n]));return e.join("")},p=function(t){var e=[];if(t)for(var n=0;n<t.length;n++)e.push("."+CSS.escape(t[n]));return e.join(", ")},v={};return v.makeCssNthChildFilter=r,v.getElementInfo=function(t){var e=[],n=t.attributes;if(n)for(var r=0;r<n.length;r++){var i=n[r];e.push({name:i.name,value:i.value})}return{tagName:t.tagName,attributes:e,urlBlockAttributeValue:o(t),haveUrlBlockParameter:l(t),haveClassAttribute:c(t),haveIdAttribute:h(t)}},v.constructRuleCssSelector=function(t){if(!t)return null;var e=t.indexOf("##"),n=t.indexOf("$");if(e>=0)return t.substring(e+"##".length,n>=0?n:t.length);var r=t.substring(0,n);return r=r.replace(/[\|]|[\^]/g,""),d(r)?'[src*="'+r+'"]':null},v.constructRuleText=function(t,e){var n=f(e.url),r=e.ruleType;if("URL"===r){var i=a(0,e.urlMask,e.isBlockOneDomain,n);if(i)return i}var o;return"CSS"===r&&(o=s(t,e),e.attributes&&(o=(o||"##"+o)+e.attributes)),e.isBlockOneDomain||(o=n+o),o},v}(),c=function(t){var e=null,n=0,r=1,i=0,s=null,a=function(){var s=e.querySelectorAll(".ui-slider-handle");t(s).css("left",100*(i-1)/(r-n)+"%");for(var a=e.querySelectorAll(".tick"),o=0;o<a.length;o++)a[o].style.background=o+1<i?"#36BA53":"#E0DFDB"},o=function(){t(e).addClass("adg-slide ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all");var i=document.createElement("a");i.setAttribute("href","#"),i.setAttribute("class","ui-slider-handle ui-state-default ui-corner-all"),e.appendChild(i);for(var s=r-n,o=0;o<s;o++)!function(t){var n=document.createElement("div");n.setAttribute("class","tick ui-widget-content"),n.style.left=100/s*t+"%",n.style.width=100/s+"%",e.appendChild(n)}(o);a()},l=function(t){i=t<n?n:t>r?r:t,a(),s(i)},c=function(){var i=t(e),s=e.querySelectorAll(".ui-slider-handle"),a=t(s);t(document).on("mouseup",function(){i.off("mousemove"),a.off("mousemove")}),a.on("mousedown",function(e){return e.preventDefault(),t(this.parentNode).trigger("mousedown")});var o=e.getBoundingClientRect(),c=o.width,h=o.left+document.body.scrollLeft,f=function(t){return Math.round((r-n)/c*(t-h)+n)};i.on("mouseenter",function(){i.on("click",function(t){var e=f(t.pageX);l(e)}),i.on("mousedown",function(){t(this).on("mousemove",function(t){var e=f(t.pageX);l(e)})}),i.on("mouseup",function(){t(this).off("mousemove")})}),i.on("mouseleave",function(){i.off("mousemove"),i.off("click")})},h={};return h.init=function(t,a){e=t,n=a.min,r=a.max,i=a.value,s=a.onValueChanged,o(),c()},h}(s),h=function(e,n,r,i){var s={cssLink:null,onElementBlocked:null,translateElement:null},a=null,o={element:null,elementInfo:null},l={iframe:{baseWidth:668,extendDetailedSettingsHeight:503,detailedMenuHeight:360,selectorMenuHeight:213,topOffset:25}},c=n.ignoreClassName(),h={debounce:function(t,e){var n;return function(){var r=this,i=arguments,s=function(){n=null,t.apply(r,i)};clearTimeout(n),n=setTimeout(s,e)}},getAllChildren:function(t){for(var e=[],n=t;n=h.getChildren(n);)e.push(n);return e},getChildren:function(t){var e,n=0,r=t.childNodes;if(r){var i;for(i=0;i<r.length;i++)1==r[i].nodeType&&(e=r[i],n++)}return 1==n?e:null},getParentsLevel:function(t){for(var e=t,n=[];(e=e.parentNode)&&"BODY"!=h.getNodeName(e);)n.push(e);return n},getNodeName:function(t){return t&&t.nodeName?t.nodeName.toUpperCase():""}},f=function(n){var r=v(),i=m("#drag-handle"),s=e(n.contentDocument),a=Object.create(null),o=function(e){return e||(e=t.event),{x:e.screenX,y:e.screenY}},l=function(t,e){var n=t,i=e;n<0&&(n=0),i<0&&(i=0),r.get(0).style.setProperty("left",n+"px","important"),r.get(0).style.setProperty("top",i+"px","important")},c=function(t){t.preventDefault(),t.stopPropagation()},h=function(t){var e=o(t);l(e.x+a.x,e.y+a.y)},f=function(t){var e=o(t),n=i.get(0),l=r.get(0).getBoundingClientRect();a.x=l.left+n.offsetLeft-e.x,a.y=l.top+n.offsetTop-e.y,s.on("mousemove",h),s.on("selectstart",c)},u=function(){s.off("mousemove",h),s.off("selectstart",c)};i.on("mousedown",f),s.on("mouseup",u)},u=function(){return{width:t.innerWidth,height:t.innerHeight}},d=function(t,e,n,r){return{left:e.width-r-t,top:t}},g=function(t,n,r){var i=u(),s=d(l.iframe.topOffset,i,0,t),a=document.createElement("iframe");a.setAttribute("id","adguard-assistant-dialog"),a.setAttribute("class",c),a.setAttribute("frameBorder","0"),a.setAttribute("allowTransparency","true"),a.style.setProperty("width",t+"px","important"),a.style.setProperty("height",n+"px","important"),a.style.setProperty("position","fixed","important"),a.style.setProperty("left",s.left+"px","important"),a.style.setProperty("top",s.top+"px","important"),e(a).on("load",function(){p(a),r(a)}),document.body.appendChild(a)},p=function(t){try{var e=t.contentDocument;e.open(),e.write("<html><head></head></html>"),e.close()}catch(t){}var n=t.contentDocument.getElementsByTagName("head")[0],r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=s.cssLink,n.appendChild(r)},v=function(){return e("#adguard-assistant-dialog")},m=function(t){return e(v().get(0).contentDocument.querySelectorAll(t))},b=function(t,e,n,r){var i=function(e){y(e,t),L(),f(e),R(),r(e)},s=v();if(s.length>0){var a=s.get(0);return _(e,n,a),void i(a)}g(e,n,i)},_=function(t,e,n){n.style.setProperty("width",t+"px","important"),n.style.setProperty("height",e+"px","important")},y=function(t,e){for(var n=t.contentDocument.body;n.lastChild;)n.removeChild(n.lastChild);n.appendChild(e.get(0))},x=function(t,n){for(var r in n)n.hasOwnProperty(r)&&e(t.contentDocument.querySelectorAll(r)).on("click",n[r])},k=function(t){t.preventDefault(),I(function(){q(),S()})},C=function(t){t.preventDefault(),q(),w(),M()},w=function(){n.close()},E=function(t){o.element=t,o.elementInfo=r.getElementInfo(t),D(t,o.elementInfo.haveUrlBlockParameter,o.elementInfo.haveClassAttribute)},M=function(){w(),v().remove()},S=function(){n.init(E)},A=function(t){m("#filter-rule").get(0).value=t},L=function(){for(var t=m("[i18n]"),e=0;e<t.length;e++){var n=t[e].getAttribute("i18n");s.translateElement(t[e],n)}},N=function(){return e('<div class="main"><div class="close adg-close"></div><div class="head" id="drag-handle">\t<div i18n="assistant_block_element" class="head_title" id="head_title"></div>\t<div i18n="assistant_block_element_explain" class="head_text" id="head_text"></div></div><div class="content">\t<div class="element-rule">\t\t<div i18n="assistant_slider_explain" class="element-rule_text"></div>\t\t<div class="element-rule_slider">\t\t\t<div class="adg-slide" id="slider">\t\t\t\t<div class="adg-slide-clue-max">MIN</div>\t\t\t\t<div class="adg-slide-clue-min">MAX</div>\t\t\t</div>\t\t</div>\t\t<div class="element-rule_more">\t\t\t<span class="element-rule_expand-link" id="adg-show-adv-settings">\t\t\t\t<span i18n="assistant_extended_settings" class="element-rule_expand-link_txt"></span>\t\t\t\t<span class="element-rule_expand-link_arr"></span>\t\t\t</span>\t\t</div>\t\t<div class="element-rule_form" id="adv-settings">\t\t\t<div class="element-rule_form-cont">\t\t\t\t<div class="element-rule_fieldset" id="one-domain-checkbox-block">\t\t\t\t\t<input class="form-ui-control" id="one-domain-checkbox" type="checkbox"/>\t\t\t\t\t<label for="one-domain-checkbox" class="form-ui">\t\t\t\t\t\t<span i18n="assistant_apply_rule_to_all_sites" class="form-ui-txt"></span>\t\t\t\t\t</label>\t\t\t\t</div>\t\t\t\t<div style="display: none;" class="element-rule_fieldset" id="block-by-url-checkbox-block">\t\t\t\t\t<input class="form-ui-control" id="block-by-url-checkbox" type="checkbox"/>\t\t\t\t\t<label for="block-by-url-checkbox" class="form-ui">\t\t\t\t\t\t<span i18n="assistant_block_by_reference" class="form-ui-txt"></span>\t\t\t\t\t</label>\t\t\t\t</div>\t\t\t\t<div style="display: none;" class="element-rule_fieldset" id="block-similar-checkbox-block">\t\t\t\t\t<input class="form-ui-control" id="block-similar-checkbox" type="checkbox"/>\t\t\t\t\t<label for="block-similar-checkbox" class="form-ui">\t\t\t\t\t\t<span i18n="assistant_block_similar" class="form-ui-txt"></span>\t\t\t\t\t</label>\t\t\t\t</div>\t\t\t\t<div class="element-rule_fieldset">\t\t\t\t\t<input class="form-control" id="filter-rule" type="text"/>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div></div><div class="foot">\t<button i18n="assistant_another_element" type="button" class="btn btn-default" id="adg-cancel"></button>\t<div class="foot_action">\t\t<div class="foot_action_btn">\t\t\t<button i18n="assistant_preview" type="button" class="btn btn-primary" id="adg-preview"></button>\t\t\t<button i18n="assistant_block" type="button" class="btn btn-cancel" id="adg-accept"></button>\t\t</div>\t</div></div></div>')},P=function(){return e('<div class="main '+c+'"><div class="close adg-close" id="close-button"></div><div class="head" id="drag-handle">\t<div i18n="assistant_select_element" class="head_title"></div>\t<div i18n="assistant_select_element_ext" class="head_text"></div></div><div class="foot">\t<button i18n="assistant_select_element_cancel" type="button" class="btn btn-default" id="cancel-select-mode"></button></div></div>')},T=function(t){var e=N();b(e,l.iframe.baseWidth,l.iframe.detailedMenuHeight,function(e){x(e,{"#close-button":C,".adg-close":C,"#one-domain-checkbox-block":X,"#block-by-url-checkbox-block":X,"#block-similar-checkbox-block":X,"#adg-cancel":k,"#adg-preview":z,"#adg-accept":W,"#adg-show-adv-settings":O}),t()})},I=function(t){var e=P();b(e,l.iframe.baseWidth,l.iframe.selectorMenuHeight,function(e){x(e,{"#cancel-select-mode":C,".adg-close":C}),t()})},D=function(t,e,r){T(function(){j(t),n.selectElement(t),X(),F(e,r)})},B=function(t,e){var n=v().get(0);e&&n.style.setProperty("height",e+"px","important"),t&&n.style.setProperty("width",t+"px","important"),R()},R=function(){var e=t.innerHeight,n=document.body.scrollTop+e,r=v().get(0),i=r.getBoundingClientRect().top+document.body.scrollTop,s=r.offsetHeight;if(i+s>n){var a=e-s-l.iframe.topOffset;a<0&&(a=l.iframe.topOffset),r.style.setProperty("top",a+"px","important")}},O=function(){m("#adv-settings").hasClass("open")?(B(null,l.iframe.detailedMenuHeight),m("#adv-settings").removeClass("open"),m("#adg-show-adv-settings").removeClass("active")):(B(null,l.iframe.extendDetailedSettingsHeight),m("#adv-settings").addClass("open"),m("#adg-show-adv-settings").addClass("active"))},j=function(t){var e=h.getParentsLevel(t),n=h.getAllChildren(t),r=Math.abs(e.length+1),a=e.length+n.length+1,o={value:r,min:1,max:a};if(1==a){m("#slider").hide();var l=m(".element-rule_text").get(0);return l.removeAttribute("i18n"),void s.translateElement(l,"assistant_slider_if_hide")}o.onSliderMove=function(r){var i;r>0&&(i=e[r-1]),0===r&&(i=t),r<0&&(i=n[Math.abs(r+1)]),H(i)},i.init(m("#slider").get(0),{min:o.min,max:o.max,value:o.value,onValueChanged:function(t){var e=o.value-t;o.onSliderMove(e)}})},F=function(t,e){t?m("#block-by-url-checkbox-block").show():(m("#block-by-url-checkbox").get(0).checked=!1,m("#block-by-url-checkbox-block").hide()),e?m("#block-similar-checkbox-block").show():(m("#block-similar-checkbox").get(0).checked=!1,m("#block-similar-checkbox-block").hide())},H=function(t){q(),o.element=t,o.elementInfo=r.getElementInfo(t),n.selectElement(t),U(),X(),F(o.elementInfo.haveUrlBlockParameter,o.elementInfo.haveClassAttribute)},U=function(){m("#block-by-url-checkbox").get(0).checked=!1,m("#block-similar-checkbox").get(0).checked=!1,m("#one-domain-checkbox").get(0).checked=!1},z=function(t){if(t&&t.preventDefault(),a)return q(),s.translateElement(m("#head_title").get(0),"assistant_block_element"),s.translateElement(m("#head_text").get(0),"assistant_block_element_explain"),s.translateElement(m("#adg-preview").get(0),"assistant_preview_start"),n.selectElement(o.element),void m(".content").show();$(),s.translateElement(m("#head_title").get(0),"assistant_preview_header"),s.translateElement(m("#head_text").get(0),"assistant_preview_header_info"),s.translateElement(m("#adg-preview").get(0),"assistant_preview_end"),m(".content").hide()},$=function(){n.reset();var t=m("#filter-rule").get(0).value,e=r.constructRuleCssSelector(t);if(e){var i=document.createElement("style");i.setAttribute("type","text/css"),a=i;var s=document.getElementsByTagName("head")[0];s&&(i.appendChild(document.createTextNode(e+" {display: none !important;}")),s.appendChild(i))}},q=function(){if(a){var t=document.getElementsByTagName("head")[0];t&&t.removeChild(a),a=null}},X=function(){var t=m("#block-by-url-checkbox").get(0).checked,e=m("#block-similar-checkbox").get(0).checked,n=m("#one-domain-checkbox").get(0).checked;F(o.elementInfo.haveUrlBlockParameter&&!e,o.elementInfo.haveClassAttribute&&!t);var i={urlMask:o.elementInfo.urlBlockAttributeValue,isBlockOneDomain:n,ruleType:t?"URL":"CSS",cssSelectorType:e?"SIMILAR":"STRICT_FULL",url:document.location},s=r.constructRuleText(o.element,i);A(s)},W=function(){q(),z(),a=null;var t=m("#filter-rule").get(0).value;s.onElementBlocked(t,M)},G=h.debounce(function(){o.element&&!a&&n.selectElement(o.element)},50);e(t).on("resize",G),e(t).on("scroll",G),this.init=function(t){s.cssLink=t.cssLink,s.onElementBlocked=t.onElementBlocked,s.translateElement=t.translateElement,I(function(){q(),S(),t.selectedElement&&e(t.selectedElement).trigger("click")})},this.destroy=function(){q(),w(),M(),e(t).off("resize",G),e(t).off("scroll",G)}};!function(){if(t.top===t&&document.documentElement instanceof HTMLElement&&"undefined"!=typeof contentPage){var e,n=null;document.addEventListener("mousedown",function(t){2===t.button&&(n=t.target)}),contentPage.onMessage.addListener(function(t){switch(t.type){case"initAssistant":var r=t.options,i=r.localization,f=r.addRuleCallbackName,u=function(t,e){contentPage.sendMessage({type:f,ruleText:t},e)},d=function(t,e){var n=i[e];a.translateElement(t,n)};e?e.destroy():e=new h(s,o,l,c);var g=null;n&&r.selectElement&&(g=n),e.init({cssLink:r.cssLink,onElementBlocked:u,translateElement:d,selectedElement:g});break;case"destroyAssistant":e&&(e.destroy(),e=null)}})}}()}(window);