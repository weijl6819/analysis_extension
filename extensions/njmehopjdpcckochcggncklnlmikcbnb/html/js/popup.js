function getQueryVariables(){for(var e=window.location.search.substring(1).split("&"),a=0;a<e.length;a++){var s=e[a].split("=");queryVariables[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}}function onAmazonPage(e){chrome.tabs.query({currentWindow:!0,active:!0},function(a){var s=a[0];e(!!s.url.match(/amazon/))})}function setButtonsEnabled(){chrome.tabs.query({currentWindow:!0,active:!0},function(e){var a=e[0];chrome.tabs.sendMessage(a.id,{type:"on-product-page"},function(e){chrome.storage.sync.get("extensionEnabled",function(a){console.log(e),"undefined"==a.extensionEnabled&&chrome.storage.sync.set({extensionEnabled:!0}),a.extensionEnabled?void 0!=e?"product"==e.status?(clearInterval(checkingInterval),$(".block").removeClass("closed"),"ATVPDKIKX0DER"!=e.marketplace&&($(".action-profitabily-calculator").addClass("closed"),$(".action-stock-stats").addClass("closed")),$(".block-show").addClass("closed"),$(".block-always-show").removeClass("closed")):"listing"==e.status?(clearInterval(checkingInterval),$(".block").addClass("closed"),$(".block-show").removeClass("closed"),$(".block-always-show").removeClass("closed")):0==e.status&&clearInterval(checkingInterval):checkingInterval=setInterval(checkOnAmazonPage,2e3):(clearInterval(checkingInterval),$(".block").hasClass("closed")||$(".block").addClass("closed"),$(".block-show").hasClass("closed")||$(".block-show").addClass("closed"))})})})}function checkOnAmazonPage(){onAmazonPage(function(e){e?(setButtonsEnabled(),chrome.storage.sync.get("extensionEnabled",function(e){"undefined"==e.extensionEnabled?(chrome.storage.sync.set({extensionEnabled:!0}),$(".action-enable").removeClass("toggle_off").addClass("toggle_on"),setButtonsEnabled()):e.extensionEnabled?($(".action-enable").removeClass("toggle_off").addClass("toggle_on"),setButtonsEnabled()):($(".action-enable").removeClass("toggle_on").addClass("toggle_off"),$(".block").addClass("closed"),$(".block-show").addClass("closed"))})):($(".block").hasClass("closed")||$(".block").addClass("closed"),$(".block-show").hasClass("closed")||$(".block-show").addClass("closed"))})}function applyInfo(e){e.rating&&$(".progress[id*=rating]>.determinate").each(function(a){var s=parseInt($(this).parent().attr("id").replace(/[^0-9]/g,""))-1;$(this).text(e.rating[s]),$(this).css("width",e.rating[s])})}function showNothingFoundCard(){$("#dataNotFound").modal("open")}function restoreToDefaults(){chrome.storage.local.remove(["from","to","isOnlyVerifiedEnabled","isOnlyHelpfulEnabled","isOnlyWithImagesEnabled","isOnlyWithVideosEnabled","search","isStar1Enabled","isStar2Enabled","isStar3Enabled","isStar4Enabled","isStar5Enabled"]),$("#from").val(""),$("#to").val(""),$("#isOnlyVerifiedEnabled").prop("checked",!1),$("#isOnlyHelpfulEnabled").prop("checked",!1),$("#isOnlyWithImagesEnabled").prop("checked",!1),$("#isOnlyWithVideosEnabled").prop("checked",!1),$("#isStar1Enabled").prop("checked",!1),$("#isStar2Enabled").prop("checked",!1),$("#isStar3Enabled").prop("checked",!1),$("#isStar4Enabled").prop("checked",!1),$("#isStar5Enabled").prop("checked",!1),$("#search").val("")}function getSettings(){var e={};return e.from=$("#from").val(),e.to=$("#to").val(),e.isOnlyVerifiedEnabled=$("#isOnlyVerifiedEnabled").prop("checked"),e.isOnlyHelpfulEnabled=$("#isOnlyHelpfulEnabled").prop("checked"),e.isOnlyWithImagesEnabled=$("#isOnlyWithImagesEnabled").prop("checked"),e.isOnlyWithVideosEnabled=$("#isOnlyWithVideosEnabled").prop("checked"),e.isStar1Enabled=$("#isStar1Enabled").prop("checked"),e.isStar2Enabled=$("#isStar2Enabled").prop("checked"),e.isStar3Enabled=$("#isStar3Enabled").prop("checked"),e.isStar4Enabled=$("#isStar4Enabled").prop("checked"),e.isStar5Enabled=$("#isStar5Enabled").prop("checked"),e.isStarsEnabled=e.isStar1Enabled||e.isStar2Enabled||e.isStar3Enabled||e.isStar4Enabled||e.isStar5Enabled,e.isDateEnabled=!(!e.from&&!e.to),e.search=$("#search").val(),e}var queryVariables={};getQueryVariables();var checkingInterval=null;$(document).ready(function(){$(".ver").text("Version "+chrome.app.getDetails().version);var e=!1,a="https://members.helium10.com/",s={},t="Helium10_Free";$.ajax({url:a+"/extension/check-login",cache:!1,dataType:"json",success:function(o){chrome.storage.sync.set({isUserLogged:o.logged}),e=o.logged,s=o.modules,t=o.plan,o.logged?($(".block").show(),$(".block-show").show(),$("#login-notification").hide(),$("#module-notification").hide()):($("#member-url").text(a).attr("href",a),$(".block").hide(),$(".block-show").hide(),$("#login-notification").show())}}),checkOnAmazonPage(),$(".action-enable").click(function(){$(this).hasClass("toggle_off")?($(this).removeClass("toggle_off").addClass("toggle_on"),setButtonsEnabled(),chrome.runtime.sendMessage({disable:!1,type:"change-icon"}),chrome.storage.sync.set({extensionEnabled:!0})):($(".action-enable").removeClass("toggle_on").addClass("toggle_off"),$(".block").addClass("closed"),$(".block-show").addClass("closed"),$(".action-review-downloader-content").hasClass("hide")||$(".action-review-downloader").click(),chrome.runtime.sendMessage({disable:!0,type:"change-icon"}),chrome.storage.sync.set({extensionEnabled:!1})),chrome.storage.sync.get("extensionEnabled",function(e){console.log(e)})}),$(".action").click(function(e){if(e.stopPropagation(),0==$("."+$(this).data("class")+"-content").length)return!1;$("."+$(this).data("class")+"-content").hasClass("hide")?($("."+$(this).data("class")+"-content").removeClass("hide"),$(this).parent().find(".arrow").removeClass("fa-arrow-circle-right").addClass("fa-arrow-circle-down")):($("."+$(this).data("class")+"-content").addClass("hide"),$(this).parent().find(".arrow").removeClass("fa-arrow-circle-down").addClass("fa-arrow-circle-right"))}),$(".action-stock-stats").click(function(){return!!e&&(s.inventoryLevels?void chrome.tabs.query({currentWindow:!0,active:!0},function(e){var a=e[0];window.close(),chrome.tabs.sendMessage(a.id,{type:"open-stock-stats"})}):(console.log("error"),$("#module-name").text("Inventory Levels"),$("#module-notification").show(),!1))}),$(".action-asin-grabber").click(function(){return!!e&&(s.inventoryLevels?void chrome.tabs.query({currentWindow:!0,active:!0},function(e){var a=e[0];window.close(),chrome.tabs.sendMessage(a.id,{type:"open-asin-grabber"})}):(console.log("error"),$("#module-name").text("ASIN Grabber"),$("#module-notification").show(),!1))}),$(".action-black-box").click(function(){if(!e)return!1;chrome.tabs.query({currentWindow:!0,active:!0},function(e){var a=e[0];window.close(),chrome.tabs.sendMessage(a.id,{type:"open-black-box"})})}),$(".action-profitabily-calculator").click(function(){if(!e)return!1;chrome.tabs.query({currentWindow:!0,active:!0},function(e){var a=e[0];window.close(),chrome.tabs.sendMessage(a.id,{type:"open-calculator"})})}),$(".action-product-research").click(function(){chrome.runtime.sendMessage({type:"open-module-tab",module:"productResearch"})}),$(".action-review-raid").click(function(){chrome.runtime.sendMessage({type:"open-module-tab",module:"reviewRaid"})}),$(".action-all-tools").click(function(e){e.preventDefault(),chrome.runtime.sendMessage({type:"open-member-account"})}),$("#closeButton").click(function(){window.close()}),$(".selector").click(function(){$(this).hasClass("option_enabled")?($(this).removeClass("option_enabled"),$(this).addClass("option_disabled"),$("#"+$(this).data("id")).click()):($(this).removeClass("option_disabled"),$(this).addClass("option_enabled"),$("#"+$(this).data("id")).click())}),$(".star").click(function(){var e=$(this).data("star");$(this).hasClass("fa-star")?($(this).removeClass("fa-star"),$(this).addClass("fa-star-o"),$("#isStar"+e+"Enabled").click()):($(this).addClass("fa-star"),$(this).removeClass("fa-star-o"),$("#isStar"+e+"Enabled").click())}),$(".datepicker").pickadate({selectMonths:!0,selectYears:15,today:"Today",clear:"Clear",close:"Ok",closeOnSelect:!0}),$(".modal").modal({complete:function(){window.close()}}),chrome.tabs.query({active:!0,currentWindow:!0},function(e){var a=e[0].id;new URL(e[0].url||"about:blank");chrome.tabs.executeScript(a,{file:"html/js/review-downloader/content.js"},function(){chrome.tabs.sendMessage(a,{action:"getInfo"},function(e){e&&e.info?(applyInfo(e.info),_info=e.info):showNothingFoundCard()})}),$(".preloader").css("display","none")}),$("[type=checkbox]").on("change",function(e){"isOnlyVerifiedEnabled"==$(this).attr("id")?chrome.storage.local.set({isOnlyVerifiedEnabled:$(this).prop("checked")}):"isOnlyHelpfulEnabled"==$(this).attr("id")?chrome.storage.local.set({isOnlyHelpfulEnabled:$(this).prop("checked")}):"isOnlyWithImagesEnabled"==$(this).attr("id")?chrome.storage.local.set({isOnlyWithImagesEnabled:$(this).prop("checked")}):"isOnlyWithVideosEnabled"==$(this).attr("id")?chrome.storage.local.set({isOnlyWithVideosEnabled:$(this).prop("checked")}):"isStar1Enabled"==$(this).attr("id")?chrome.storage.local.set({isStar1Enabled:$(this).prop("checked")}):"isStar2Enabled"==$(this).attr("id")?chrome.storage.local.set({isStar2Enabled:$(this).prop("checked")}):"isStar3Enabled"==$(this).attr("id")?chrome.storage.local.set({isStar3Enabled:$(this).prop("checked")}):"isStar4Enabled"==$(this).attr("id")?chrome.storage.local.set({isStar4Enabled:$(this).prop("checked")}):"isStar5Enabled"==$(this).attr("id")&&chrome.storage.local.set({isStar5Enabled:$(this).prop("checked")})}),$("#search, #from, #to").on("change input",function(e){var a={};a[$(this).attr("id")]=$(this).val(),chrome.storage.local.set(a)}),$("#restore").click(function(e){restoreToDefaults()}),$("#extract").click(function(e){var a=chrome.extension.getURL("html/reviews.html"),s={};s.settings=getSettings(),s.info=_info,s.plan=t,a+="?data="+btoa(encodeURIComponent(JSON.stringify(s))),chrome.tabs.create({url:a,active:!0}),window.close()}),chrome.storage.local.get(["from","to","isOnlyVerifiedEnabled","isOnlyHelpfulEnabled","isOnlyWithImagesEnabled","isOnlyWithVideosEnabled","search","isStar1Enabled","isStar2Enabled","isStar3Enabled","isStar4Enabled","isStar5Enabled"],function(e){e.from&&$("#from").val(e.from),e.to&&$("#to").val(e.to),!0===e.isOnlyVerifiedEnabled&&$("#isOnlyVerifiedEnabled").click(),!0===e.isOnlyHelpfulEnabled&&$("#isOnlyHelpfulEnabled").click(),!0===e.isOnlyWithImagesEnabled&&$("#isOnlyWithImagesEnabled").click(),!0===e.isOnlyWithVideosEnabled&&$("#isOnlyWithVideosEnabled").click(),!0===e.isStar1Enabled&&$("#isStar1Enabled").click(),!0===e.isStar2Enabled&&$("#isStar2Enabled").click(),!0===e.isStar3Enabled&&$("#isStar3Enabled").click(),!0===e.isStar4Enabled&&$("#isStar4Enabled").click(),!0===e.isStar5Enabled&&$("#isStar5Enabled").click(),e.search&&$("#search").val(e.search)})});var _info;chrome.runtime.onMessage.addListener(function(e,a,s){if("status"==e.action)if(!0===e.isPlaying){$(".progress").css("display","block");var t=100*e.current/e.total;$(".determinate").css("width",t+"%"),$("#play").toggleClass("stop",!0).toggleClass("play",!1),$("#play>span>i").text("stop"),$("#play>span>span").text("Stop")}else $(".progress").css("display","none"),$(".determinate").css("width","0%"),$("#play").toggleClass("stop",!1).toggleClass("play",!0),$("#play>span>i").text("play_arrow"),$("#play>span>span").text("Start")});