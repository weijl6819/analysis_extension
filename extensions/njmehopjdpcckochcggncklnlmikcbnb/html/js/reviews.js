function captchaFound(e){return-1!==e.indexOf("/errors/validateCaptcha")}function getAndProcess(e){return new Promise(function(a,t){fetch(e,{credentials:"omit"}).then(function(n){200!==n.status&&t(n.status),n.text().then(function(n){var s=document.implementation.createHTMLDocument("amazon");s.documentElement.innerHTML=n,process(s)?a():t(e+": reviews not found"),delete s,s=null})}).catch(function(e){t(e)})})}function optimizeRequest(e){var a=new URL(e);!0===_data.settings.isOnlyVerifiedEnabled?a.searchParams.set("reviewerType","avp_only_reviews"):a.searchParams.set("reviewerType","all_reviews");for(var t="",n=1;n<=5;++n)if(!0===_data.settings["isStar"+n+"Enabled"]){if(t){t="";break}switch(n){case 1:t="one";break;case 2:t="two";break;case 3:t="three";break;case 4:t="four";break;case 5:t="five"}t+="_star"}return t?a.searchParams.set("filterByStar",t):a.searchParams.set("filterByStar","all_stars"),!0===_data.settings.isOnlyWithImagesEnabled||!0===_data.settings.isOnlyWithVideosEnabled?a.searchParams.set("mediaType","media_reviews_only"):a.searchParams.set("mediaType","all_contents"),a.toString()}function promiseFor(e,a,t){return e(t)?a(t).then(promiseFor.bind(null,e,a)):t}function few(e,a){return new Promise(function(t,n){if(_data.info.count>0){for(var s=[],r=e;r<_data.info.count&&r<a;++r){var i=_data.info.paginatedUrl.replace(/(_paging_btm_)([\d]+)/gi,"$1"+(r+1)).replace(/(pageNumber=)([\d]+)/gi,"$1"+(r+1));s.push(getAndProcess(i))}Promise.all(s).then(t)}else t()})}function appendReview(e){for(var a='<span class="secondary-content">',t=0;t<e.rating;++t)a+='<i class="material-icons yellow-text accent-5">star</i>';a+='</span><span class="title">'+e.title+"</span>    <p>By "+e.author+" on "+e.date+"</p>    <p>"+e.body+"</p>",$("#allReviews ul.collection").append($("<li></li>").addClass("collection-item").html(a))}function process(e){for(var a=e.querySelectorAll("[data-hook=review]"),t=0;t<a.length;++t){var n={},s=a[t].querySelectorAll("[data-reftag=cm_cr_arp_d_rvw_rvwer]");if(!0!==_data.settings.isOnlyVerifiedEnabled||s){n.isVerified=s.length;var r=a[t].querySelector("[data-hook=review-star-rating]").innerText.replace(/(^[\d]{1})(.*)/,"$1");if(!(_data.settings.isStarsEnabled&&!1===_data.settings["isStar"+r+"Enabled"]||(n.rating=parseInt(r),n.isHelpful=!!a[t].querySelector("[data-hook=helpful-vote-statement]"),_data.settings.isOnlyHelpfulEnabled&&n.isHelpful))){var i=a[t].querySelectorAll("[data-hook=review-image-tile]");if(!_data.settings.isOnlyWithImagesEnabled||i.length){n.images="";for(var l=0;l<i.length;++l)n.images+=(0===l?"":" ")+i[l].getAttribute("src").replace(/\._[\d]+_\./g,".");var o=a[t].querySelectorAll(".video-url");if(!_data.settings.isOnlyWithVideosEnabled||o.length){n.videos="";for(l=0;l<o.length;++l)n.videos+=(0===l?"":" ")+o[l].value;if(n.date=a[t].querySelector("[data-hook=review-date]").innerText.replace(/^on\s+/i,""),_data.settings.isDateEnabled){var d=new Date(n.date);if(_data.settings.from&&new Date(_data.settings.from)>d)continue;if(_data.settings.to&&new Date(_data.settings.to)<d)continue}if(n.title=a[t].querySelector("[data-hook=review-title]").innerText,n.body=a[t].querySelector("[data-hook=review-body]").innerText.replace(/(\r?\n)/g," "),console.log(a[t]),console.log($(a[t])),n.author=$(a[t]).find(".a-profile-name").text(),n.author||(n.author=a[t].querySelector(".a-profile-name").innerText),_data.reviews.push(n),_data.reviews.length<100)appendReview(n);else if(!document.getElementById("break")){$("#allReviews ul.collection").append($('<li id="break"></li>').addClass("collection-item orange lighten-5").html('<a style="margin-bottom: 10px;margin-top:0!important;" id="saveAll" title="This will save all reviews to a CSV file" href="#!" class="saveAll2 btn btn-normal waves-effect waves-light red"><span><i class="material-icons left">save</i><span>Export reviews</span></span></a>                <span class="title">To increase speed only first 100 reviews shown. Please click Extract button to get all reviews.</span>'))}}}}}}_data.info.processed++;var c=_data.reviews.length.toLocaleString()+" found out of "+_data.info.total+" ("+Math.floor(100*_data.info.processed/_data.info.count)+"%)";return $(".preloader-status").text(c),$("#allReviews .found").text(_data.reviews.length.toLocaleString()),!!a}function analyse(e){var a=_data.reviews[e].body;a=(a=a.replace(/•|,|\./g," ").replace(/\s+/g," ").toLowerCase()).split(" ");for(var t={},n=0;n<a.length;++n)for(var s=a[n],r=n+1;r<n+_maxWordsInPhrase&&r<a.length-1;++r)if(s+=" "+a[r],r!==n+1||!_excluded[a[r]]&&!_excluded[a[n]]){if(void 0===_data.nGrams[s])_data.nGrams[s]={count:0,where:[]};else{var i=r-n;void 0===t[i]&&(t[i]=[]),t[i].push(s)}++_data.nGrams[s].count,_data.nGrams[s].where.push(e)}for(var l in t)if("1"!=l){var o=parseInt(l)-1;if(t[o])for(n=0;n<t[o].length;++n)--_data.nGrams[t[o][n]].count}}function escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function showAnalysis(){return $(".preloader-status").text("Analyse phrases... This may take awhile"),new Promise(function(e,a){if(!1===_data.analyseDone)for(var t=0;t<_data.reviews.length;++t)analyse(t);e()}).then(function(){var e=Object.keys(_data.nGrams).filter(function(e){return _data.nGrams[e].count>1}).map(function(e){var a=_data.nGrams[e];return _data.nGrams[e].phrase=e,a});_data.nGrams=e,_data.nGrams.forEach(function(e){e.where=e.where.filter(function(e,a,t){return t.indexOf(e)===a})}),_data.nGrams.sort(function(e,a){return a.where.length-e.where.length});for(var a=$("#analysis>ul.collection"),t=$(".preloader-status"),n=["IS","TO","OF","AND","A","NO"],s=["THE","I","FOR"],r={},i=0;i<_data.nGrams.length;++i){var l=_data.nGrams[i].phrase.toUpperCase();console.log(_data.nGrams[i].phrase);try{n.forEach(function(e){if(l.startsWith(e)||l.endsWith(e))throw r}),s.forEach(function(e){if(l.endsWith(e))throw r})}catch(e){if(e===r)continue;throw e}var o='<div class="collapsible-header"><span class="badge"><a data-pos="'+i+'" href="#!" title="Use this to export this keyword and reviews where it appears to the CSV"><i class="material-icons right green-text">save</i></a>'+_data.nGrams[i].where.length+"</span>"+_data.nGrams[i].phrase+'</div><div class="collapsible-body"></div>';a.append($("<li></li>").addClass("collection-item").css("padding","0").html(o)),t.text("..."+_data.nGrams[i].phrase+"...")}$("#analysis ul.collection .collapsible-header").click(function(e){if(!($(this).parent().find(".collapsible-body ul").length>0)){for(var a=parseInt($(this).find("[data-pos]").attr("data-pos")),t='<ul class="collection">',n=0;n<_data.nGrams[a].where.length;++n){var s=_data.reviews[_data.nGrams[a].where[n]];t+='<li class="collection-item"><span class="secondary-content">';for(var r=0;r<s.rating;++r)t+='<i class="material-icons yellow-text accent-5">star</i>';t+='</span><span class="title">'+s.title+"</span>                <p>By "+s.author+" on "+s.date+"</p>                <p>"+s.body.replace(new RegExp("("+escapeRegExp(_data.nGrams[a].phrase).split(" ").join("[•,\\.\\s]+")+")","gi"),'<span style="background: yellow;">$1</span>')+"</p></li>"}t+="</ul>",$(this).parent().find(".collapsible-body").html(t)}}),$("#analysis ul.collection > li a").click(function(e){e.stopPropagation();var a=parseInt($(this).attr("data-pos")),t="data:text/csv;charset=utf-8,";t+='"Date","Author","Verified","Helpful","Title","Body","Rating","Images","Videos""Keyword phrase"\r\n';for(var n=0;n<_data.nGrams[a].where.length;++n){var s=_data.reviews[_data.nGrams[a].where[n]];t+='"'+s.date+'","'+s.author+'","'+(s.isVerified?"yes":"-")+'","'+(s.isHelpful?"yes":"-")+'","'+s.title+'","'+s.body+'","'+s.rating+'","'+(s.images||"-")+'","'+(s.videos||"-")+'","'+_data.nGrams[a].phrase+'"\r\n'}$(this).attr("href",encodeURI(t)),$(this).attr("download",_data.info.title+" Reviews.csv")}),$(".tab.disabled").toggleClass("disabled"),$("#analysis .found").text(_data.nGrams.length.toLocaleString()),$("#analysis .found").toggleClass("found-reviews").toggleClass("found-phrases"),_data.analyseDone=!0})}$(document).ready(function(e){function a(){var e=new Date,a=(e.getMonth()+1).toString();a<10&&(a="0"+a);var t=e.getDate().toString();t<10&&(t="0"+t);var n=e.getHours().toString();n<10&&(n="0"+n);var s=e.getMinutes().toString();s<10&&(s="0"+s);var r=e.getSeconds().toString();return r<10&&(r="0"+r),_data.info.asin+"_"+e.getFullYear()+a+t+"_"+n+s+r+".csv"}function t(e){var t=new Blob([e],{type:"application/csv;charset=utf-8;\ufeff"});if(window.navigator.msSaveBlob)navigator.msSaveBlob(t,a());else{var n=document.createElement("a"),s=URL.createObjectURL(t);n.href=s,n.style="visibility:hidden",n.download=a(),document.body.appendChild(n),n.click(),document.body.removeChild(n)}}$(".modal").modal({}),$(".collapsible").collapsible(),$("ul.tabs").tabs({onShow:function(e){"analysis"===$(e).attr("id")?($("#exportAll").css("display","inline"),$(".saveAll").css("display","none"),$(".saveAll2").css("display","none")):($("#exportAll").css("display","none"),$(".saveAll").css("display","inline"),$(".saveAll2").css("display","inline"))}}),$(".saveAll").click(function(e){var a="Helium10_Free"==_data.plan?99:_data.reviews.length;if(0!==_data.reviews.length){if(0!==$(this).attr("href").indexOf("data")){var n="";n+='"Date","Author","Verified","Helpful","Title","Body","Rating","Images","Videos"\r\n';for(var s=0;s<a;++s){var r=_data.reviews[s];void 0!=r&&(n+='"'+r.date+'","'+r.author+'","'+(r.isVerified?"yes":"-")+'","'+(r.isHelpful?"yes":"-")+'","'+r.title+'","'+r.body+'","'+r.rating+'","'+(r.images||"-")+'","'+(r.videos||"-")+'"\r\n')}99==a&&_data.reviews.length>99&&(n+="Gold Plan or higher is required in order to access reviews beyond 100'."),t(n)}}else $("#dataNotFound").modal("open")}),$(document).on("click",".saveAll2",function(e){var a="Helium10_Free"==_data.plan?99:_data.reviews.length;if(0!==_data.reviews.length){if(0!==$(this).attr("href").indexOf("data")){var n="";n+='"Date","Author","Verified","Helpful","Title","Body","Rating","Images","Videos"\r\n';for(var s=0;s<a;++s){var r=_data.reviews[s];void 0!=r&&(n+='"'+r.date+'","'+r.author+'","'+(r.isVerified?"yes":"-")+'","'+(r.isHelpful?"yes":"-")+'","'+r.title+'","'+r.body+'","'+r.rating+'","'+(r.images||"-")+'","'+(r.videos||"-")+'"\r\n')}99==a&&_data.reviews.length>99&&(n+="Gold Plan or higher is required in order to access reviews beyond 100'."),t(n)}}else $("#dataNotFound").modal("open")}),$("#exportAll").click(function(e){if(0!=_data.nGrams){if(0!==$(this).attr("href").indexOf("data")){var a="data:text/csv;charset=utf-8,";a+='"Keyword Phrase","Appeared"\r\n';for(var t=0;t<_data.nGrams.length;++t){var n=_data.nGrams[t];a+='"'+n.phrase+'","'+n.count+'"\r\n'}$(this).attr("href",encodeURI(a)),$(this).attr("download",_data.info.title+" Phrases.csv")}}else $("#phrasesNotFound").modal("open")})});var _excluded={a:1,am:1,an:1,and:1,are:1,as:1,b:1,be:1,but:1,c:1,d:1,do:1,"don't":1,e:1,f:1,g:1,h:1,he:1,him:1,i:1,in:1,is:1,it:1,"it's":1,k:1,l:1,m:1,my:1,n:1,o:1,of:1,on:1,or:1,p:1,q:1,r:1,s:1,she:1,t:1,the:1,they:1,there:1,this:1,u:1,v:1,w:1,was:1,were:1,where:1,with:1,without:1,who:1,whom:1,x:1,y:1,z:1,"*":1,"-":1},_url=new URL(document.location.href),_maxWordsInPhrase=9,_data=_url.searchParams.get("data");if("test"!==_data){(_data=JSON.parse(decodeURIComponent(atob(_data)))).reviews=[],_data.nGrams={},_data.analyseDone=!1,_data.info.url=optimizeRequest(_data.info.url);var rating=[];if(_data.info.avg){rating=["star","star","star","star","star"];var avg=_data.info.avg.split("."),full=parseInt(avg[0])-1,half=parseInt(avg[1])>2&&parseInt(avg[1])<8?parseInt(avg[0]):-1,empty=-1!==half?half+1:parseInt(avg[1])>7?full+2:full+1;-1!==half&&(rating[half]="star_half");for(var i=empty;i<5;++i)rating[i]="star_border"}var html='<span class="secondary-content">';for(i=0;i<rating.length;++i)html+='<i class="material-icons yellow-text accent-5">'+rating[i]+"</i>";html+='</span><img src="'+(_data.info.image||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsBAMAAACLU5NGAAAAJFBMVEX///+/v7/Z2dnMzMzk5OTo6Ojz8/PHx8fDw8P8/PzT09Pt7e3NjN+gAAAEL0lEQVR42u3cvVPUQBgGcOYuwsRUGzB8NZyVdMk4FnZHp91ROVpdxhkYOyjVilKrVEIJZTrCXygHOS6bZPd2L++bBH2e9tD8Zt9ncsmGsLaGIAiCIAiCIAiCIAiCIP9QvLcd5N1S1gvRQbbAAgsssMACCyywwALrebJeM+fNSqwd7ruZDbDAAgsssMACCyywwAILLLDAAgsssEhYf6b9Y7l350L8/tw31qfHTz72i/U1/2j7tk8s78L8/2mRdbzYVz3oD2vdam+4NdZlcc962hvWqMgKzQ7tsrNcaYd/34w1mHKzBhJr04yVHXCzNuQHIonRDM9/cbNimTU2mqHuiDSsI5lldOaKdcOmYY1kVmg0Q92ZpDPWQLuqnbFmddztHWs2Q80hWSp/bTZDTee7OkHE+m9PGtaVzJqazVCzrB19+eT/YJeXtS6xXpnOUH1Mjgub98tnGOUX/swsqVy3pjNU/ygRy7O7aI6XnUqobjGObM5a8xmqO0/FWnzmJ+YzVB6U7Pb1dP7RxGKGys6TsdwPjx8drlnMUNl5wq2RL/c31nsmWxCD5V+flBtJ7sk3o3uL4jfobm+23YozVB2Vm1Wzfk7x1LuddMFyfyTaGao6z8waiFQ7Q1XnmVmx2Et0M1R1npl1vzKp/kp2qwPWbGVKy1WaoaLzvKyH651UN0NF53lZN6KyXHGZdd06K7+WTjUzVHSelZVvXRaXyzH7NVxW1vzaMNXMsL7znKyn+6HFclVnWN95TtbLp59P1TOs7zwna/EI4Wm54hpW0C4rv6EvLlfdDIXfLqt4EZovV90MazvPyJIGdqicoRCTNlnywHzlDGs7z8dyqrvPTv17DUGbrKtqsetnWNd5SlZS/ZqWlksxQ7GTcLK8VLVZkq+Jo3o7ZcLJGkpXMJeVgx/EKlbIycqkK5hRtUKRihVwsiKxmSi2LZfEZ2R50vbk0IZV7TwdawZZLNex1RtZEz5WVtzNdS+sWCEf66HQ8+Ua2L2/FrCxPGnzO7Zj+WysvOOPy+VGdqxK58lYWfFZgWP7FuKEizVfn4flurJlhUwsT3q0cmPLCphYi9Pn/XJ51q+S+kysrPgk6tKaVe48FSsq3jKM7N+8HbM/ihI/V3ghOGRhDUXDBCysrCnLZ2FFTVml32KiYXmNVaXO07CGzVkhAytrzgoYWM2rJfboWQTVKnWehDWkYI3JWRkF64ycFVGw9qlZJNWSO0/BIqmW3HkKVkbDGhOzIhrWGS2Lplpy5wlYRNWSOk/AIqqW1HkCVkTFGlOyqKolxHdKlkP2p34OW/uFg1UDFlhggQUWWGCBBRZYz551wpzTlVgtBiywwAILLLDAAgsssMACCyywwAILLLDAAgsssMACCyywwAILLLDAAgsssMACCyywwAILLARBEARBEARBEARBEARB/rv8BUtDEQhvdHVJAAAAAElFTkSuQmCC")+'" class="circle"><span class="title">'+_data.info.title+"</span>        <p>"+_data.info.total+' customer reviews<span id="found" style="margin-top: calc(.75rem - 11px);" class="found found-reviews badge yellow accent-5">0</span></p><p>Avearge rating '+_data.info.avg+"</p>",$("ul.collection").append($("<li></li>").addClass("collection-item avatar blue lighten-5").html(html)),fetch(_data.info.url,{credentials:"omit"}).then(function(e){200===e.status?e.text().then(function(e){var a=document.implementation.createHTMLDocument("amazon");a.documentElement.innerHTML=e;var t=[].slice.call(a.querySelectorAll(".a-pagination > li > a")).reverse();if(t.length)for(var n=0;n<t.length;++n){var s=parseInt(t[n].innerText.replace(/,/g,""));if(s){_data.info.count=s,_data.info.paginatedUrl=new URL(_data.info.url).origin+t[n].getAttribute("href");break}}else _data.info.count=1,_data.info.paginatedUrl=_data.info.url;_data.info.processed=0,_data.settings.search&&(_data.info.paginatedUrl=_data.info.paginatedUrl+"&filterByKeyword="+_data.settings.search.replace(/\s+/g,"+")),t=null,a=null,promiseFor(function(e){return e<=_data.info.count},function(e){return few(e,e+10).then(function(a){return e+10})},0).then(function(){_data.reviews.length?showAnalysis().then(function(){$(".preloader").css("display","none")}):($(".preloader").css("display","none"),$("#dataNotFound").modal("open"))})}):console.log("Looks like there was a problem. Status Code: "+e.status)}).catch(function(e){console.log("Fetch Error :-S",e)})}