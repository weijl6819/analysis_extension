!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(34),i=n(67).style;n(20),n(19),window.main=function(){var e=n(18),t=n(63),r=n(65),a=n(66);window.BeenoteEventHub=new e,o();var s=document.getElementById("root"),c=window.ReactRouter,l=c.Router,u=c.Route,f=c.hashHistory,h=document.createElement("style");h.type="text/css",h.innerHTML=i,document.body.appendChild(h),window.ReactDOM.render(React.createElement(l,{history:f},React.createElement(u,{path:"/",component:t},React.createElement(u,{path:"home",component:r,tabname:"Home"}),React.createElement(u,{path:"settings",component:a,tabname:"Settings"}))),s),window.location.href="#/home"}},function(e,t){"use strict";var n={},o=["Alert","UserSelection","UserMouseDown","UserMouseMove","UserMouseUp","UserSelecting","TooltipClick","WindowResize","SaveNote","DeleteNote","FetchNoteList","ReceiveNoteList","PageChanged","ContextMenuClick","CommentOnHighlight","ShareNotePage","GetWebpageInfo","PushWebpageInfo","DisablePage","EnablePage","CheckBlackList","AddBlackList","RemoveBlackList","GetRecentNotes","ReceiveRecentNotes","LOG_INFO","LOG_WARNING","LOG_ERROR","ActionPageNotification","Login","LoginSuccessfully"];o.forEach(function(e){return n[e]=e}),e.exports=n},function(e,t,n){"use strict";function o(e,t,n,o){var i=document.createElement(e);return s(i,t),void 0!=n&&(i.className=n),void 0!=o&&o.forEach(function(e){return i.appendChild(e)}),i}function i(e){var t=o("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),t}function r(e,t){var n=document.createTextNode(e);return n.parentNode=t,n}function a(e,t,n){n&&(e=e.parentElement),t instanceof Array||(t=[t]),t=t.map(function(e){return e.toUpperCase()});do for(var o=0;o<t.length;o++){var i=t[o];if(e.tagName==i)return e}while(e=e.parentElement);return!1}function s(e,t){if(void 0!=t)for(var n in t)e.style[n]=String(t[n])}function c(e,t){if(d.Array(t)||(t=[t]),e.removeAttribute&&t.forEach(function(t){e.removeAttribute(t)}),e.childNodes.length>0)for(var n in e.childNodes)1==e.childNodes[n].nodeType&&c(e.childNodes[n],t);return e}function l(e){var t=document.createElement("div");return t.innerHTML=e,t}function u(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!(t<=0))for(var n=0;n<e.children.length;n++){var o=e.children[n];if("SCRIPT"!=o.nodeName&&"STYLE"!=o.nodeName){var i=p(o);"sticky"==i.position?""!=i.zIndex&&"auto"!=i.zIndex||(o.style.zIndex=1):f(o,t-1)}}}function h(e){return e.webkitTransform=e.transform,e}var d=n(7),p=n(17).getComputedStyle;e.exports={domMaker:o,styleMaker:i,textMaker:r,hasParent:a,parse:l,setStyle:s,removeAttributes:c,updateStickyElements:f,removeElement:u,fixWebKit:h}},function(e,t,n){"use strict";n(1),e.exports={debug:!1,logEvents:[],constant:{XPathCondition:{TAG_NAME_ONLY:0},PointInRange:{Tooltip:1,Note:0,Outside:-1}},googleQueryURL:"https://www.google.com/#q=",noteEvent:["remove","hover"],global:{get BeenoteEventHub(){return window.BeenoteEventHub},get IsSelecting(){return window.IsSelecting}},highlightColor:{default:"yellow",palette:{red:"#FDC3D3",green:"#CEF5C5",yellow:"#F9DB95",blue:"#6CB1EF"},strong:{red:"#84334a",green:"#469106",yellow:"#9d8d49",blue:"#4682b4"}}}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=function(){function e(){o(this,e)}return i(e,[{key:"INFO",value:function(e){window.BeenoteEventHub.emit(r.LOG_INFO,e)}},{key:"ERROR",value:function(e){window.BeenoteEventHub.emit(r.LOG_ERROR,e)}},{key:"WARNING",value:function(e){window.BeenoteEventHub.emit(r.LOG_WARNING,e)}}]),e}();e.exports=new a},function(e,t){"use strict";function n(e,t){t=t||function(){},chrome.runtime.sendMessage(e,function(e){return t(e?e:e),!0})}function o(e,t,n){chrome.tabs.sendMessage(e,t,n)}function i(e){chrome.runtime.onMessage.addListener(function(t,n,o){return e(t,n,o)})}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};o(e.id,t,n)}function a(e){return i(e)}function s(e,t){return n(e,t)}function c(e,t){return{type:e,content:t}}e.exports={sendMessage:s,sendMessageToTab:r,onMessage:a,createMessage:c}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function r(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){g&&d&&(g=!1,d.length?p=d.concat(p):m=-1,p.length&&s())}function s(){if(!g){var e=i(a);g=!0;for(var t=p.length;t;){for(d=p,p=[];++m<t;)d&&d[m].run();m=-1,t=p.length}d=null,g=!1,r(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,f,h=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var d,p=[],g=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||g||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";function o(e){return e.nodeType==Node.TEXT_NODE}function i(e){return"IMG"==e.nodeName}function r(e){return e.nodeType==Node.ELEMENT_NODE}function a(e){return e.constructor==window.Range}function s(e){return e.constructor==window.String}function c(e){return e.constructor==window.Object}function l(e){return e.constructor==p}function u(e){return e instanceof Array}function f(e){return e instanceof Function}function h(e){if(!e)return!1;if(e.indexOf(".")==-1)return!1;var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(e)}function d(e){var t=/^[ -~]+$/;return!t.test(e)}var p=n(12).Selection;e.exports={TextNode:o,ImageNode:i,HtmlNode:r,Range:a,String:s,Object:c,UserDefinedSelection:l,Array:u,Function:f,URL:h,Unicode:d}},function(e,t){"use strict";e.exports=function(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)n[o]=t[o];return n}},,function(e,t,n){"use strict";function o(e,t){throw new Error("not implemented")}function i(e,t){return e.top<=t.top&&e.left<=t.left&&e.bottom>=t.bottom&&e.right>=t.right}function r(e){var t=f({},e);return t.top=t.top+window.pageYOffset,t.left=t.left+window.pageXOffset,t.bottom=t.bottom+window.pageYOffset,t.right=t.right+window.pageXOffset,t}function a(e,t){return t.left<e.x&&t.left+t.width>e.x&&t.top<e.y&&t.top+t.height>e.y}function s(e){for(var t=[],n=0;n<e.length;n++)0!=e[n].width&&0!=e[n].height&&t.push(e[n]);for(var n=0;n<t.length;n++){for(var o=!1,r=0;r<t.length;r++)n!=r&&i(t[n],t[r])&&(o=!0);o&&(t.splice(n,1),n-=1)}return t}function c(e,t){for(var n=[],o=0;o<e.length;o++){var i=e[o];if(!(i.right<=t.left||i.left>=t.right||i.bottom<=t.top||i.top>=t.bottom)){var r=Math.max(i.left,t.left),a=Math.min(i.right,t.right),s=Math.max(i.top,t.top),c=Math.min(i.bottom,t.bottom);i.left=r,i.right=a,i.top=s,i.bottom=c,i.width=a-r,i.height=c-s,n.push(i)}}return n}function l(e){return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function u(e,t){for(var n=e.textContent,o=h(e.style.font),i=[],r=0;r<t.length;r++)i.push(l(t[r]));t=i;var a=t.reduce(function(e,t){return e+t.width},0),s=o(n),c=n.split("").reverse(),u=c.map(function(e){return o(e)});return Math.min.apply(null,u),t.forEach(function(e){for(e.textPercentage=e.width/a,e.internalWidth=e.textPercentage*s,e.useInternalWidth=0,e.charList=[];e.useInternalWidth+.8*u[u.length-1]<=e.internalWidth;){var t=c.pop(),n=u.pop();e.useInternalWidth+=n,e.charList.push(t)}e.textContent=e.charList.join("")}),t}var f=n(8),h=n(27).textRuler;n(4),e.exports={resolveBoxDuplication:s,boxIntersect:o,boxContains:i,boxAbsolute:r,isPointInBox:a,cropBoxWithFrame:c,rectCopyToObject:l,distributeTextAmongBoxes:u}},,function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){function o(e){return i(e)?n?n(e):NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}function i(t){return e.intersectsNode(t)}if(!e)throw new TypeError("a Range instance must be given");var r=e,a=(r.startContainer,r.endContainer,r.commonAncestorContainer),s=a.ownerDocument;return r=null,s.createNodeIterator(a,t,o)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(3).constant.XPathCondition,s=n(10).boxAbsolute,c=n(10).rectCopyToObject,l=n(7),u=(n(2).textMaker,n(17).getComputedAttributes),f=function(){function e(t,n,i,r,a,s){if(o(this,e),l.Object(t)){var c=t;for(var u in c)this[u]=c[u]}else this.elementName=t||"",this.className=n||"",this.idName=i||"",this.order=r||-1,this.contentMatcher=this.contentMatcher||"",this.otherMeta=s||{}}return r(e,[{key:"toJSON",value:function(){return{elementName:this.elementName,className:this.className,idName:this.idName,order:this.order,contentMatcher:this.contentMatcher,otherMeta:this.otherMeta}}}]),e}(),h=function(){function e(t){if(o(this,e),t.constructor==window.Array)this.xPathElementList=t.map(function(e){return new f(e)});else{if(this.xPathElementList=[],!l.HtmlNode(t)){for(var n=1,i=t;i=i.previousSibling;)i.nodeType==t.nodeType&&n++;var r=new f(t.constructor.name.toLowerCase()+"()","","",n);this.xPathElementList.unshift(r),t=t.parentNode}for(;t&&1==t.nodeType;t=t.parentNode){var a="",s="",c="",n=-1,u="",h={};a=t.localName.toLowerCase(),t.hasAttribute("id")&&(c=t.getAttribute("id")),t.hasAttribute("class")&&(s=t.getAttribute("class")),n=1;for(var i=t.previousSibling;i;i=i.previousSibling)i.localName==t.localName&&n++;var r=new f(a,s,c,n,u,h);this.xPathElementList.unshift(r)}}}return r(e,[{key:"toString",value:function(e){var t=this.xPathElementList.map(function(e){return e.elementName+"["+e.order+"]"}),n="/"+t.join("/");return t.length?n:null}},{key:"evalToElement",value:function(e){var t=l.String(e)?e:this.toString(e),n=new XPathEvaluator,o=n.evaluate(t,document.documentElement,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return o.singleNodeValue}},{key:"toJSON",value:function(){return this.xPathElementList.map(function(e){return e.toJSON()})}}]),e}(),d=function(){function e(t){if(o(this,e),l.Range(t)){var n=this._nativeRange=t;this.startOffset=n.startOffset,this.endOffset=n.endOffset,this.startContainer=new h(n.startContainer),this.endContainer=new h(n.endContainer)}else{var n=t;this.startOffset=n.startOffset,this.endOffset=n.endOffset,this.startContainer=new h(n.startContainer),this.endContainer=new h(n.endContainer),this._nativeRange=document.createRange();var i=this.startContainer.evalToElement(a.TAG_NAME_ONLY),r=this.endContainer.evalToElement(a.TAG_NAME_ONLY);i&&r&&(this._nativeRange.setStart(i,this.startOffset),this._nativeRange.setEnd(r,this.endOffset))}}return r(e,[{key:"reEvaluateRange",value:function(){this._nativeRange=document.createRange();var e=this.startContainer.evalToElement(a.TAG_NAME_ONLY),t=this.endContainer.evalToElement(a.TAG_NAME_ONLY);e&&t&&(this._nativeRange.setStart(e,this.startOffset),this._nativeRange.setEnd(t,this.endOffset))}},{key:"getRangeList",value:function(){function e(e){return l.TextNode(e)?NodeFilter.FILTER_ACCEPT:l.ImageNode(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}if(this._nativeRange.collapsed)return[];for(var t=i(this._nativeRange,NodeFilter.SHOW_ALL,e),n=[],o=void 0;o=t.nextNode();)if(o.parentElement.offsetParent){var r=new Range;if(l.ImageNode(o)?r.selectNode(o):r.selectNodeContents(o),!(this._nativeRange.compareBoundaryPoints(Range.START_TO_END,r)<0)){o==this._nativeRange.startContainer&&r.setStart(o,this._nativeRange.startOffset),o==this._nativeRange.endContainer&&r.setEnd(o,this._nativeRange.endOffset);var a=this.getClientRectsWithoutLineBreak(r);if(a.length>0)if(l.TextNode(o)){var s=u(o.parentNode,["whiteSpace"]),c=[];if("pre"==s.whiteSpace){var f=r.toString();if(f.indexOf("\n")==-1)c.push(r);else for(var h=f.split("\n"),d=1,p=r.startOffset,g=0;g<h.length;g++){var m=document.createRange();m.setStart(o,p);var v=p+h[g].length;m.setEnd(o,v),p=v+d,c.push(m)}}else c.push(r);c.forEach(function(e){n.push(e)})}else n.push(r)}}return n}},{key:"getClientRectsWithoutLineBreak",value:function(e){for(var t=e.getClientRects(),n=[],o=0;o<t.length;o++)n.push(t[o]);var i=e.cloneRange();i.setEnd(i.startContainer,i.startOffset);var r=i.getClientRects().length;return r>1&&n.shift(),n}},{key:"distributeText",value:function(e,t,n,o,i){var r=this.getClientRectsWithoutLineBreak(t);if(1==r.length)return void i.push(e.textContent.substr(n,o-n));var a=n,s=o,c=new Range;c.selectNodeContents(e),c.setStart(e,n);for(var l=0,u=parseInt((n+o)/2);l<50;){c.setEnd(e,u);var f=this.getClientRectsWithoutLineBreak(c);c.setEnd(e,u+1);var h=this.getClientRectsWithoutLineBreak(c);if(f.length>1)s=u,u=parseInt((a+s)/2);else{if(h.length>1){var d=h[1].width*h[1].height>0?u:u+1;return i.push(e.textContent.substr(n,d-n)),t.setStart(e,d),void this.distributeText(e,t,d,o,i)}a=u,u=parseInt((a+s)/2)}l+=1}}},{key:"getBoundingBoxes",value:function(t){var n=this;t.forEach(function(t){var o=t.startContainer;if(l.TextNode(o)){var i=[];n.distributeText(o,t.cloneRange(),t.startOffset,t.endOffset,i),t.textContent=i;var r=t.startContainer.parentElement,a=u(r,e.TextStyleList);a.textIndent="initial",t.style=a}});for(var o=[],i=0;i<t.length;i++){var r=t[i],a=this.getClientRectsWithoutLineBreak(r);if(r.textContent)for(var s=0;s<a.length;s++){var f=c(a[s]);f.textContent=r.textContent[s],f.style=r.style,f.range=r,o.push(f)}else{console.assert(1==a.length);var h=c(a[0]);h.textContent=null,h.style={width:h.width+"px"},h.range=r,o.push(h)}}return o}},{key:"getClientRects",value:function(){return this.reEvaluateRange(),this._nativeRange.getClientRects()}},{key:"getBoundingBox",value:function(e){var t=this._nativeRange.getBoundingClientRect();return e?s(t):t}},{key:"toJSON",value:function(){return{startOffset:this.startOffset,endOffset:this.endOffset,startContainer:this.startContainer.toJSON(),endContainer:this.endContainer.toJSON()}}},{key:"toString",value:function(){var e=this._nativeRange.toString();return e.split("\n").filter(function(e){return!e||e.trim()}).join("\n")}}],[{key:"clearSelection",value:function(){window.getSelection()?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}},{key:"serializeRange",value:function(e){return{startContainer:e.startContainer,endContainer:e.endContainer,startOffset:e.startOffset,endOffset:e.endOffset}}},{key:"deserializeRange",value:function(e){var t=document.createRange();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),t}}]),e}();d.TextStyleList=["fontSize","color","direction","textTransform","textAlign","textDecoration","textOrientation","textShadow","textRendering","letterSpacing","wordSpacing","writingMode","verticalAlign","transform","zIndex","whiteSpace"],e.exports={Selection:d,XPath:h}},,function(e,t){"use strict";var n={},o=["SaveNote","RemoveNote","FetchNoteList","SearchWebPage","CheckBlackList","AddBlackList","RemoveBlackList","EnablePage","GetRecentNotes","LoadSharedNotes","CreateSharedLink"];o.forEach(function(e){return n[e]=e}),e.exports=n},,,function(e,t){"use strict";function n(e){if(r.has(e))return r.get(e);var t=window.getComputedStyle(e,null);return r.set(e,t),t}function o(e,t){var o=n(e),i={};return t.forEach(function(e){i[e]=o[e]}),i}function i(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)return defaultStyle[t];var s=n(e),c=s[t];if(o&&c==defaultStyle[t]&&(c="",r)){var l;a.has(e)&&(l=a.get(e)),l=l||{},c=l[t],c||(c=i(e.parentElement,t,o,r),l[t]=c,a.set(e,l))}return c}var r=new WeakMap,a=new WeakMap;e.exports={getComputedAttributes:o,getComputedStyle:n,getStyle:i}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){n(this,e),this.events={}}return o(e,[{key:"on",value:function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n=o?[]:this.events[e]||[],n.push(t),this.events[e]=n,this}},{key:"emit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.events[e]||[];return n?(t instanceof Array||(t=[t]),o.forEach(function(e){return e.apply(null,t)})):o.forEach(function(e){return e(t)}),this}}]),e}();e.exports=i},function(e,t,n){(function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){function o(){}function i(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!==t(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?s:c)(t.promise,e._value);var o;try{o=n(e._value)}catch(e){return void c(t.promise,e)}s(t.promise,o)}))}function s(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===("undefined"==typeof n?"undefined":t(n))||"function"==typeof n)){var o=n.then;if(n instanceof r)return e._state=3,e._value=n,void l(e);if("function"==typeof o)return void f(i(o,n),e)}e._state=1,e._value=n,l(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}var h=setTimeout;r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new u(e,t,n)),n},r.all=function(e){var n=Array.prototype.slice.call(e);return new r(function(e,o){function i(a,s){try{if(s&&("object"===("undefined"==typeof s?"undefined":t(s))||"function"==typeof s)){var c=s.then;if("function"==typeof c)return void c.call(s,function(e){i(a,e)},o)}n[a]=s,0===--r&&e(n)}catch(e){o(e)}}if(0===n.length)return e([]);for(var r=n.length,a=0;a<n.length;a++)i(a,n[a])})},r.resolve=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t(e))&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var o=0,i=e.length;o<i;o++)e[o].then(t,n)})},r._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){h(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},window.Promise||(window.Promise=r)}(void 0)}).call(t,n(23).setImmediate)},function(e,t){/**
	 * es6-weakmap.js
	 * WeakMap (ECMA-262 6th Edition / ECMAScript 2015)
	 *
	 *
	 * @version 0.9.2
	 * @author think49
	 * @url https://gist.github.com/think49/283b7374e352e09fc131
	 * @license http://www.opensource.org/licenses/mit-license.php (The MIT License)
	 * @see <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-weakmap-constructor">23.3.1 The WeakMap Constructor – ECMA-262 6th Edition</a>
	 */
"use strict";if("function"!=typeof n&&"function"==typeof Object.defineProperties){var n=function(e,t){function n(){o.push([this,[]])}var o=[];return e.defineProperties(n.prototype,{get:{writable:!0,enumerable:!1,configurable:!0,value:function(t){if(e(this)!==this)throw new TypeError("Method WeakMap.prototype.get called on incompatible receiver "+this);for(var n,i,r,a=0,s=o.length;a<s;)if(n=o[a++],n[0]===this){if(e(t)!==t)return;for(i=n[1],a=0,s=i.length;a<s;)if(r=i[a++],r[0]===t)return r[1];return}throw new TypeError("Method WeakMap.prototype.get called on incompatible receiver "+this)}},set:{writable:!0,enumerable:!1,configurable:!0,value:function(t,n){if(e(this)!==this)throw new TypeError("Method WeakMap.prototype.set called on incompatible receiver "+this);for(var i,r,a,s=0,c=o.length;s<c;)if(i=o[s++],i[0]===this){if(e(t)!==t)throw new TypeError("Invalid value used as weak map key");for(r=i[1],s=0,c=r.length;s<c;)if(a=r[s++],a[0]===t)return a[1]=n,this;return r.push([t,n]),this}throw new TypeError("Method WeakMap.prototype.set called on incompatible receiver "+this)}},has:{writable:!0,enumerable:!1,configurable:!0,value:function(t){if(e(this)!==this)throw new TypeError("Method WeakMap.prototype.has called on incompatible receiver "+this);for(var n,i,r=0,a=o.length;r<a;)if(n=o[r++],n[0]===this){if(e(t)!==t)return!1;for(i=n[1],r=0,a=i.length;r<a;)if(i[r++][0]===t)return!0;return!1}throw new TypeError("Method WeakMap.prototype.has called on incompatible receiver "+this)}},delete:{writable:!0,enumerable:!1,configurable:!0,value:function(t){if(e(this)!==this)throw new TypeError("Method WeakMap.prototype.delete called on incompatible receiver "+this);for(var n,i,r=0,a=o.length;r<a;)if(n=o[r++],n[0]===this){if(e(t)!==t)return!1;for(i=n[1],r=0,a=i.length;r<a;)if(i[r++][0]===t)return n[1]=i.slice(0,r-1).concat(i.slice(r)),!0;return!1}throw new TypeError("Method WeakMap.prototype.delete called on incompatible receiver "+this)}}}),n}(Object,Array.isArray);window.WeakMap=n}},function(e,t){"use strict";function n(e){var t=e.origin+e.pathname;return"/index.html"==t.substring(t.length-11)?t=t.substring(0,t.length-10):"/index.htm"==t.substring(t.length-10)&&(t=t.substring(0,t.length-9)),t}e.exports=n},function(e,t,n){(function(e,t){!function(e,n){"use strict";function o(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return g[p]=o,d(p),p++}function i(e){delete g[e]}function r(e){var t=e.callback,o=e.args;switch(o.length){case 0:t();break;case 1:t(o[0]);break;case 2:t(o[0],o[1]);break;case 3:t(o[0],o[1],o[2]);break;default:t.apply(n,o)}}function a(e){if(m)setTimeout(a,0,e);else{var t=g[e];if(t){m=!0;try{r(t)}finally{i(e),m=!1}}}}function s(){d=function(e){t.nextTick(function(){a(e)})}}function c(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function l(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),d=function(n){e.postMessage(t+n,"*")}}function u(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},d=function(t){e.port2.postMessage(t)}}function f(){var e=v.documentElement;d=function(t){var n=v.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function h(){d=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var d,p=1,g={},m=!1,v=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():c()?l():e.MessageChannel?u():v&&"onreadystatechange"in v.createElement("script")?f():h(),y.setImmediate=o,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(6))},function(e,t,n){(function(e){function o(e,t){this._id=e,this._clearFn=t}var i="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(22),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){n(this,e),this.hash=t.hash,this.host=t.host,this.hostname=t.hostname,this.href=t.href,this.origin=t.origin,this.pathname=t.pathname,this.port=t.port,this.protocol=t.protocol,this.search=t.search}return o(e,[{key:"isSameUrl",value:function(e){var t=e.origin+e.pathname,n=this.origin+this.pathname;return t==n}},{key:"toJSON",value:function(){return{hash:this.hash,host:this.host,hostname:this.hostname,href:this.href,origin:this.origin,pathname:this.pathname,port:this.port,protocol:this.protocol,search:this.search}}}]),e}();e.exports=i},,,function(e,t){"use strict";function n(e){var t=n.canvas||(n.canvas=document.createElement("canvas")),o=t.getContext("2d");return o.font=e,function(e){return o.measureText(e).width}}e.exports={textRuler:n}},,function(e,t){"use strict";function n(){return new Promise(function(e,t){chrome.tabs.query({currentWindow:!0,active:!0},function(n){n[0]?e(n[0]):t(null)})})}function o(e){return new Promise(function(t,n){chrome.tabs.query({url:e},function(e){e[0]?t(e[0]):n(null)})})}function i(e,t){chrome.tabs.update(e,{url:t})}e.exports={getCurrentTab:n,getTabByURL:o,updateTabUrl:i}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=function(){function e(){o(this,e)}return i(e,null,[{key:"normal",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;e.log(t,"",n)}},{key:"success",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;e.log(t,"green",n)}},{key:"warning",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;e.log(t,"orange",n)}},{key:"primary",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;e.log(t,"blue",n)}},{key:"error",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;e.log(t,"red",n)}},{key:"log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;window.BeenoteEventHub.emit(r.ActionPageNotification,[e,t,n])}}]),e}();e.exports=a},,,function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(24),a=n(21),s=function(){function e(t){o(this,e),t?(this.urlInfo=new r(t.urlInfo),this.title=t.title,this.description=t.description,this.keywords=t.keywords,this.favicon=t.favicon):(this.urlInfo=new r(window.location),this.title=document.title,this.description=this.getDescription(),this.keywords=this.getKeywords(),this.favicon="")}return i(e,[{key:"getDescription",value:function(){var e=document.getElementsByName("description");return e.length>0?e[0].content:""}},{key:"getKeywords",value:function(){var e=document.getElementsByName("keywords");return e.length>0?e[0].content:""}},{key:"getWebpageIndex",value:function(){return a(this.urlInfo)}},{key:"toJSON",value:function(){return{urlInfo:this.urlInfo.toJSON(),pageIndex:a(this.urlInfo),title:this.title,description:this.description,keywords:this.keywords,favicon:this.favicon}}}]),e}();e.exports=s},function(e,t,n){"use strict";var o=n(1),i=n(5).sendMessage,r=n(5).onMessage,a=n(5).createMessage,s=n(14),c=n(21),l=n(33);e.exports=function(){var e=window.BeenoteEventHub,t=!1;e.on(o.SaveNote,function(e,n){e.urlId=c(n);var o=a(s.SaveNote,e);if(o.id=e.noteId,!t){var r=new l;o.pageInfo=r.toJSON(),o.updatePage=!0,t=!0}i(o,function(e){e||console.error("Error occurred when saveNote")})}),e.on(o.DeleteNote,function(e){var t=a(s.RemoveNote,e);t.id=e.noteId,i(t,function(e){e||console.error("Error occurred when deleteNote")})}),e.on(o.FetchNoteList,function(n){t=!1;var r=a(s.FetchNoteList,c(n));i(r,function(t){t?e.emit(o.ReceiveNoteList,t):console.error("Error occurred when fetchNoteList")})}),e.on(o.CheckBlackList,function(t){var n=a(s.CheckBlackList,t);i(n,function(t){t?e.emit(o.DisablePage,{}):e.emit(o.EnablePage,{})})}),e.on(o.AddBlackList,function(e){var t=a(s.AddBlackList,e);i(t,function(){})}),e.on(o.RemoveBlackList,function(e){var t=a(s.RemoveBlackList,e);i(t,function(){})}),e.on(o.ShareNotePage,function(e){var t=a(s.LoadSharedNotes,e);i(t,function(){})}),r(function(t,n,i){switch(t.type){case s.EnablePage:t.content?e.emit(o.EnablePage,{}):e.emit(o.DisablePage,{})}return!0});var n={type:s.CheckBlackList,content:window.location.href};i(n,function(t){t&&e.emit(o.DisablePage,{})})}},,,,,,,,function(e,t,n){"use strict";function o(){}function i(){return"xiz368@qq.com"}function r(){}function a(){}function s(){}function c(){}var l=n(61),u=l({NotLogined:null,Syncing:null,SyncFailed:null,Synced:null}),f={NotLogined:"Click to Login",Syncing:"Syncing",SyncFailed:"Synced Failed, click to resync",Synced:"Synced"};e.exports={checkLocalLoginToken:o,saveLocalLoginToken:r,checkSyncStatus:a,SyncMessage:f,SyncStatus:u,checkSharingStatus:s,saveSharingStatus:c,getLoginReadableID:i}},function(e,t){"use strict";var n=(window.React,{Highlight:'\n    <svg class="highlight svg-icon" style="border-radius:50%;width:24px;height:24px;border-style:solid;fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421" viewBox="0 0 20 20">\n    <g transform="matrix(0.330192,0,0,0.330192,2.00217,1.39168)">\n        <path style="stroke-width:3.5px;stroke:none;" d="M30.688,2.5C30.388,2.5 30.2,2.612 30,2.813L24.156,8.625L24.125,8.594L19.813,12.906L39.469,32.563L42.25,29.781L42.313,29.813L49.688,22.406C49.888,22.206 50,21.988 50,21.688L30.688,2.5ZM18.594,14.5L12.594,27.906L7.5,33C7.1,33.4 7.1,34.006 7.5,34.406L18,44.906C18.2,45.106 18.488,45.188 18.688,45.188C18.888,45.188 19.206,45.106 19.406,44.906L24.5,39.813L37.906,33.813L18.594,14.5ZM6.688,36.406L0.313,42.813C0.113,43.112 0,43.513 0,43.813C0.1,44.112 0.294,44.4 0.594,44.5L11.906,48.906C12.006,48.906 12.113,49 12.313,49C12.613,49 12.8,48.888 13,48.688L16,45.688L6.688,36.406Z" style="fill-rule:nonzero" />\n    </g>\n</svg>',StickerBelongToHighlight:'\n    <svg class="sticker-highlight svg-icon" style="border-radius:50%;border-style:solid;width:24px;height:24px;fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:square;stroke-miterlimit:1.5" viewBox="0 0 20 20">\n    <g transform="matrix(0.0258199,0,0,0.0258199,-4.20612,-3.15811)">\n        <g transform="matrix(0.993637,0,0,1.00314,28.961,35.4273)">\n            <path d="M833.284,232.788L229.442,232.788L229.442,631.535L419.375,631.535L523.594,740.047L626.147,631.535L833.284,631.535L833.284,232.788Z" style="stroke-width:67.31px;fill:#eee" />\n        </g>\n        <g transform="matrix(1.10119,0,0,1.10119,-59.9331,-47.4941)">\n            <path d="M392.299,378.791L731.454,378.791" style="stroke-width:49.24px;fill:none;" />\n        </g>\n        <g transform="matrix(0.693575,0,0,0.693575,165.422,201.333)">\n            <path d="M392.299,378.791L731.454,378.791" style="stroke-width:78.18px; fill:none;" />\n        </g>\n    </g>\n</svg>',Sticker:'\n    <svg class="sticker svg-icon" viewBox="0 0 20 20" style="border-radius:50%;border-style:solid;width:25px;height:25px;fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;stroke:none">\n        <g transform="matrix(1.06158,0,0,1.07529,-0.739537,-0.786552)">\n            <g>\n                <g transform="matrix(0.703123,0,0,0.724935,3.4276,2.5478)">\n                    <rect x="1.515" y="1.709" width="16.983" height="11.675" style=""/>\n                </g>\n                <g transform="matrix(0.520119,0,0,0.284139,3.79936,12.0443)">\n                    <rect x="1.515" y="1.709" width="16.983" height="11.675" style=""/>\n                </g>\n            </g>\n            <g transform="matrix(0.569961,0,0,0.569961,3.61376,2.93586)">\n                <path d="M0,0L0,24L17,24L24,17L24,0L0,0ZM2,2L22,2L22,16L16,16L16,22L2,22L2,2ZM6,7L6,8L16,8L16,7L6,7ZM6,11L6,12L18,12L18,11L6,11Z" style="fill-rule:nonzero;"/>\n            </g>\n        </g>\n    </svg>'});e.exports=n},,,,,,,,,,,,,,,function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";document.oncopy=function(n){n.clipboardData.setData(t,e),n.preventDefault()},document.execCommand("copy",!1,null)}e.exports={copy:n}},,,function(e,t){"use strict";var n=function(e){var t,n={};if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=n},function(e,t){"use strict";function n(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}function o(e){return e.length>=6}e.exports={Email:n,Password:o}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=window.React,l=window.semanticUIReact,u=(l.Dimmer,l.Menu),f=l.Icon,h=(l.Segment,l.Popup),d=l.Modal,p=l.Header,g=l.Button,m=(l.Label,l.Message,l.Container),v=(l.Form,n(30)),y=(window.Constant.color,n(1));window.App={searchBarHeight:65,noteListHeight:340,noteModalContentHeight:170,searchBackground:"#fff",noteListBackground:"#E2E1E0",color:{white:"#fff"}};var b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={activeTab:n.props.route.tabname||"Home",notificationMessage:"",notificationIsOpen:!1,notificationColor:"",isLoginModalOpen:!1,loginService:"google"};var r=n;return window.BeenoteEventHub.on(y.ActionPageNotification,function(e){var t=a(e,3),n=t[0],o=t[1],i=t[2];r.setState({notificationIsOpen:!0,notificationMessage:n,notificationColor:o}),setTimeout(function(){r.setState({notificationIsOpen:!1,notificationMessage:"",notificationColor:""})},i)}),window.BeenoteEventHub.on(y.Login,function(){r.openLoginModal()}),n}return r(t,e),s(t,[{key:"handleTabClick",value:function(e,t){var n=t.name;n!=this.state.activeTab&&this.props.router.push(n.toLowerCase()),this.setState({activeTab:n})}},{key:"loginWith3rdParty",value:function(e){this.setState({isLoginModalOpen:!1,loginService:e}),window.BeenoteEventHub.emit(y.LoginSuccessfully),v.success("login "+e+" successfully!")}},{key:"openLoginModal",value:function(){this.setState({isLoginModalOpen:!0})}},{key:"render",value:function(){var e=this;return c.createElement("div",null,c.createElement("div",{key:"content"},this.props.children),c.createElement("div",{key:"tab",style:{boxShadow:"0px -1px 4px 0px rgba(0, 0, 0, 0.14)",backgroundColor:"white",width:"100%"}},c.createElement(u,{pointing:"pointing",secondary:"secondary",size:"mini",icon:"labeled",widths:2,color:"blue"},c.createElement(u.Item,{name:"Home",active:"Home"===this.state.activeTab,onClick:this.handleTabClick.bind(this)},c.createElement(f,{name:"home"}),"Home"),c.createElement(u.Item,{name:"Settings",active:"Settings"===this.state.activeTab,onClick:this.handleTabClick.bind(this)},c.createElement(f,{name:"setting"}),c.createElement(h,{trigger:c.createElement("span",null," Settings "),content:c.createElement("span",{style:{color:this.state.notificationColor}}," ",this.state.notificationMessage," "),position:"top right",verticalOffset:35,open:this.state.notificationIsOpen})))),c.createElement(d,{open:this.state.isLoginModalOpen,onClose:function(){return e.setState({isLoginModalOpen:!1})},centered:!1,basic:!0,size:"small"},c.createElement(p,{as:"h2"},c.createElement(f,{name:"sync"}),c.createElement(p.Content,null,"Sync Notes across Devices")),c.createElement(d.Content,null,"Login with",c.createElement("div",{style:{height:"10px"}}),c.createElement(m,{textAlign:"center"},c.createElement(g,{icon:!0,fluid:!0,labelPosition:"right",color:"red",onClick:function(){return e.loginWith3rdParty("google")}},"Google Profile",c.createElement(f,{name:"google"})),c.createElement("div",{style:{height:"10px"}}),c.createElement(g,{icon:!0,fluid:!0,labelPosition:"right",color:"blue",onClick:function(){return e.loginWith3rdParty("twitter")}},"Twitter",c.createElement(f,{name:"twitter"})),c.createElement("div",{style:{height:"10px"}}),c.createElement(g,{icon:!0,fluid:!0,labelPosition:"right",color:"green",onClick:function(){return e.loginWith3rdParty("wechat")}},"Wechat",c.createElement(f,{name:"wechat"}))))))}}]),t}(c.Component);e.exports=b},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=window.React,c=window.semanticUIReact,l=(c.Icon,c.Modal,c.Card,c.Container,c.List,c.Label,n(43)),u=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.style={listitem:{cursor:"pointer",paddingTop:15,paddingBottom:"2px",width:"95%",backgroundColor:"#fff",marginBottom:"2px",marginTop:4,paddingRight:"4px",paddingLeft:5},icon:{float:"left",width:"12%",marginLeft:"3%"},text:{WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",textOverflow:"ellipsis",width:"83%",height:"2.5em",wordWrap:"break-word",whiteSpace:"pre-wrap",lineHeight:"1.25em",fontSize:"13px",overflow:"hidden"},webpage:{label:{float:"right",marginTop:"5px",maxWidth:"70%",cursor:"pointer"},favicon:{width:"12px",height:"12px",marginRight:"4px",borderRadius:"50%"}}},n.state={refresh:Math.random()},n}return r(t,e),a(t,[{key:"refresh",value:function(){this.setState({refresh:Math.random()})}},{key:"mouseOver",value:function(){this.style.listitem.backgroundColor="#eee",this.refresh()}},{key:"mouseOut",value:function(){this.style.listitem.backgroundColor="#fff",this.refresh()}},{key:"mouseDown",value:function(){this.style.listitem.backgroundColor="#ddd",this.refresh()}},{key:"mouseUp",value:function(){this.style.listitem.backgroundColor="#eee",this.refresh()}},{key:"render",value:function(){return s.createElement("div",{style:this.style.listitem,className:"note-item",onClick:this.props.onClick},s.createElement("div",null,s.createElement("div",null,s.createElement("div",{className:this.props.colorName,style:this.style.icon,dangerouslySetInnerHTML:{__html:l[this.props.noteType]}}),s.createElement("div",{style:this.style.text},this.props.textContent||this.props.editorContent),this.props.showFavicon&&s.createElement("div",{style:{display:"flex",justifyContent:"flex-end",color:"#bbb",marginTop:"3px",fontSize:"x-small",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",width:"100%"}},s.createElement("span",{style:{direction:"rtl",maxWidth:"90%",overflow:"hidden"}}," ",this.props.webpage.title),s.createElement("img",{style:{borderRadius:"50%",width:"15px",height:"15px",marginLeft:"3px"},src:this.props.webpage.favicon})),!this.props.showFavicon&&s.createElement("div",{style:{paddingTop:6}}))))}}]),t}(s.Component);e.exports=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=window.React,l=window.semanticUIReact,u=l.Search,f=(l.Container,l.Input),h=l.Icon,d=(l.List,l.Modal),p=(l.Image,l.Divider),g=l.Dimmer,m=(l.Form,l.Button),v=l.Popup,y=(l.Header,l.Label),b=l.Message,w=n(43),E=(window.Constant.color,n(64)),x=n(68),k=(n(42),n(8)),L=(n(62),x.searchNotesWithWebPage),C=x.autoCompleteForWebPages,S=x.fetchLatestNotes,T=x.connectStickerAndHighlight,N=n(69).webPageRenderer,O=n(1),R=window.App,_=(n(30),n(7)),M=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n;return n.defaultNoteList=[],n.state={isNoteModalOpen:!1,isLoading:!1,autoCompletedWebPages:[],searchText:[],searchedNoteList:[],currentWebPage:null,currentNote:null,useDimmer:!1,isLogined:!0},n.scroll=null,n.style={webpage:{label:{marginTop:"5px",maxWidth:"90%",cursor:"pointer",marginLeft:"5%"},favicon:{width:"12px",height:"12px",marginRight:"4px",borderRadius:"50%"}},noteModal:{icon:{float:"left",width:"10%",marginTop:"2px",marginRight:"4%"},content:{maxHeight:R.noteModalContentHeight,overflowX:"hidden",overflowY:"scroll",whiteSpace:"pre-wrap"}}},n.loadRecent(Date.now()),n.checkLocalLoginToken(),window.BeenoteEventHub.on(O.LoginSuccessfully,function(){r.setState({isLogined:!0})}),n}return r(t,e),s(t,[{key:"checkLocalLoginToken",value:function(){this.setState({isLogined:!1})}},{key:"openLoginModal",value:function(){window.BeenoteEventHub.emit(O.Login)}},{key:"loadRecent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=this;S(e,t).then(function(e){n.defaultNoteList=n.defaultNoteList.concat(T(e)),setTimeout(function(){return n.setState({searchedNoteList:n.defaultNoteList})})}).catch(function(){console.error("FetchLatestNotes: ERROR"),setTimeout(function(){return n.setState({searchedNoteList:[]})})})}},{key:"handleWebPageSelect",value:function(e,t){var n=this;this.setState({currentWebPage:t,useDimmer:!1}),L(t).then(function(e){n.setState({searchedNoteList:T(e)})})}},{key:"onSearchChange",value:function(e,t){var n=this;if(!t)return this.defaultNoteList=[],n.setState({isLoading:!1,searchText:t,currentWebPage:null,useDimmer:!1,searchedNoteList:[]}),void this.loadRecent(Date.now());if(this.setState({isLoading:!0,searchText:t,useDimmer:!0}),_.Unicode(t)){if(t.length<2)return}else if(t.length<3)return;C(t).then(function(e){n.setState({autoCompletedWebPages:e,isLoading:!1})})}},{key:"openModal",value:function(e){e.webpage||(e.webpage=this.state.currentWebPage),this.setState({isNoteModalOpen:!0,currentNote:e})}},{key:"closeModal",value:function(){this.setState({isNoteModalOpen:!1,currentNote:null})}},{key:"deleteNote",value:function(e){var t=this.state.searchedNoteList,n=t.indexOf(e);t.splice(n,1),this.setState({isNoteModalOpen:!1,searchedNoteList:t,currentNote:null}),window.BeenoteEventHub.emit(O.DeleteNote,e),e.refHighlight&&window.BeenoteEventHub.emit(O.DeleteNote,e.refHighlight)}},{key:"componentDidMount",value:function(){this.noteScrollList.addEventListener("scroll",this.handleNoteListScroll.bind(this))}},{key:"componentWillUnmount",value:function(){this.noteScrollList.removeEventListener("scroll",this.handleNoteListScroll.bind(this))}},{key:"handleNoteListScroll",value:function(e){var t=e.target;if(!this.state.currentWebPage){var n=this.state.searchedNoteList;t.scrollTop===t.scrollHeight-t.offsetHeight&&this.loadRecent(n[n.length-1].updatedTime)}}},{key:"render",value:function(){var e,t=this,n=this,o=this.state.currentNote,i=this.state.currentWebPage;return o&&(e="Sticker"==o.noteType),c.createElement("div",null,c.createElement("div",{style:{paddingTop:"14px",display:"flex",justifyContent:"center",backgroundColor:R.searchBackground,boxSizing:"border-box",height:R.searchBarHeight}},c.createElement("div",{style:{width:"90%",float:"right",paddingTop:0}},c.createElement(u,{fluid:!0,input:c.createElement(f,{fluid:!0}),placeholder:"Search for annotated pages",loading:this.state.isLoading,onResultSelect:function(e,n){return t.handleWebPageSelect(e,n.result)},onSearchChange:function(e,n){return t.onSearchChange(e,n.value)},results:this.state.autoCompletedWebPages,resultRenderer:N,value:this.state.searchText}))),i&&c.createElement("div",{onClick:function(e){return window.open(i.pageIndex)},style:{display:"flex",width:"100%",backgroundColor:R.noteListBackground,paddingBottom:5,justifyContent:"flex-start"}},c.createElement(y,{color:"teal",style:this.style.webpage.label,size:"mini"},c.createElement("img",{style:this.style.webpage.favicon,src:i.favicon}),i.title)),c.createElement(g.Dimmable,{blurring:!0,dimmed:!1},c.createElement(g,{active:this.state.useDimmer}),!this.state.isLogined&&c.createElement(b,{negative:!0,style:{width:"110%",margin:"0 0 0 0",borderRadius:0,transform:"translateX(-5px)"},size:"mini"},"You are not logined! Please",c.createElement("a",{onClick:function(){return t.openLoginModal()},style:{cursor:"pointer"}}," login")," to sync your data."),c.createElement("div",{style:{marginTop:"0px",paddingTop:"5px",paddingBottom:"1px",height:R.noteListHeight,backgroundColor:R.noteListBackground,display:"flex",flexDirection:"column",alignItems:"center",overflowX:"hidden"},ref:function(e){t.noteScrollList=e}},c.createElement("div",{style:{overflowY:"scroll",height:"100%",marginLeft:"8%",width:"100%"}},this.state.searchedNoteList.map(function(e,o){return c.createElement(E,a({onClick:function(){return n.openModal(e)},key:o,showFavicon:!t.state.currentWebPage},e))})))),o&&c.createElement(d,{dimmer:"dimmer",open:this.state.isNoteModalOpen,onClose:function(){return t.closeModal()}},c.createElement(d.Header,null," ",c.createElement("div",{className:o.colorName,style:this.style.noteModal.icon,dangerouslySetInnerHTML:{__html:w[o.noteType]}})),c.createElement(d.Content,null,c.createElement(d.Description,null,o.textContent&&!e&&c.createElement("p",{style:k(this.style.noteModal.content,o.editorContent?{color:"#666",fontSize:"13px"}:{})}," ",o.textContent," "),o.editorContent&&c.createElement("div",null,o.textContent&&!e&&c.createElement(p,{horizontal:!0},"My Comments"),e&&c.createElement(p,{style:{marginTop:"-5px"},horizontal:!0},"Sticker Note "),c.createElement("p",{style:this.style.noteModal.content,className:"editorContent",dangerouslySetInnerHTML:{__html:o.editorContent}}))),c.createElement("div",{style:{marginTop:"-10px;",display:"flex",justifyContent:"flex-end",marginBottom:"-6px"}},c.createElement(v,{trigger:c.createElement("div",{style:{cursor:"pointer",width:28,height:28,borderRadius:"50%",border:"1.9px solid rgb(219, 219, 219)",display:"inline-flex",justifyContent:"center",alignItems:"center",marginRight:7}},c.createElement("img",{onClick:function(){return window.open(o.webpage.pageIndex)},style:{width:16,height:16},src:o.webpage.favicon})),content:"Open page in a new tab",on:"hover",position:"bottom right"}),c.createElement(v,{trigger:c.createElement("div",null,c.createElement(v,{trigger:c.createElement("div",{style:{cursor:"pointer"}},c.createElement(h,{circular:!0,name:"trash",color:"grey"})),content:c.createElement(m,{color:"red",size:"mini",onClick:function(){return t.deleteNote(o)},content:"Confirm the delete!"}),on:"click",position:"bottom right"})),content:"Delete this note",on:"hover",position:"bottom right"})))))}}]),t}(c.Component);e.exports=M},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=window.React,c=window.semanticUIReact,l=c.Checkbox,u=(c.Container,c.Header,c.Icon),f=c.Popup,h=c.Modal,d=(c.Input,c.Divider),p=(c.Label,c.Button),g=window.Constant.color,m=window.App,v=n(1),y=n(29).getCurrentTab,b=n(5).sendMessageToTab,w=n(5).createMessage,E=n(14),x=(window.Slider,n(42)),k=x.SyncStatus,L=(x.SyncMessage,
n(30)),C=n(58),S="15px",T=({NotLogined:g.red,Syncing:"",SyncFailed:g.red,Synced:g.green},function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n;return n.hub=window.BeenoteEventHub,n.state={enabled:!0,showHowToUse:!1,syncProgress:0,syncLabel:k.NotLogined,syncLabelClickable:!1,isShare:!1,loginReadableID:"xiz368@qq.com",hoverSignOut:!1,currentTabSharingUrl:"https://google.com"},n.sharableLinkRef=null,n.setSharableLinkRef=function(e){n.sharableLinkRef=e},y().then(function(e){r.hub.emit(v.CheckBlackList,e.url)}),r.hub.on(v.DisablePage,function(){r.setState({enabled:!1})},!0),setInterval(function(){},2e3),n}return r(t,e),a(t,[{key:"settingsEnable",value:function(e){var t=this;this.setState({enabled:e});var n=e?v.RemoveBlackList:v.AddBlackList;y().then(function(o){t.hub.emit(n,o.url);var i=w(E.EnablePage,e);b(o,i)})}},{key:"sendSyncCommand",value:function(){if(this.state.syncLabel==k.NotLogined){window.BeenoteEventHub.emit(v.Login);var e=this;window.BeenoteEventHub.on(v.LoginSuccessfully,function(){e.setState({syncLabel:k.Syncing,syncProgress:12})})}}},{key:"copySharableLink",value:function(){this.sharableLinkRef.select(),C.copy(this.state.currentTabSharingUrl)}},{key:"handleSignOutClick",value:function(){}},{key:"shareLink",value:function(){this.setState({isShare:!this.state.isShare}),L.error("share failed!")}},{key:"render",value:function(){var e=this;return s.createElement("div",{style:{height:m.searchBarHeight+m.noteListHeight,boxSizing:"border-box"}},s.createElement(d,{style:{marginTop:0,paddingTop:"1rem    "},horizontal:!0},"Settings"),s.createElement("div",{style:{textIndent:S}},s.createElement(l,{label:s.createElement("label",null,s.createElement("span",{style:{color:this.state.enabled?g.green:g.red}},this.state.enabled?"Enabled":"Disabled"),"  on this page"),slider:!0,checked:this.state.enabled,style:{backgroundColor:"white"},onClick:function(){return e.settingsEnable(!e.state.enabled)}})),this.state.syncLabel!=k.NotLogined&&s.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"90%",position:"absolute",bottom:"28%",cursor:"pointer",textDecoration:this.state.hoverSignOut?"underline":"initial"},onMouseOver:function(){return e.setState({hoverSignOut:!0})},onMouseOut:function(){return e.setState({hoverSignOut:!1})}},s.createElement(f,{trigger:s.createElement("span",null," ",this.state.loginReadableID,s.createElement(u,{color:"grey",style:{marginLeft:"5px",marginTop:"2px"},name:"sign out alternate"})),content:s.createElement(p,{color:"grey",onClick:function(){return e.handleSignOutClick()},content:"Sign Out"}),on:"hover",hoverable:!0,position:"top left"})),s.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"90%",position:"absolute",bottom:"22%",fontSize:"16px"}},s.createElement("span",null,"View ",s.createElement("a",{style:{cursor:"pointer"},onClick:function(){return e.setState({showHowToUse:!0})}},"HowToUse"))),s.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"90%",position:"absolute",bottom:"15%",fontSize:"12px"}},s.createElement(f,{trigger:s.createElement("div",{style:{cursor:"pointer"}},s.createElement(u,{circular:!0,name:"heart",color:"grey",onClick:function(){return window.open("https://chrome.google.com/webstore/detail/beanote-note-taking-on-we/nikccehomlnjkmgmhnieecolhgdafajb")}})),content:"Rate in Web Store",position:"top left",inverted:!0}),s.createElement(f,{trigger:s.createElement("div",{style:{cursor:"pointer"}},s.createElement(u,{circular:!0,name:"mail",color:"grey",onClick:function(){return window.open("mailto:vectorpku@gmail.com?Subject=About%20Beanote")}})),content:"Suggestions? Email Us",position:"top left",inverted:!0})),s.createElement(h,{dimmer:"blurring",open:this.state.showHowToUse,onClose:function(){return e.setState({showHowToUse:!1})},closeIcon:!0},s.createElement(h.Content,null,s.createElement(h.Description,null,s.createElement("div",null,s.createElement("h2",null,"Highlight"),s.createElement("img",{style:{maxWidth:"100%"},src:"images/highlight.gif"})),s.createElement("div",{style:{marginTop:"30px"}},s.createElement("h2",null,"Comment"),s.createElement("img",{style:{maxWidth:"100%"},src:"images/comment.gif"})),s.createElement("div",{style:{marginTop:"30px"}},s.createElement("h2",null,"Sticker Note"),s.createElement("img",{style:{maxWidth:"100%"},src:"images/sticker.gif"}))))))}}]),t}(s.Component));e.exports=T},function(e,t){"use strict";var n="\nimg {\n    user-select: none;\n}\n.editorContent img{\n    max-width: 80%;\n}\n.red {\n    stroke: #feb3c8;\n    fill: #FDC3D3;\n}\n.yellow {\n    stroke: #F9D06F;\n    fill: #F9D06F;\n}\n.blue {\n    stroke: #6CB1EF;\n    fill:  #6CB1EF;\n}\n.green {\n    stroke: #68c253;\n    fill: #68c253;\n}\n\n.svg-icon {\n    border-color: #E0E0E0;\n    background-color: rgba(247, 247, 247, 0.9);\n    border-width:1.5px;\n}\n.sticker{\n    fill:#9d8d49;\n}\n\n.sticker rect{\n    fill:#F9DB95;\n}\n.yellow .svg-icon {\n\n}\nbody, html{\n    height: auto;\n}\n\n.note-item{\n    background: #fff;\n    border-radius: 5px;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n    transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n}\n.note-item:hover {\n   box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n}\n.note-item:active {\n   background-color: #eee;\n}\n\n.result{\n    padding-bottom:5px !important;\n}\n.results{\n    z-index: 100000 !important;\n    overflow-y: scroll;\n    max-height: 360px;\n}";e.exports={style:n}},function(e,t,n){"use strict";function o(e){return new Promise(function(t,n){var o=s(l.FetchNoteList,e.pageIndex);c(o,function(e){e?t(e):n(e)})})}function i(e){return new Promise(function(t,n){var o=s(l.SearchWebPage,e);c(o,function(e){e?t(e):n(e)})})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=s(l.GetRecentNotes,{limit:t,timeBefore:e});return new Promise(function(e,t){c(n,function(n){if(n){var o=n.noteList,i=n.webPageList,r={};i.forEach(function(e){return r[e.pageIndex]=e}),o.forEach(function(e){e.webpage=r[e.urlId]||{pageIndex:e.urlId}}),e(o)}else t(n)})})}function a(e){for(var t={},n=[],o=[],i=0;i<e.length;i++){var r=e[i];switch(r.noteType){case u.Sticker:r.colorName="yellow",n.push(r);break;case u.StickerBelongToHighlight:o.push(r);break;case u.Highlight:t[r.noteId]=r}}o.forEach(function(e){e.refHighlight=t[e.refHighlightId],e.refHighlight&&(e.colorName=e.refHighlight.colorName,e.textContent=e.refHighlight.textContent,delete t[e.refHighlightId],n.push(e))});for(var a in t)n.push(t[a]);return n.sort(function(e,t){return t.updatedTime-e.updatedTime})}var s=n(5).createMessage,c=n(5).sendMessage,l=n(14),u={Highlight:"Highlight",Sticker:"Sticker",StickerBelongToHighlight:"StickerBelongToHighlight"};e.exports={searchNotesWithWebPage:o,autoCompleteForWebPages:i,fetchLatestNotes:r,connectStickerAndHighlight:a,noteType:u}},function(e,t){"use strict";function n(e){var t=e.title,n=e.pageIndex,i=e.favicon;return o.createElement("div",null,o.createElement("div",{style:{display:"flex"}},o.createElement("img",{style:{float:"left",width:"25px",height:"25px"},src:i}),o.createElement("div",{style:{marginLeft:"5px"}},o.createElement("div",null,t))),o.createElement("span",{style:{marginTop:3,fontSize:10,direction:"rtl",float:"right",color:"#aaa",overflow:"hidden",fontStyle:"italic"}},n.substr(0,50)))}var o=window.React,i=window.semanticUIReact;i.Search,i.Container,i.Input,i.Icon,i.List,i.Modal,i.Image,i.Divider,i.Button,i.Popup,i.Header,i.Label,e.exports={webPageRenderer:n}}]);