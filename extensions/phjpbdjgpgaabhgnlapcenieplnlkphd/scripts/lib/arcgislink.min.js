(function(){
function o(n,t,i){var r=t===""?0:n.indexOf(t),u=i===""?n.length:n.indexOf(i,r+t.length);return n.substring(r+t.length,u)}function it(n){return n&&typeof n=="string"}function h(n){return n&&n.splice}function yi(n){return typeof n=="number"}function i(n,t,i){if(n&&t)for(var r in n)!i&&r in t||(t[r]=n[r]);return t}function a(){n.event.trigger.apply(this,arguments)}function v(n,t){n&&t&&t.error&&n(t.error)}function ii(n,t){var i="";return n&&(i+=n.getTime()-n.getTimezoneOffset()*6e4),t&&(i+=", "+(t.getTime()-t.getTimezoneOffset()*6e4)),i}function rt(n,t){if(t=Math.min(Math.max(t,0),1),n){var i=n.style;typeof i.opacity!="undefined"&&(i.opacity=t);typeof i.filters!="undefined"&&(i.filters.alpha.opacity=Math.floor(100*t));typeof i.filter!="undefined"&&(i.filter="alpha(opacity:"+Math.floor(t*100)+")")}}function bt(n){var t="";for(var i in n)n.hasOwnProperty(i)&&(t.length>0&&(t+=";"),t+=i+":"+n[i]);return t}function pi(){if(typeof XMLHttpRequest=="undefined"){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(n){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(i){}throw new Error("This browser does not support XMLHttpRequest.");}else return new XMLHttpRequest}function at(t){var i=t;return(h(t)&&t.length>0&&(i=t[0]),i instanceof n.LatLng||i instanceof n.Marker)?h(t)&&t.length>1?s.MULTIPOINT:s.POINT:i instanceof n.Polyline?s.POLYLINE:i instanceof n.Polygon?s.POLYGON:i instanceof n.LatLngBounds?s.ENVELOPE:i.x!==undefined&&i.y!==undefined?s.POINT:i.points?s.MULTIPOINT:i.paths?s.POLYLINE:i.rings?s.POLYGON:null}function kt(t){var i=t;return(h(t)&&t.length>0&&(i=t[0]),h(i)&&i.length>0&&(i=i[0]),i instanceof n.LatLng||i instanceof n.Marker||i instanceof n.Polyline||i instanceof n.Polygon||i instanceof n.LatLngBounds)?!0:!1}function ht(n){return n?yi(n)?n:n.wkid?n.wkid:n.toJSON():null}function ri(n,t){for(var i=[],r,u=0,f=n.getLength();u<f;u++)r=n.getAt(u),i.push("["+r.lng()+","+r.lat()+"]");return t&&i.length>0&&i.push("["+n.getAt(0).lng()+","+n.getAt(0).lat()+"]"),i.join(",")}function ut(t){var c=at(t),i,e,r,u,f="{",o;switch(c){case s.POINT:i=h(t)?t[0]:t;i instanceof n.Marker&&(i=i.getPosition());f+="x:"+i.lng()+",y:"+i.lat();break;case s.MULTIPOINT:for(u=[],r=0;r<t.length;r++)i=t[r]instanceof n.Marker?t[r].getPosition():t[r],u.push("["+i.lng()+","+i.lat()+"]");f+="points: ["+u.join(",")+"]";break;case s.POLYLINE:for(u=[],e=h(t)?t:[t],r=0;r<e.length;r++)u.push("["+ri(e[r].getPath())+"]");f+="paths:["+u.join(",")+"]";break;case s.POLYGON:for(u=[],i=h(t)?t[0]:t,o=i.getPaths(),r=0;r<o.getLength();r++)u.push("["+ri(o.getAt(r),!0)+"]");f+="rings:["+u.join(",")+"]";break;case s.ENVELOPE:i=h(t)?t[0]:t;f+="xmin:"+i.getSouthWest().lng()+",ymin:"+i.getSouthWest().lat()+",xmax:"+i.getNorthEast().lng()+",ymax:"+i.getNorthEast().lat()}return f+=", spatialReference:{wkid:4326}",f+"}"}function wi(n){function i(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push("["+n[t][0]+","+n[t][1]+"]");return"["+i.join(",")+"]"}function r(n){for(var r=[],t=0,u=n.length;t<u;t++)r.push(i(n[t]));return"["+r.join(",")+"]"}var t="{";return n.x?t+="x:"+n.x+",y:"+n.y:n.xmin?t+="xmin:"+n.xmin+",ymin:"+n.ymin+",xmax:"+n.xmax+",ymax:"+n.ymax:n.points?t+="points:"+i(n.points):n.paths?t+="paths:"+r(n.paths):n.rings&&(t+="rings:"+r(n.rings)),t+"}"}function dt(t){var i=k[t.spatialReference.wkid||t.spatialReference.wkt],r,u;return i=i||tt,r=i.inverse([t.xmin,t.ymin]),u=i.inverse([t.xmax,t.ymax]),new n.LatLngBounds(new n.LatLng(r[1],r[0]),new n.LatLng(u[1],u[0]))}function ft(t,r){var f=null,u,o,v,s,y,h,e,l,c,a;if(r=r||{},t)if(f=[],t.x)u=new n.Marker(i(r.markerOptions||r,{position:new n.LatLng(t.y,t.x)})),f.push(u);else{if(h=t.points||t.paths||t.rings,!h)return f;for(a=[],o=0,v=h.length;o<v;o++)if(e=h[o],t.points)u=new n.Marker(i(r.markerOptions||r,{position:new n.LatLng(e[1],e[0])})),f.push(u);else{for(c=[],s=0,y=e.length;s<y;s++)l=e[s],c.push(new n.LatLng(l[1],l[0]));t.paths?(u=new n.Polyline(i(r.polylineOptions||r,{path:c})),f.push(u)):t.rings&&a.push(c)}t.rings&&(u=new n.Polygon(i(r.polygonOptions||r,{paths:a})),f.push(u))}return f}function ui(n,t){if(n)for(var r,i=0,u=n.length;i<u;i++)r=n[i],r.geometry&&(r.geometry=ft(r.geometry,t))}function gt(n){var t,i,u,r;if(typeof n=="object"){if(h(n)){for(t=[],i=0,u=n.length;i<u;i++)t.push(gt(n[i]));return"["+t.join(",")+"]"}if(kt(n))return ut(n);if(n.toJSON)return n.toJSON();t="";for(r in n)n.hasOwnProperty(r)&&(t.length>0&&(t+=", "),t+=r+":"+gt(n[r]));return"{"+t+"}"}return n.toString()}function fi(t){for(var i,f=[],r=0,u=t.length;r<u;r++)i=t[r],i instanceof n.Marker&&(i=i.getPosition()),f.push({geometry:{x:i.lng(),y:i.lat(),spatialReference:{wkid:4326}}});return{type:'"features"',features:f,doNotLocateOnRestrictedElements:!1}}function ei(n){var t={},r,u,f,i,e;if(!n)return null;if(r=[],n.geometries&&n.geometries.length>0)for(u=n.geometries[0],f=kt(u),i=0,e=n.geometries.length;i<e;i++)f?r.push(ut(n.geometries[i])):r.push(wi(n.geometries[i]));return n.geometryType||(n.geometryType=at(u)),f?t.inSR=tt.wkid:n.inSpatialReference&&(t.inSR=ht(n.inSpatialReference)),n.outSpatialReference&&(t.outSR=ht(n.outSpatialReference)),t.geometries='{geometryType:"'+n.geometryType+'", geometries:['+r.join(",")+"]}",t}function oi(n){var i="",t,r;if(n){n.f=n.f||"json";for(t in n)n.hasOwnProperty(t)&&n[t]!==null&&n[t]!==undefined&&(r=gt(n[t]),i+=(i.length>0?"&":"")+(t+"="+(escape?escape(r):encodeURIComponent(r))))}return i}function bi(n,t){for(var r=[],i=2,u=arguments.length;i<u;i++)r.push(arguments[i]);return function(){n.apply(t,r)}}function ni(t,i,r){i.hasLoaded()?t.push(i.copyrightText):n.event.addListenerOnce(i,"load",function(){et(r)})}function et(t){var r=null,e,s,o,u,h,c,a,i,f;if(t){if(e=t.controls[n.ControlPosition.BOTTOM_RIGHT],e)for(i=0,f=e.getLength();i<f;i++)if(e.getAt(i).id==="agsCopyrights"){r=e.getAt(i);break}if(r||(r=document.createElement("div"),r.style.fontFamily="Arial,sans-serif",r.style.fontSize="10px",r.style.textAlign="right",r.id="agsCopyrights",t.controls[n.ControlPosition.BOTTOM_RIGHT].push(r),n.event.addListener(t,"maptypeid_changed",function(){et(t)})),s=t.agsOverlays,o=[],s)for(i=0,f=s.getLength();i<f;i++)ni(o,s.getAt(i).mapService_,t);if(h=t.overlayMapTypes,h)for(i=0,f=h.getLength();i<f;i++)if(u=h.getAt(i),u instanceof l)for(c=0,a=u.tileLayers_.length;c<a;c++)ni(o,u.tileLayers_[c].mapService_,t);if(u=t.mapTypes.get(t.getMapTypeId()),u instanceof l){for(i=0,f=u.tileLayers_.length;i<f;i++)ni(o,u.tileLayers_[i].mapService_,t);r.style.color=u.negative?"#ffffff":"#000000"}r.innerHTML=o.join("<br/>")}}function u(n,t,i,r){var f="ags_jsonp_"+vi+++"_"+Math.floor(Math.random()*1e6),e=null,s,h,l,u;if(t=t||{},t[i||"callback"]="ags_jsonp."+f,s=oi(t),h=document.getElementsByTagName("head")[0],!h)throw new Error("document must have header tag");if(l=function(){window.ags_jsonp[f]&&delete window.ags_jsonp[f];e&&h.removeChild(e);e=null;r.apply(null,arguments);a(w,"jsonpend",f)},window.ags_jsonp[f]=l,(s+n).length<2e3&&!st.alwaysUseProxy)e=document.createElement("script"),e.src=n+(n.indexOf("?")===-1?"?":"&")+s,e.id=f,h.appendChild(e);else{var o=window.location,v=o.protocol+"//"+o.hostname+(!o.port||o.port===80?"":":"+o.port+"/"),c=!0;if(n.toLowerCase().indexOf(v.toLowerCase())!==-1&&(c=!1),st.alwaysUseProxy&&(c=!0),c&&!st.proxyUrl)throw new Error("No proxyUrl property in Config is defined");u=pi();u.onreadystatechange=function(){if(u.readyState===4)if(u.status===200)eval(u.responseText);else throw new Error("Error code "+u.status);};u.open("POST",c?st.proxyUrl+"?"+n:n,!0);u.setRequestHeader("Content-Type","application/x-www-form-urlencoded");u.send(s)}return a(w,"jsonpstart",f),f}function r(n){n=n||{};this.wkid=n.wkid;this.wkt=n.wkt}function vt(n){n=n||{};r.call(this,n)}function y(n){var i,u;n=n||{};r.call(this,n);var h=n.inverse_flattening,f=n.standard_parallel_1*t,e=n.standard_parallel_2*t,c=n.latitude_of_origin*t;this.a_=n.semi_major/n.unit;this.lamda0_=n.central_meridian*t;this.FE_=n.false_easting;this.FN_=n.false_northing;i=1/h;u=2*i-i*i;this.e_=Math.sqrt(u);var o=this.calc_m_(f,u),l=this.calc_m_(e,u),a=this.calc_t_(c,this.e_),s=this.calc_t_(f,this.e_),v=this.calc_t_(e,this.e_);this.n_=Math.log(o/l)/Math.log(s/v);this.F_=o/(this.n_*Math.pow(s,this.n_));this.rho0_=this.calc_rho_(this.a_,this.F_,a,this.n_)}function d(n){var u,f,i;n=n||{};r.call(this,n);this.a_=n.semi_major/n.unit;u=n.inverse_flattening;this.k0_=n.scale_factor;f=n.latitude_of_origin*t;this.lamda0_=n.central_meridian*t;this.FE_=n.false_easting;this.FN_=n.false_northing;i=1/u;this.es_=2*i-i*i;this.ep4_=this.es_*this.es_;this.ep6_=this.ep4_*this.es_;this.eas_=this.es_/(1-this.es_);this.M0_=this.calc_m_(f,this.a_,this.es_,this.ep4_,this.ep6_)}function g(n){n=n||{};r.call(this,n);this.a_=(n.semi_major||6378137)/(n.unit||1);this.lamda0_=(n.central_meridian||0)*t}function p(n){var i,u;n=n||{};r.call(this,n);var c=n.inverse_flattening,e=n.standard_parallel_1*t,o=n.standard_parallel_2*t,l=n.latitude_of_origin*t;this.a_=n.semi_major/n.unit;this.lamda0_=n.central_meridian*t;this.FE_=n.false_easting;this.FN_=n.false_northing;i=1/c;u=2*i-i*i;this.e_=Math.sqrt(u);var f=this.calc_m_(e,u),s=this.calc_m_(o,u),h=this.calc_q_(e,this.e_),a=this.calc_q_(o,this.e_),v=this.calc_q_(l,this.e_);this.n_=(f*f-s*s)/(a-h);this.C_=f*f+this.n_*h;this.rho0_=this.calc_rho_(this.a_,this.C_,this.n_,v)}function ki(n){this.url=n;var t=this;u(n,{},"",function(n){i(n,t);a(t,"load")})}function nt(n){this.url=n;this.definition=null}function f(n,t){var i,r;this.url=n;this.loaded_=!1;i=n.split("/");this.name=i[i.length-2].replace(/_/g," ");t=t||{};t.delayLoad?(r=this,window.setTimeout(function(){r.loadServiceInfo()},t.delayLoad*1e3)):this.loadServiceInfo()}function ct(n){this.url=n;this.loaded_=!1;var t=this;u(n,{},"",function(n){t.init_(n)})}function ti(n){this.url=n;this.t="geocodeservice"}function di(n){this.url=n;this.loaded_=!1;var t=this;u(n,{},"",function(n){i(n,t);t.loaded_=!0;a(t,"load")})}function ci(n){this.url=n;this.loaded_=!1;var t=this;u(n,{},"",function(n){i(n,t);t.loaded_=!0;a(t,"load")})}function li(n){this.url=n}function c(t){var r,i;if(this.lods_=t?t.lods:null,this.spatialReference_=t?k[t.spatialReference.wkid||t.spatialReference.wkt]:ot,!this.spatialReference_)throw new Error("unsupported Spatial Reference");if(this.resolution0_=t?t.lods[0].resolution:156543.033928,this.minZoom=Math.floor(Math.log(this.spatialReference_.getCircum()/this.resolution0_/256)/Math.LN2+.5),this.maxZoom=t?this.minZoom+this.lods_.length-1:20,n.Size&&(this.tileSize_=t?new n.Size(t.cols,t.rows):new n.Size(256,256)),this.scale_=Math.pow(2,this.minZoom)*this.resolution0_,this.originX_=t?t.origin.x:-20037508.342787,this.originY_=t?t.origin.y:20037508.342787,t)for(i=0;i<t.lods.length-1;i++)if(r=t.lods[i].resolution/t.lods[i+1].resolution,r>2.001||r<1.999)throw new Error("This type of map cache is not supported in V3. \nScale ratio between zoom levels must be 2");}function b(t,r){var e;if(r=r||{},r.opacity&&(this.opacity_=r.opacity,delete r.opacity),i(r,this),this.mapService_=t instanceof f?t:new f(t),r.hosts){var u=o(this.mapService_.url,"","://"),s=o(this.mapService_.url,"://","/"),h=o(this.mapService_.url,u+"://"+s,"");this.urlTemplate_=u+"://"+r.hosts+h;this.numOfHosts_=parseInt(o(r.hosts,"[","]"),10)}this.name=r.name||this.mapService_.name;this.maxZoom=r.maxZoom||19;this.minZoom=r.minZoom||0;this.dynaZoom=r.dynaZoom||this.maxZoom;this.mapService_.loaded_?this.init_(r):(e=this,n.event.addListenerOnce(this.mapService_,"load",function(){e.init_(r)}));this.tiles_={};this.map_=r.map}function l(t,r){var e,u,o;if(r=r||{},r.opacity&&(this.opacity_=r.opacity,delete r.opacity),i(r,this),u=t,it(t))u=[new b(t,r)];else if(t instanceof f)u=[new b(t,r)];else if(t instanceof b)u=[t];else if(t.length>0&&it(t[0]))for(u=[],e=0;e<t.length;e++)u[e]=new b(t[e],r);if(this.tileLayers_=u,this.tiles_={},r.maxZoom!==undefined)this.maxZoom=r.maxZoom;else{for(o=0,e=0;e<u.length;e++)o=Math.max(o,u[e].maxZoom);this.maxZoom=o}u[0].projection_?(this.tileSize=u[0].projection_.tileSize_,this.projection=u[0].projection_):this.tileSize=new n.Size(256,256);this.name||(this.name=u[0].name)}function e(n,t){t=t||{};this.mapService_=n instanceof f?n:new f(n);this.minZoom=t.minZoom;this.maxZoom=t.maxZoom;this.opacity_=t.opacity||1;this.exportOptions_=t.exportOptions||{};this.drawing_=!1;this.needsNewRefresh_=!1;this.overlay_=null;this.div_=null;t.map&&this.setMap(t.map);this.map_=null;this.listeners_=[]}function lt(n,t,i,r){this.bounds_=n;this.url_=t;this.map_=i;this.div_=null;this.op_=r;this.setMap(i)}function ai(n){this.map_=n;et(n)}var yt=yt||{},t=Math.PI/180,vi=0,s,si,hi;window.ags_jsonp=window.ags_jsonp||{};var n=google.maps,tt,pt,ot,wt,st={proxyUrl:null,alwaysUseProxy:!1},k={},w={};s={POINT:"esriGeometryPoint",MULTIPOINT:"esriGeometryMultipoint",POLYLINE:"esriGeometryPolyline",POLYGON:"esriGeometryPolygon",ENVELOPE:"esriGeometryEnvelope"};w.getJSON=function(n,t,i,r){u(n,t,i,r)};w.addToMap=function(n,t){var i,r,u;if(h(t))for(r=0,u=t.length;r<u;r++)i=t[r],h(i)?w.addToMap(n,i):kt(i)&&i.setMap(n)};w.removeFromMap=function(n,t){w.addToMap(null,n);t&&(n.length=0)};r.prototype.forward=function(n){return n};r.prototype.inverse=function(n){return n};r.prototype.getCircum=function(){return 360};r.prototype.toJSON=function(){return"{"+(this.wkid?" wkid:"+this.wkid:"wkt: '"+this.wkt+"'")+"}"};vt.prototype=new r;y.prototype=new r;y.prototype.calc_m_=function(n,t){var i=Math.sin(n);return Math.cos(n)/Math.sqrt(1-t*i*i)};y.prototype.calc_t_=function(n,t){var i=t*Math.sin(n);return Math.tan(Math.PI/4-n/2)/Math.pow((1-i)/(1+i),t/2)};y.prototype.calc_rho_=function(n,t,i,r){return n*t*Math.pow(i,r)};y.prototype.calc_phi_=function(n,t,i){var r=t*Math.sin(i);return Math.PI/2-2*Math.atan(n*Math.pow((1-r)/(1+r),t/2))};y.prototype.solve_phi_=function(n,t,i){for(var f=0,r=i,u=this.calc_phi_(n,t,r);Math.abs(u-r)>1e-9&&f<10;)f++,r=u,u=this.calc_phi_(n,t,r);return u};y.prototype.forward=function(n){var u=n[1]*t,f=n[0]*t,e=this.calc_t_(u,this.e_),i=this.calc_rho_(this.a_,this.F_,e,this.n_),r=this.n_*(f-this.lamda0_),o=this.FE_+i*Math.sin(r),s=this.FN_+this.rho0_-i*Math.cos(r);return[o,s]};y.prototype.inverse=function(n){var i=n[0]-this.FE_,r=n[1]-this.FN_,f=Math.atan(i/(this.rho0_-r)),e=(this.n_>0?1:-1)*Math.sqrt(i*i+(this.rho0_-r)*(this.rho0_-r)),u=Math.pow(e/(this.a_*this.F_),1/this.n_),o=Math.PI/2-2*Math.atan(u),s=this.solve_phi_(u,this.e_,o),h=f/this.n_+this.lamda0_;return[h/t,s/t]};y.prototype.getCircum=function(){return Math.PI*2*this.a_};d.prototype=new r;d.prototype.calc_m_=function(n,t,i,r,u){return t*((1-i/4-3*r/64-5*u/256)*n-(3*i/8+3*r/32+45*u/1024)*Math.sin(2*n)+(15*r/256+45*u/1024)*Math.sin(4*n)-35*u/3072*Math.sin(6*n))};d.prototype.forward=function(n){var u=n[1]*t,o=n[0]*t,e=this.a_/Math.sqrt(1-this.es_*Math.pow(Math.sin(u),2)),i=Math.pow(Math.tan(u),2),f=this.eas_*Math.pow(Math.cos(u),2),r=(o-this.lamda0_)*Math.cos(u),s=this.calc_m_(u,this.a_,this.es_,this.ep4_,this.ep6_),h=this.FE_+this.k0_*e*(r+(1-i+f)*Math.pow(r,3)/6+(5-18*i+i*i+72*f-58*this.eas_)*Math.pow(r,5)/120),c=this.FN_+this.k0_*(s-this.M0_)+e*Math.tan(u)*(r*r/2+(5-i+9*f+4*f*f)*Math.pow(r,4)/120+(61-58*i+i*i+600*f-330*this.eas_)*Math.pow(r,6)/720);return[h,c]};d.prototype.inverse=function(n){var h=n[0],c=n[1],u=(1-Math.sqrt(1-this.es_))/(1+Math.sqrt(1-this.es_)),l=this.M0_+(c-this.FN_)/this.k0_,o=l/(this.a_*(1-this.es_/4-3*this.ep4_/64-5*this.ep6_/256)),f=o+(3*u/2-27*Math.pow(u,3)/32)*Math.sin(2*o)+(21*u*u/16-55*Math.pow(u,4)/32)*Math.sin(4*o)+151*Math.pow(u,3)/6*Math.sin(6*o)+1097*Math.pow(u,4)/512*Math.sin(8*o),i=this.eas_*Math.pow(Math.cos(f),2),r=Math.pow(Math.tan(f),2),s=this.a_/Math.sqrt(1-this.es_*Math.pow(Math.sin(f),2)),a=this.a_*(1-this.es_)/Math.pow(1-this.es_*Math.pow(Math.sin(f),2),3/2),e=(h-this.FE_)/(s*this.k0_),v=f-s*Math.tan(f)/a*(e*e/2-(5+3*r+10*i-4*i*i-9*this.eas_)*Math.pow(e,4)/24+(61+90*r+28*i+45*r*r-252*this.eas_-3*i*i)*Math.pow(e,6)/720),y=this.lamda0_+(e-(1+2*r+i)*Math.pow(e,3)/6+(5-2*i+28*r-3*i*i+8*this.eas_+24*r*r)*Math.pow(e,5)/120)/Math.cos(f);return[y/t,v/t]};d.prototype.getCircum=function(){return Math.PI*2*this.a_};g.prototype=new r;g.prototype.forward=function(n){var i=n[1]*t,r=n[0]*t,u=this.a_*(r-this.lamda0_),f=this.a_/2*Math.log((1+Math.sin(i))/(1-Math.sin(i)));return[u,f]};g.prototype.inverse=function(n){var i=n[0],r=n[1],u=Math.PI/2-2*Math.atan(Math.exp(-r/this.a_)),f=i/this.a_+this.lamda0_;return[f/t,u/t]};g.prototype.getCircum=function(){return Math.PI*2*this.a_};p.prototype=new r;p.prototype.calc_m_=function(n,t){var i=Math.sin(n);return Math.cos(n)/Math.sqrt(1-t*i*i)};p.prototype.calc_q_=function(n,t){var i=t*Math.sin(n);return(1-t*t)*(Math.sin(n)/(1-i*i)-1/(2*t)*Math.log((1-i)/(1+i)))};p.prototype.calc_rho_=function(n,t,i,r){return n*Math.sqrt(t-i*r)/i};p.prototype.calc_phi_=function(n,t,i){var r=t*Math.sin(i);return i+(1-r*r)*(1-r*r)/(2*Math.cos(i))*(n/(1-t*t)-Math.sin(i)/(1-r*r)+Math.log((1-r)/(1+r))/(2*t))};p.prototype.solve_phi_=function(n,t,i){for(var f=0,r=i,u=this.calc_phi_(n,t,r);Math.abs(u-r)>1e-8&&f<10;)f++,r=u,u=this.calc_phi_(n,t,r);return u};p.prototype.forward=function(n){var u=n[1]*t,f=n[0]*t,e=this.calc_q_(u,this.e_),i=this.calc_rho_(this.a_,this.C_,this.n_,e),r=this.n_*(f-this.lamda0_),o=this.FE_+i*Math.sin(r),s=this.FN_+this.rho0_-i*Math.cos(r);return[o,s]};p.prototype.inverse=function(n){var i=n[0]-this.FE_,r=n[1]-this.FN_,f=Math.sqrt(i*i+(this.rho0_-r)*(this.rho0_-r)),u=this.n_>0?1:-1,o=Math.atan(u*i/(u*this.rho0_-u*r)),e=(this.C_-f*f*this.n_*this.n_/(this.a_*this.a_))/this.n_,s=Math.asin(e/2),h=this.solve_phi_(e,this.e_,s),c=o/this.n_+this.lamda0_;return[c/t,h/t]};p.prototype.getCircum=function(){return Math.PI*2*this.a_};p.prototype.getCircum=function(){return Math.PI*2*this.a_};tt=new vt({wkid:4326});pt=new vt({wkid:4269});ot=new g({wkid:102113,semi_major:6378137,central_meridian:0,unit:1});wt=new g({wkid:102100,semi_major:6378137,central_meridian:0,unit:1});k={"4326":tt,"4269":pt,"102113":ot,"102100":wt};r.WGS84=tt;r.NAD83=pt;r.WEB_MERCATOR=ot;r.WEB_MERCATOR_AUX=wt;w.registerSR=function(n,t){var f=k[""+n],u,i,e,s;if(f)return f;if(t instanceof r)k[""+n]=t,f=t;else{u=t||n;i={wkt:n};n===parseInt(n,10)&&(i={wkid:n});e=o(u,'PROJECTION["','"]');s=o(u,"SPHEROID[","]").split(",");e!==""&&(i.unit=parseFloat(o(o(u,"PROJECTION",""),"UNIT[","]").split(",")[1]),i.semi_major=parseFloat(s[1]),i.inverse_flattening=parseFloat(s[2]),i.latitude_of_origin=parseFloat(o(u,'"Latitude_Of_Origin",',"]")),i.central_meridian=parseFloat(o(u,'"Central_Meridian",',"]")),i.false_easting=parseFloat(o(u,'"False_Easting",',"]")),i.false_northing=parseFloat(o(u,'"False_Northing",',"]")));switch(e){case"":f=new r(i);break;case"Lambert_Conformal_Conic":i.standard_parallel_1=parseFloat(o(u,'"Standard_Parallel_1",',"]"));i.standard_parallel_2=parseFloat(o(u,'"Standard_Parallel_2",',"]"));f=new y(i);break;case"Transverse_Mercator":i.scale_factor=parseFloat(o(u,'"Scale_Factor",',"]"));f=new d(i);break;case"Albers":i.standard_parallel_1=parseFloat(o(u,'"Standard_Parallel_1",',"]"));i.standard_parallel_2=parseFloat(o(u,'"Standard_Parallel_2",',"]"));f=new p(i);break;default:f=new r(i)}f&&(k[""+n]=f)}return f};nt.prototype.load=function(){var n=this;this.loaded_||u(this.url,{},"",function(t){i(t,n);n.loaded_=!0;a(n,"load")})};nt.prototype.isInScale=function(n){return this.maxScale&&this.maxScale>n?!1:this.minScale&&this.minScale<n?!1:!0};si={INTERSECTS:"esriSpatialRelIntersects",CONTAINS:"esriSpatialRelContains",CROSSES:"esriSpatialRelCrosses",ENVELOPE_INTERSECTS:"esriSpatialRelEnvelopeIntersects",INDEX_INTERSECTS:"esriSpatialRelIndexIntersects",OVERLAPS:"esriSpatialRelOverlaps",TOUCHES:"esriSpatialRelTouches",WITHIN:"esriSpatialRelWithin"};nt.prototype.query=function(n,t,r){if(n){var f=i(n,{});n.geometry&&!it(n.geometry)&&(f.geometry=ut(n.geometry),f.geometryType=at(n.geometry),f.inSR=4326);n.spatialRelationship&&(f.spatialRel=n.spatialRelationship,delete f.spatialRelationship);n.outFields&&h(n.outFields)&&(f.outFields=n.outFields.join(","));n.objectIds&&(f.objectIds=n.objectIds.join(","));n.time&&(f.time=ii(n.time,n.endTime));f.outSR=4326;f.returnGeometry=n.returnGeometry===!1?!1:!0;f.returnIdsOnly=n.returnIdsOnly===!0?!0:!1;delete f.overlayOptions;u(this.url+"/query",f,"",function(i){ui(i.features,n.overlayOptions);t(i,i.error);v(r,i)})}};nt.prototype.queryRelatedRecords=function(n,t,r){if(n){var f=i(n,{});f.f=f.f||"json";f.outFields&&!it(f.outFields)&&(f.outFields=f.outFields.join(","));f.returnGeometry=f.returnGeometry===!1?!1:!0;u(this.url+"/query",f,"",function(n){v(r,n);t(n)})}};f.prototype.loadServiceInfo=function(){var n=this;u(this.url,{},"",function(t){n.init_(t)})};f.prototype.init_=function(n){var t=this;if(n.error)throw new Error(n.error.message);i(n,this);this.spatialReference=n.spatialReference.wkt?w.registerSR(n.spatialReference.wkt):k[n.spatialReference.wkid];n.tables!==undefined?u(this.url+"/layers",{},"",function(n){t.initLayers_(n);u(t.url+"/legend",{},"",function(n){t.initLegend_(n);t.setLoaded_()})}):(t.initLayers_(n),t.setLoaded_())};f.prototype.setLoaded_=function(){this.loaded_=!0;a(this,"load")};f.prototype.initLayers_=function(n){var e=[],h=[],t,r,u,f,o,c,s;for(this.layers=e,n.tables&&(this.tables=h),r=0,u=n.layers.length;r<u;r++)f=n.layers[r],t=new nt(this.url+"/"+f.id),i(f,t),t.visible=t.defaultVisibility,e.push(t);if(n.tables)for(r=0,u=n.tables.length;r<u;r++)f=n.tables[r],t=new nt(this.url+"/"+f.id),i(f,t),h.push(t);for(r=0,u=e.length;r<u;r++)if(t=e[r],t.subLayerIds)for(t.subLayers=[],o=0,c=t.subLayerIds.length;o<c;o++)s=this.getLayer(t.subLayerIds[o]),t.subLayers.push(s),s.parentLayer=t};f.prototype.initLegend_=function(n){var e=this.layers,u,t,f,r;if(n.layers)for(t=0,f=n.layers.length;t<f;t++)r=n.layers[t],u=e[r.layerId],i(r,u)};f.prototype.getLayer=function(n){var i=this.layers,t,r;if(i)for(t=0,r=i.length;t<r;t++)if(n===i[t].id||it(n)&&i[t].name.toLowerCase()===n.toLowerCase())return i[t];return null};f.prototype.getLayerDefs_=function(){var i={},n,r,t;if(this.layers)for(n=0,r=this.layers.length;n<r;n++)t=this.layers[n],t.definition&&(i[String(t.id)]=t.definition);return i};f.prototype.hasLoaded=function(){return this.loaded_};f.prototype.getVisibleLayerIds_=function(){var u=[],n,t,i,r,f;if(this.layers){for(t=0,i=this.layers.length;t<i;t++)if(n=this.layers[t],n.subLayers)for(r=0,f=n.subLayers.length;r<f;r++)if(n.subLayers[r].visible===!1){n.visible=!1;break}for(t=0,i=this.layers.length;t<i;t++)(n=this.layers[t],n.subLayers&&n.subLayers.length>0)||n.visible===!0&&u.push(n.id)}return u};f.prototype.getInitialBounds=function(){return this.initialExtent?(this.initBounds_=this.initBounds_||dt(this.initialExtent),this.initBounds_):null};f.prototype.getFullBounds=function(){return this.fullExtent?(this.fullBounds_=this.fullBounds_||dt(this.fullExtent),this.fullBounds_):null};f.prototype.exportMap=function(n,t,i){var r,s,f,c;if(n&&n.bounds){r={};r.f=n.f;var e=n.bounds,o=e.getSouthWest().lng(),h=e.getNorthEast().lng();if(o>h&&(o=o-180),r.bbox=""+o+","+e.getSouthWest().lat()+","+h+","+e.getNorthEast().lat(),r.size=""+n.width+","+n.height,r.dpi=n.dpi,n.imageSR&&(r.imageSR=n.imageSR.wkid?n.imageSR.wkid:"{wkt:"+n.imageSR.wkt+"}"),r.bboxSR="4326",r.format=n.format,s=n.layerDefinitions,s===undefined&&(s=this.getLayerDefs_()),r.layerDefs=bt(s),f=n.layerIds,c=n.layerOption||"show",f===undefined&&(f=this.getVisibleLayerIds_()),f.length>0)r.layers=c+":"+f.join(",");else if(this.loaded_&&t){t({href:null});return}if(r.transparent=n.transparent===!1?!1:!0,n.time&&(r.time=ii(n.time,n.endTime)),r.layerTimeOptions=n.layerTimeOptions,r.f==="image")return this.url+"/export?"+oi(r);u(this.url+"/export",r,"",function(n){n.extent?(n.bounds=dt(n.extent),delete n.extent,t(n)):v(i,n.error)})}};f.prototype.identify=function(n,t,i){if(n){var r={};r.geometry=ut(n.geometry);r.geometryType=at(n.geometry);r.mapExtent=ut(n.bounds);r.tolerance=n.tolerance||2;r.sr=4326;r.imageDisplay=""+n.width+","+n.height+","+(n.dpi||96);r.layers=n.layerOption||"all";n.layerIds&&(r.layers+=":"+n.layerIds.join(","));n.layerDefs&&(r.layerDefs=bt(n.layerDefs));r.maxAllowableOffset=n.maxAllowableOffset;r.returnGeometry=n.returnGeometry===!1?!1:!0;u(this.url+"/identify",r,"",function(r){var o=null,f,u,e;if(r.results)for(o=[],f=0;f<r.results.length;f++)u=r.results[f],e=ft(u.geometry,n.overlayOptions),u.feature={geometry:e,attributes:u.attributes},delete u.attributes;t(r);v(i,r)})}};f.prototype.find=function(n,t,r){if(n){var f=i(n,{});n.layerIds&&(f.layers=n.layerIds.join(","),delete f.layerIds);n.searchFields&&(f.searchFields=n.searchFields.join(","));f.contains=n.contains===!1?!1:!0;n.layerDefinitions&&(f.layerDefs=bt(n.layerDefinitions),delete f.layerDefinitions);f.sr=4326;f.returnGeometry=n.returnGeometry===!1?!1:!0;u(this.url+"/find",f,"",function(i){var o=null,f,u,e;if(i.results)for(o=[],f=0;f<i.results.length;f++)u=i.results[f],e=ft(u.geometry,n.overlayOptions),u.feature={geometry:e,attributes:u.attributes},delete u.attributes;t(i);v(r,i)})}};f.prototype.queryLayer=function(n,t,i,r){var u=this.getLayer(n);u&&u.query(t,i,r)};ct.prototype.init_=function(n){i(n,this);n.spatialReference&&(this.spatialReference=k[n.spatialReference.wkid||n.spatialReference.wkt]||tt);this.loaded_=!0;a(this,"load")};ct.prototype.findAddressCandidates=function(t,r,f){var e=i(t,{}),o;e.inputs&&(i(e.inputs,e),delete e.inputs);h(e.outFields)&&(e.outFields=e.outFields.join(","));o=this;u(this.url+"/findAddressCandidates",e,"",function(i){var s,u,h,c,e,l;if(i.candidates)for(h=[],c=0;c<i.candidates.length;c++)s=i.candidates[c],u=s.location,isNaN(u.x)||isNaN(u.y)||(e=[u.x,u.y],l=o.spatialReference,t.outSR&&(l=k[t.outSR]),l&&(e=l.inverse(e)),s.location=new n.LatLng(e[1],e[0]),h[h.length]=s);r({candidates:h});v(f,i)})};ct.prototype.geocode=function(n,t){this.findAddressCandidates(n,t)};ct.prototype.reverseGeocode=function(t,i,r){it(t.location)||(t.location=ut(t.location));t.outSR=4326;var f=this;u(this.url+"/reverseGeocode",t,"",function(t){var u,e;t.location&&(u=t.location,isNaN(u.x)||isNaN(u.y)||(e=[u.x,u.y],f.spatialReference&&(e=f.spatialReference.inverse(e)),t.location=new n.LatLng(e[1],e[0])));i(t);v(r,t)})};ti.prototype.project=function(n,t,i){var r=ei(n);u(this.url+"/project",r,"callback",function(r){var f=[],u,e;if(n.outSpatialReference===4326||n.outSpatialReference.wkid===4326){for(u=0,e=r.geometries.length;u<e;u++)f.push(ft(r.geometries[u]));r.geometries=f}t(r);v(i,r)})};hi={METER:9001,FOOT:9002,SURVEY_FOOT:9003,SURVEY_MILE:9035,KILLOMETER:9036,RADIAN:9101,DEGREE:9102};ti.prototype.buffer=function(n,t,i){var r=ei(n);n.bufferSpatialReference&&(r.bufferSR=ht(n.bufferSpatialReference));r.outSR=4326;r.distances=n.distances.join(",");n.unit&&(r.unit=n.unit);u(this.url+"/buffer",r,"callback",function(r){var f=[],u,e;if(r.geometries)for(u=0,e=r.geometries.length;u<e;u++)f.push(ft(r.geometries[u],n.overlayOptions));r.geometries=f;t(r);v(i,r)})};ci.prototype.execute=function(n,t,r){var f={};n.parameters&&i(n.parameters,f);f["env:outSR"]=n.outSpatialReference?ht(n.outSpatialReference):4326;n.processSpatialReference&&(f["env:processSR"]=ht(n.processSpatialReference));u(this.url+"/execute",f,"",function(i){var u,f,e,o,s;if(i.results)for(e=0;e<i.results.length;e++)if(u=i.results[e],u.dataType==="GPFeatureRecordSetLayer")for(o=0,s=u.value.features.length;o<s;o++)f=u.value.features[o],f.geometry&&(f.geometry=ft(f.geometry,n.overlayOptions));t(i);v(r,i)})};li.prototype.solve=function(n,t,r){if(n){var f=i(n,{});h(n.stops)&&(f.stops=fi(n.stops));h(n.barriers)&&(n.barriers.length>0?f.barriers=fi(n.barriers):delete f.barriers);f.returnRoutes=n.returnRoutes===!1?!1:!0;f.returnDirections=n.returnDirections===!0?!0:!1;f.returnBarriers=n.returnBarriers===!0?!0:!1;f.returnStops=n.returnStops===!0?!0:!1;u(this.url+"/solve",f,"",function(i){i.routes&&ui(i.routes.features,n.overlayOptions);t(i);v(r,i)})}};c.prototype.fromLatLngToPoint=function(t,i){if(!t||isNaN(t.lat())||isNaN(t.lng()))return null;var u=this.spatialReference_.forward([t.lng(),t.lat()]),r=i||new n.Point(0,0);return r.x=(u[0]-this.originX_)/this.scale_,r.y=(this.originY_-u[1])/this.scale_,r};c.prototype.fromLatLngToPoint=c.prototype.fromLatLngToPoint;c.prototype.fromPointToLatLng=function(t){if(t===null)return null;var r=t.x*this.scale_+this.originX_,u=this.originY_-t.y*this.scale_,i=this.spatialReference_.inverse([r,u]);return new n.LatLng(i[1],i[0])};c.prototype.getScale=function(n){var t=n-this.minZoom,i=0;return this.lods_[t]&&(i=this.lods_[t].scale),i};c.WEB_MECATOR=new c;b.prototype.init_=function(n){this.mapService_.tileInfo&&(this.projection_=new c(this.mapService_.tileInfo),this.minZoom=n.minZoom||this.projection_.minZoom,this.maxZoom=n.maxZoom||this.projection_.maxZoom)};b.prototype.getTileUrl=function(t,i){var h=i-(this.projection_?this.projection_.minZoom:this.minZoom),o="",s,r,u;if(!isNaN(t.x)&&!isNaN(t.y)&&h>=0&&t.x>=0&&t.y>=0){s=this.mapService_.url;this.urlTemplate_&&(s=this.urlTemplate_.replace("["+this.numOfHosts_+"]",""+(t.y+t.x)%this.numOfHosts_));r=this.projection_||(this.map_?this.map_.getProjection():c.WEB_MECATOR);!r instanceof c&&(r=c.WEB_MECATOR);var f=r.tileSize_,e=1<<i,v=new n.Point(t.x*f.width/e,(t.y+1)*f.height/e),y=new n.Point((t.x+1)*f.width/e,t.y*f.height/e),l=new n.LatLngBounds(r.fromPointToLatLng(v),r.fromPointToLatLng(y)),a=this.mapService_.getFullBounds();this.mapService_.singleFusedMapCache===!1||i>this.dynaZoom?(u={f:"image"},u.bounds=l,u.format="png32",u.width=f.width,u.height=f.height,u.imageSR=r.spatialReference_,o=this.mapService_.exportMap(u)):o=a&&!a.intersects(l)?"":s+"/tile/"+h+"/"+t.y+"/"+t.x}return o};b.prototype.setOpacity=function(n){var t,i;this.opacity_=n;t=this.tiles_;for(i in t)t.hasOwnProperty(i)&&rt(t[i],n)};b.prototype.getOpacity=function(){return this.opacity_};b.prototype.getMapService=function(){return this.mapService_};l.prototype.getTile=function(n,t,i){for(var u,e,r,f=i.createElement("div"),o="_"+n.x+"_"+n.y+"_"+t,s=0;s<this.tileLayers_.length;s++)u=this.tileLayers_[s],t<=u.maxZoom&&t>=u.minZoom&&(e=u.getTileUrl(n,t),e&&(r=i.createElement(document.all?"img":"div"),r.style.border="0px none",r.style.margin="0px",r.style.padding="0px",r.style.overflow="hidden",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.width=""+this.tileSize.width+"px",r.style.height=""+this.tileSize.height+"px",document.all?r.src=e:r.style.backgroundImage="url("+e+")",f.appendChild(r),u.tiles_[o]=r,u.opacity_!==undefined?rt(r,u.opacity_):this.opacity_!==undefined&&rt(r,this.opacity_)));return this.tiles_[o]=f,f.setAttribute("tid",o),f};l.prototype.getTile=l.prototype.getTile;l.prototype.releaseTile=function(n){var t,i,r;if(n.getAttribute("tid"))for(t=n.getAttribute("tid"),this.tiles_[t]&&delete this.tiles_[t],i=0;i<this.tileLayers_.length;i++)r=this.tileLayers_[i],r.tiles_[t]&&delete r.tiles_[t]};l.prototype.releaseTile=l.prototype.releaseTile;l.prototype.setOpacity=function(n){var t,r,u,i;this.opacity_=n;t=this.tiles_;for(r in t)if(t.hasOwnProperty(r))for(u=t[r].childNodes,i=0;i<u.length;i++)rt(u[i],n)};l.prototype.getOpacity=function(){return this.opacity_};l.prototype.getTileLayers=function(){return this.tileLayers_};e.prototype=new n.OverlayView;e.prototype.onAdd=function(){var i=this,t;this.listeners_.push(n.event.addListener(this.getMap(),"bounds_changed",bi(this.refresh,this)));this.listeners_.push(n.event.addListener(this.getMap(),"dragstart",function(){i.dragging=!0}));this.listeners_.push(n.event.addListener(this.getMap(),"dragend",function(){i.dragging=!1}));t=this.getMap();t.agsOverlays=t.agsOverlays||new n.MVCArray;t.agsOverlays.push(this);et(t);this.map_=t};e.prototype.onAdd=e.prototype.onAdd;e.prototype.onRemove=function(){for(var r,i,f,t=0,u=this.listeners_.length;t<u;t++)n.event.removeListener(this.listeners_[t]);if(this.overlay_&&this.overlay_.setMap(null),r=this.map_,i=r.agsOverlays,i)for(t=0,f=i.getLength();t<f;t++)if(i.getAt(t)==this){i.removeAt(t);break}et(r);this.map_=null};e.prototype.onRemove=e.prototype.onRemove;e.prototype.draw=function(){this.drawing_&&this.needsNewRefresh_!==!0||this.refresh()};e.prototype.draw=e.prototype.draw;e.prototype.getOpacity=function(){return this.opacity_};e.prototype.setOpacity=function(n){var t=Math.min(Math.max(n,0),1);this.opacity_=t;this.overlay_&&rt(this.overlay_.div_,t)};e.prototype.getMapService=function(){return this.mapService_};e.prototype.refresh=function(){var i,f,t,e,r,u,n;if(this.drawing_===!0){this.needsNewRefresh_=!0;return}(i=this.getMap(),f=i?i.getBounds():null,f)&&(t=this.exportOptions_,t.bounds=f,e=ot,r=i.getDiv(),t.width=r.offsetWidth,t.height=r.offsetHeight,r.offsetWidth!=0&&r.offsetHeight!=0)&&(u=i.getProjection(),u&&u instanceof c&&(e=u.spatialReference_),t.imageSR=e,a(this,"drawstart"),n=this,this.drawing_=!0,!this.dragging&&this.overlay_&&(this.overlay_.setMap(null),this.overlay_=null),this.mapService_.exportMap(t,function(t){if(n.drawing_=!1,n.needsNewRefresh_===!0){n.needsNewRefresh_=!1;n.refresh();return}t.href&&(n.overlay_&&(n.overlay_.setMap(null),n.overlay_=null),n.overlay_=new lt(t.bounds,t.href,n.map_,n.opacity_));a(n,"drawend")}))};e.prototype.isHidden=function(){return!(this.visible_&&this.isInZoomRange_())};e.prototype.isInZoomRange_=function(){var n=this.getMap().getZoom();return this.minZoom!==undefined&&n<this.minZoom||this.maxZoom!==undefined&&n>this.maxZoom?!1:!0};e.prototype.show=function(){this.visible_=!0;this.div_.style.visibility="visible";this.refresh()};e.prototype.hide=function(){this.visible_=!1;this.div_.style.visibility="hidden"};lt.prototype=new n.OverlayView;lt.prototype.onAdd=function(){var n=document.createElement("DIV"),t,i;n.style.border="none";n.style.borderWidth="0px";n.style.position="absolute";t=this.map_.getDiv();n.style.width=t.offsetWidth+"px";n.style.height=t.offsetHeight+"px";n.style.backgroundImage="url("+this.url_+")";this.div_=n;i=this.getPanes();rt(n,this.op_);i.overlayLayer.appendChild(n)};lt.prototype.draw=function(){var n=this.getProjection(),i=n.fromLatLngToDivPixel(this.bounds_.getSouthWest()),r=n.fromLatLngToDivPixel(this.bounds_.getNorthEast()),t=this.div_;t.style.left=i.x+"px";t.style.top=r.y+"px"};lt.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_);this.div_=null};ai.prototype.refresh=function(){et(this.map_)};yt.ags={SpatialReference:r,Geographic:vt,LambertConformalConic:y,SphereMercator:g,TransverseMercator:d,SpatialRelationship:si,GeometryType:s,SRUnit:hi,Catalog:ki,MapService:f,Layer:nt,GeocodeService:ct,GeometryService:ti,GPService:di,GPTask:ci,RouteTask:li,Util:w,Config:st,Projection:c,TileLayer:b,MapOverlay:e,MapType:l,CopyrightControl:ai};window.gmaps=yt})()