function ExtDraggableObject(n,t){function p(t){n.style.cursor=t?k:d}function y(t,r,e){var s,c;f=Math.round(t);u=Math.round(r);i.intervalX>1&&(s=Math.round(f%i.intervalX),f=s<ut?f-s:f+(i.intervalX-s));i.intervalY>1&&(c=Math.round(u%i.intervalY),u=c<ft?u-c:u+(i.intervalY-c));i.container&&i.container.offsetWidth&&(f=Math.max(0,Math.min(f,i.container.offsetWidth-n.offsetWidth)),u=Math.max(0,Math.min(u,i.container.offsetHeight-n.offsetHeight)));typeof o=="number"&&(f-o>i.toleranceX||o-(f+n.offsetWidth)>i.toleranceX||u-h>i.toleranceY||h-(u+n.offsetHeight)>i.toleranceY)&&(f=a,u=v);i.restrictX||e||(n.style.left=f+"px");i.restrictY||e||(n.style.top=u+"px")}function et(n){var t=n||event;o=b+((t.pageX||t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft)-c);h=w+((t.pageY||t.clientY+document.body.scrollTop+document.documentElement.scrollTop)-l);b=o;w=h;c=t.pageX||t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;l=t.pageY||t.clientY+document.body.scrollTop+document.documentElement.scrollTop;s&&(y(o,h,g),e.trigger(r,"drag",{mouseX:c,mouseY:l,startLeft:a,startTop:v,event:t}))}function ot(t){var i=t||event;if(p(!0),e.trigger(r,"mousedown",i),n.style.position!=="absolute"){n.style.position="absolute";return}c=i.pageX||i.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;l=i.pageY||i.clientY+document.body.scrollTop+document.documentElement.scrollTop;a=n.offsetLeft;v=n.offsetTop;b=a;w=v;nt=e.addDomListener(tt,"mousemove",et);n.setCapture&&n.setCapture();i.preventDefault?(i.preventDefault(),i.stopPropagation()):(i.cancelBubble=!0,i.returnValue=!1);s=!0;e.trigger(r,"dragstart",{mouseX:c,mouseY:l,startLeft:a,startTop:v,event:i})}function st(t){var i=t||event;s&&(p(!1),e.removeListener(nt),n.releaseCapture&&n.releaseCapture(),s=!1,e.trigger(r,"dragend",{mouseX:c,mouseY:l,startLeft:a,startTop:v,event:i}));o=h=null;e.trigger(r,"mouseup",i)}var r=this,e=window.GEvent||google.maps.Event||google.maps.event,i=t||{},k=i.draggingCursor||"default",d=i.draggableCursor||"default",s=!1,g,o,h,w,b,c,l,u,f,it,rt,nt,a,v,ut=Math.round(i.intervalX/2),ft=Math.round(i.intervalY/2),tt=n.setCapture?n:document;typeof i.intervalX!="number"&&(i.intervalX=1);typeof i.intervalY!="number"&&(i.intervalY=1);typeof i.toleranceX!="number"&&(i.toleranceX=Infinity);typeof i.toleranceY!="number"&&(i.toleranceY=Infinity);it=e.addDomListener(n,"mousedown",ot);rt=e.addDomListener(tt,"mouseup",st);p(!1);i.container;n.style.position="absolute";i.left=i.left||n.offsetLeft;i.top=i.top||n.offsetTop;i.interval=i.interval||1;y(i.left,i.top,!1);r.moveTo=function(n){y(n.x,n.y,!1)};r.moveBy=function(t){y(n.offsetLeft+t.width,n.offsetHeight+t.height,!1)};r.setDraggingCursor=function(n){k=n;p(s)};r.setDraggableCursor=function(n){d=n;p(s)};r.left=function(){return f};r.top=function(){return u};r.valueX=function(){var n=i.intervalX||1;return Math.round(f/n)};r.valueY=function(){var n=i.intervalY||1;return Math.round(u/n)};r.setValueX=function(n){y(n*i.intervalX,u,!1)};r.setValueY=function(n){y(f,n*i.intervalY,!1)};r.preventDefaultMovement=function(n){g=n}}