function extend(e,t,n){if(!t)return e;if(n)for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]=t[a]);else for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}var maybe=maybe||{analytics:{}};!function(e){"use strict";angular.module("maybe",["ui.router","angulartics","angulartics.google.analytics","LocalStorageModule","ngCookies","maybe.controllers","maybe.services","maybe.constants","maybe.components","maybe.directives","maybe.filters"]).config(["localStorageServiceProvider",function(e){e.setPrefix("maybe").setStorageType("localStorage").setStorageCookie(30,"/").setStorageCookieDomain(window.location)}]).config(["$urlRouterProvider","$stateProvider","$locationProvider",function(e,t,n){n.html5Mode(!0),e.otherwise("share"),t.state("base",{url:"/",template:"<div ui-view></div>",controller:"LoginCtrl as vm",data:{pageTitle:"",requireLogin:!0}}).state("share",{url:"/share",templateUrl:"/views/app/share.html",controller:"ShareCtrl as vm",data:{pageTitle:"Share"}})}]).run(["$window","$rootScope","$state","AuthService","NotifyService","CONSTANTS","ENV",function(t,n,a,r,o,s,i){function u(){$("#loadingOverlay").css("left",0)}function c(){$("#loadingOverlay").css("left","-200vw")}n.$state=a,o.subscribe(n,s.EVENTS.LOADING.START,u),o.subscribe(n,s.EVENTS.LOADING.DONE,c),n.$on("$stateChangeSuccess",function(e,t,n,a,r){o.notify(s.EVENTS.STATE.CHANGE)}),e&&(maybe.analytics.service=e.getService("maybe_chrome_extension"),maybe.analytics.tracker=maybe.analytics.service.getTracker(i.GA.PROPERTY_ID))}]),angular.module("maybe.controllers",[]),angular.module("maybe.services",[]),angular.module("maybe.constants",[]),angular.module("maybe.components",[]),angular.module("maybe.directives",[]),angular.module("maybe.filters",[])}(analytics),String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})};var maybeGlobals={};!function(e,t,n,a){function r(n,r,o,s,i,u,c){"use strict";function l(){U?u.notify(s.EVENTS.PARSE.READY):(e.initialize(i.PARSE.APP_ID,i.PARSE.JS_KEY),e.serverURL=i.PARSE.URL,e.Config.get().then(function(e){w=e.attributes,u.notify(s.EVENTS.PARSE.READY)}))}function d(){return w}function f(){return n(function(n,a){e.FacebookUtils.logIn(i.FACEBOOK.OPTIONS,{success:function(o){t.getLoginStatus(function(t){var o=(t.authResponse.userID,t.authResponse.accessToken);if(e.User.current().attributes&&e.User.current().attributes.authData&&e.User.current().attributes.authData.facebook&&e.User.current().attributes.authData.facebook.access_token&&e.User.current().attributes.authData.facebook.access_token===o)n(e.User.current().fetch());else try{e.FacebookUtils.unlink(e.User.current(),{}).then(function(){e.FacebookUtils.link(e.User.current(),null,{success:function(t){n(e.User.current().fetch())},error:function(e){a(e)}})})}catch(s){c.log(r,null,s),a(s)}},!0),console.log("exiting FB")},error:function(e,t){a(t)}})})}function m(){}function S(t){return o.eventTrack("Smartlink",{category:"User",label:s.ORIGIN}),e.Cloud.run("deeplink",{token:t,origin:s.ORIGIN}).then(function(t){return a.promptToSetPassword=t.promptToSetPassword,e.User.logIn(t.email,t.password)})}function E(t,n,a){return o.eventTrack("Login",{category:"User",label:s.ORIGIN}),a===!1?e.User.logIn(t,n):e.Cloud.run("login",{email:t,userPassword:n,origin:s.ORIGIN}).then(function(t){return e.User.logIn(t.email,t.password)})}function g(t){return e.Cloud.run("forgetPassword",{email:t})}function T(t){return e.Cloud.run("resetPassword",{token:t}).then(function(t){return e.User.logIn(t.email,t.password)})}function A(t,n,a){var r={email:t,newUserPassword:n};return a&&(r.oldUserPassword=a),e.Cloud.run("updatePassword",r).then(function(t){return e.User.logIn(t.email,t.password)})}function y(){return e.User.logOut()}function p(){return e.User.current()}function N(t){var n=e.User.current();return n.save(t).then(function(t){return e.User.current().fetch()})}function h(t,n,a,r,i){return a?o.eventTrack("Get Link",{category:"User",label:s.ORIGIN}):o.eventTrack("Register",{category:"User",label:s.ORIGIN}),e.Cloud.run("getLink",{name:t,email:n,overwrite:a,origin:s.ORIGIN,basketId:r?r.id:null,sendWelcome:i})}function b(t){var n=e.Object.extend(t.className),a=new e.Query(n);switch(angular.forEach(t.equalTo,function(e,t){a.equalTo(t,e)}),angular.forEach(t.notEqualTo,function(e,t){a.notEqualTo(t,e)}),angular.forEach(t.include,function(e){a.include(e)}),angular.forEach(t.lessThan,function(e,t){a.lessThan(t,e)}),angular.forEach(t.greaterThan,function(e,t){a.greaterThan(t,e)}),t.select&&a.select(t.select),t.ascending&&a.addAscending(t.ascending),t.descending&&a.addDescending(t.descending),t.limit&&a.limit(t.limit),t.skip&&a.skip(t.skip),t.type){case"query":return a.find();case"count":return a.count();case"first":return a.first();case"get":return a.get(t.equalTo.objectId);default:return a.find()}}function v(t){u.notify(s.EVENTS.LOADING.START,"");var n=new e.File(t.name.replace(/([^a-z0-9\.]+)/gi,"-"),t);return n.save().then(function(e){return u.notify(s.EVENTS.LOADING.DONE,""),e})}function I(t,n){return e.Cloud.run(t,n)}function O(t){return e.User.become(t)}function R(t){var n=new e.ACL;if(n.setPublicReadAccess(!0),t&&t.length>0){n.setPublicWriteAccess(!1);for(var a=0;a<t.length;a++)n.setWriteAccess(t[a],!0)}else n.setPublicWriteAccess(!0);return n}var U=!1,w={};return l(),{init:l,fbLogin:f,fbLogout:m,deeplink:S,login:E,logout:y,forgetPassword:g,resetPassword:T,setPassword:A,current:p,updateUser:N,query:b,getLink:h,upload:v,config:d,run:I,become:O,configACL:R}}angular.module("maybe.services").factory("ParseService",["$q","$state","$analytics","CONSTANTS","ENV","NotifyService","LogService",r])}(window.Parse,window.FB,window.jQuery,maybeGlobals),function(){function e(e){"use strict";function t(t,n,a){var r=e.$on(n,a);return t.$on("$destroy",r),r}function n(t,n){e.$emit(t,n)}return{subscribe:t,notify:n}}angular.module("maybe.services").factory("NotifyService",["$rootScope",e])}(),function(){function e(e,t){"use strict";function n(e,n,a){t.DEBUG&&console.log(e,n,a)}return{log:n}}angular.module("maybe.services").factory("LogService",["$rootScope","ENV",e])}(),function(e){function t(t,n,a,r,o,s,i,u){"use strict";function c(e){return s.log(n,null,e),e}function l(t){var n=[],a={type:"query",className:"Comment",equalTo:{item:t,softDeleted:null},include:["voter"]},r={type:"count",className:"Vote",equalTo:{item:t,vote:!0,softDeleted:null},include:["voter"]},o={type:"count",className:"Vote",equalTo:{item:t,vote:!1,softDeleted:null},include:["voter"]};return t?(n.push(i.query(a)),n.push(i.query(r)),n.push(i.query(o)),e.Promise.when(n).then(function(e){var n=e[0],a=e[1],r=e[2];return t.comments=n,t.yesCount=a,t.noCount=r,t})):(new e.Promise).reject(null)}function d(e){var n=null,a=null,r=null,o={type:"query",className:"Item",equalTo:{basket:e,softDeleted:null},select:["name","context","image","basket","location","price","retailer","symbol","title","url","shopper"],descending:["updatedAt"],include:["basket"]},s={type:"query",className:"Comment",equalTo:{basket:e,softDeleted:null},include:["voter"],descending:["createdAt"]},u={type:"query",className:"Vote",equalTo:{basket:e,softDeleted:null},include:["voter"],descending:["createdAt"]};return e?(n=i.query(o).then(function(t){return e.items=t,t}),a=i.query(s).then(function(t){return e.comments=t,t}),r=i.query(u).then(function(t){return e.votes=t,t}),t.all([n,a,r]).then(function(t){return n.then(function(t){return angular.forEach(t,function(t){var n,a,r,o=[];t.votes=[],n=e.comments.filter(function(e){return t.id===e.get("item").id&&(o.push(e),!0)}),a=e.votes.filter(function(e){return!(t.id!==e.get("item").id||!e.get("vote"))&&(t.votes.push(e),o.push(e),!0)}).length,r=e.votes.filter(function(e){return t.id===e.get("item").id&&!e.get("vote")&&(t.votes.push(e),o.push(e),!0)}).length,t.comments=n,t.yesCount=a,t.noCount=r,t.feed=o}),e})})):{}}function f(e,t,n){var a=i.current(),r={type:"query",className:"Basket",equalTo:{shopper:a},notEqualTo:{objectId:a&&a.attributes.suggestionBasket?a.attributes.suggestionBasket.id:null,softDeleted:!0},select:["name","context","privacy","lastCommentAddedAt","lastItemAddedAt"],limit:t?t:1e3,skip:n?n:0};return e?r.ascending=e:r.descending=["isWelcomeBasket","lastItemAddedAt","updatedAt"],0===n&&(h=[]),i.query(r).then(function(e){return t?h=h.concat(e):e})}function m(e,t){var n={type:"query",className:"Basket",notEqualTo:{privacy:r.BASKET.PRIVACY.SECRET,latestItem:null,softDeleted:!0},descending:["lastItemAddedAt"],select:["name","context","privacy","lastCommentAddedAt","lastItemAddedAt","shopper"],include:["shopper"],limit:e?e:1e3,skip:t?t:0};return 0===t&&(b=[]),i.query(n).then(function(e){return b=b.concat(e)})}function S(e,t){var n={type:"first",className:"Basket",equalTo:{objectId:e},notEqualTo:{softDeleted:!0},select:["name","context","privacy","lastCommentAddedAt","lastItemAddedAt","shopper"],include:["shopper"]};return t?i.query(n).then(d,c):i.query(n)}function E(t,n,a){var s=e.Object.extend("Basket"),u=new s,c=e.User.current();return o.notify(r.EVENTS.LOADING.START,""),u.setACL(i.configACL([c])),u.set("name",t),u.set("context",n),u.set("shopper",c),u.set("privacy",a),u.save()}function g(e,t){var n=i.current(),a={type:"first",className:"Vote",equalTo:{item:t,basket:t.get("basket"),voter:n?n:null}};return i.query(a)}function T(t,n){var s,c=e.Object.extend("Vote");return u.currentUser()?g(t,n).then(function(e){return e?(e.set("vote",t),e.save()):(s=new c,s.set("vote",t),s.set("basket",n.get("basket")),s.set("item",n),s.set("voter",i.current()),s.save())}).then(function(e){return n.fetch().then(l)}):(a.set("maybe."+r.COOKIES.AUTH_DEEPLINK,"basket.view:"+n.get("basket").id),o.notify(r.EVENTS.AUTH.MODAL.OPEN,{item:n,vote:t}),e.Promise.reject("not logged in"))}function A(t,n){var s,u=e.Object.extend("Comment");return i.current()?(s=new u,s.set("body",t),s.set("basket",n.get("basket")),s.set("item",n),s.set("voter",i.current()),s.save().then(function(e){return n.fetch().then(l)})):(a.set("maybe."+r.COOKIES.AUTH_DEEPLINK,"basket.view:"+n.get("basket").id),o.notify(r.EVENTS.AUTH.MODAL.OPEN,{item:n,comment:t}),e.Promise.reject("not logged in"))}function y(e,t,n){return t.save(e).then(function(e){return n.fetch().then(l)})}function p(e,t){return e.destroy().then(function(e){return t.fetch().then(l)})}function N(e){var t={editable:!1,trashable:!1},n=i.current();return n&&e.get("voter")&&(t.editable=e.get("body")&&e.get("voter").id===n.id,t.trashable=e.get("voter").id===n.id),t}var h=[],b=[];return{findMine:f,findPublic:m,get:S,create:E,findVote:g,vote:T,comment:A,editActivity:y,trashActivity:p,modifiable:N}}angular.module("maybe.services").factory("BasketService",["$q","$state","localStorageService","CONSTANTS","NotifyService","LogService","ParseService","AuthService",t])}(window.Parse),function(){function e(e,t,n,a,r,o,s,i,u,c,l){"use strict";function d(){return{id:null,username:null,fbId:"",fbUpdatedTime:"",firstname:"",middlename:"",lastname:"",email:"",profileImage:"",profileImageFile:null,hasPassword:!1,showWebIntro:null,suggestionBasket:null,block:null,blockedBy:[],blocking:[],createdInitialBasket:null,createdWelcomeBasket:null,createdAt:null,token:"",type:"",sessionToken:""}}function f(t){return u.notify(s.EVENTS.LOADING.DONE,""),e(function(e,a){var r=new Date,i=new Date(r.setMonth(r.getMonth()+1)),c=d();c.id=t.id,U=extend(c,t.attributes,!0),U.hasPassword=t.get("userPassword").length>0,U.sessionToken=t.getSessionToken(),o.set("maybe.user",U),n.put(s.COOKIES.MAYBE,c.id,{domain:"maybe.xyz",expires:i}),u.notify(s.EVENTS.AUTH.CHANGE,U),e({status:s.STATUSES.SUCCESS,data:U})})}function m(t){return u.notify(s.EVENTS.LOADING.DONE,""),e(function(e,n){var a=t.message?t.message:s.MESSAGES.ERROR_CONNECTION;n({status:s.STATUSES.ERROR_CONNECTION,message:a})})}function S(t){return u.notify(s.EVENTS.LOADING.DONE,""),e(function(e,n){e(t)})}function E(t){return u.notify(s.EVENTS.LOADING.DONE,""),e(function(e,n){n(t)})}function g(e){return u.notify(s.EVENTS.LOADING.START,""),l.deeplink(e).then(f,m)}function T(){return u.notify(s.EVENTS.LOADING.START,""),l.fbLogin().then(f,m)}function A(e,t,n,a){return u.notify(s.EVENTS.LOADING.START,""),l.getLink(e,t,n,a).then(S,E)}function y(e){return u.notify(s.EVENTS.LOADING.START,""),l.forgetPassword(e).then(S,E)}function p(e,t){return u.notify(s.EVENTS.LOADING.START,""),l.login(e,t).then(f,E)}function N(e){return u.notify(s.EVENTS.LOADING.START,""),l.resetPassword(e).then(f,m)}function h(e,t,n){return u.notify(s.EVENTS.LOADING.START,""),l.setPassword(e,t,n).then(f,m)}function b(){return o.clearAll(),U=extend(d(),o.get("maybe.user"),!0),n.remove(s.COOKIES.MAYBE,{domain:"maybe.xyz"}),u.notify(s.EVENTS.AUTH.CHANGE,!1),window.Intercom("shutdown"),l.logout()}function v(e){return u.notify(s.EVENTS.LOADING.START,""),l.updateUser(e).then(f,m)}function I(){return!(!U||!U.username)&&U}function O(){var e=new Parse.Promise;return I()?l.query({type:"first",className:"_User",equalTo:{objectId:U.id}}).then(function(e){return!e.get("block")||(b(),!1)},function(e){return!1}):(e.reject(!1),e)}function R(e){return l.run("getTwitterLink",{url:e})}var U;return U=extend(d(),o.get("user"),!0),{fbLogin:T,sendLink:A,deeplink:g,login:p,logout:b,forgetPassword:y,resetPassword:N,setPassword:h,currentUser:I,updateUser:v,validateUser:O,getTwitterLink:R}}angular.module("maybe.services").factory("AuthService",["$q","$http","$cookies","$rootScope","$state","localStorageService","CONSTANTS","ENV","NotifyService","LogService","ParseService",e])}(),function(){function e(){return{require:"?ngModel",link:function(e,t,n,a){var r=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+\.[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+$/i;a&&a.$validators.email&&(a.$validators.email=function(e){return a.$isEmpty(e)||r.test(e)})}}}angular.module("maybe.directives").directive("emailValidator",[e])}(),function(e,t){function n(e,n,a,r,o,s,i,u,c){"use strict";function l(){try{chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(e){y.data.shareData.url=e[0].url})}catch(t){console.log(t)}y.data.user?(y.data.state="share",f()):(y.data.state="sign-in",y.data.deregisters.push(s.subscribe(e,r.EVENTS.AUTH.SIGNUP.SUCCESS,E)),y.data.deregisters.push(s.subscribe(e,r.EVENTS.AUTH.SIGNIN.SUCCESS,g)),y.data.deregisters.push(s.subscribe(e,r.EVENTS.AUTH.SIGNIN.EMAIL_SENT,T)),y.data.deregisters.push(s.subscribe(e,r.EVENTS.AUTH.PASSWORD.RESET.EMAIL_SENT,A)),y.data.deregisters.push(s.subscribe(e,r.EVENTS.AUTH.PASSWORD.SET.SUCCESS,g)))}function d(){y.data.user=i.currentUser(),y.data.user.sessionToken&&!u.current()?u.become(y.data.user.sessionToken).then(l):l()}function f(){y.data.user=i.currentUser(),c.findMine(["name"]).then(function(t){t.length>0&&e.$apply(function(){y.data.baskets=t})},function(e){console.log(e)})}function m(n){var a,s=new t.Promise,i=n.basket;return"new"===i||0===y.data.baskets.length?(maybe.analytics.tracker.sendEvent("Browser","add-item-collection",r.ORIGIN),s=c.create(n.basketName,n.basketContext,n.basketPrivacy).then(function(e){return e.toJSON()})):(maybe.analytics.tracker.sendEvent("Browser","add-item",r.ORIGIN),a=JSON.parse(i),s=t.Promise.resolve(a)),t.Promise.when(s).then(function(a){return n.basket=a,n.basketUrl=o.APP.URL+"/c/"+a.objectId,S("processing"),e.$apply(),t.Cloud.run("diffbot",{endpoint:"product",url:n.url,context:n.context,shopperId:y.data.user.id,basketId:a.objectId,origin:r.ORIGIN})}).then(function(){S("done")},function(){S("error")}).always(function(){e.$apply()})}function S(e){return y.data.state=e,!1}function E(e,t){y.data.email=t.email,S("password-set")}function g(e,t){s.notify(r.EVENTS.AUTH.CHANGE,t),f(),S("share")}function T(e,t){S("email-sent")}function A(e,t){S("password-reset-sent")}var y=this;y.data={state:"",user:{},email:"",baskets:[],shareData:{basket:null,url:n.search().url?n.url().split("url=")[1]:""},deregisters:[]},y.data.shareData.url=decodeURIComponent(y.data.shareData.url),y.setState=S,y.addToBasket=m;try{d()}catch(p){p.message.indexOf(r.MESSAGES.ERROR_PARSE_INITIALIZE)>-1&&s.subscribe(e,r.EVENTS.PARSE.READY,d)}}angular.module("maybe.controllers").controller("ShareCtrl",["$scope","$location","$analytics","CONSTANTS","ENV","NotifyService","AuthService","ParseService","BasketService",n])}(window.jQuery,Parse),function(){angular.module("maybe.constants").constant("ENV",{FACEBOOK:{APP_ID:"1553739704876275",OPTIONS:"public_profile,email",OAUTH_URL:"https://www.facebook.com/dialog/oauth?client_id=1553739704876275&redirect_uri=https%3A%2F%2Fapp.maybe.xyz%2Fapp%2Ffacebook&scope=email"},PARSE:{APP_ID:"7599b1faab8e0e7ed9ac94184c6365856241623e",JS_KEY:"688e6fa978fd581e31658181aa90cb4338b920b6",REST_KEY:"76c9dd0a447f80d407c0291585701bfa1ead36f9",URL:"https://parse.maybe.xyz/1"},APP:{URL:"https://app.maybe.xyz"},GA:{PROPERTY_ID:"UA-63307495-1"},AWS:{CLOUDFRONT:"https://d3p1p682vy8lrp.cloudfront.net"},HOKO:{ID:"e71fb3d771490af0"},TEMPORARY_USER_TIMEOUT:864e5,DEBUG:!1})}(),function(){angular.module("maybe.constants").factory("CONSTANTS",[function(){"use strict";return{API_ROOT:"/api/v1",ENDPOINTS:{BASKET:{GET:"/basket/[id]"}},ACTIONS:{AUTH:{SIGNIN:"auth.signin",LOGIN:"auth.login",LOGOUT:"auth.logout"}},BASKET:{PRIVACY:{PUBLIC:"Public",SECRET:"Secret"},LIMIT:10,PHOTO_LIMIT:4},ITEM:{TELL_ME_MORE:{YES:"Tell me more...",NO:"Why not?"}},STATUSES:{SUCCESS:0,ERROR_ACCOUNT_EXIST:202,ERROR_LOGIN:400,ERROR_ACCESS:403,ERROR_SEND:503},MESSAGES:{ERROR_CONNECTION:"Unable to connect, please try again later.",ERROR_PRIVATE:"Please log in without private/incognito mode enabled.",ERROR_PARSE_INITIALIZE:"Parse.initialize"},COOKIES:{POLICY_DISMISSED:"cookies.policy.dismissed",INTRO:"cookies.intro",AUTH_DEEPLINK:"cookies.auth.deeplink",ONBOARD:"cookies.onboard",SHARED:"cookies.shared",MAYBE:"maybe_user_id"},ORIGIN:"Chrome",EVENTS:{STATE:{CHANGE:"state.change"},COOKIES:{CHANGE:"cookies.change"},PARSE:{READY:"parse.ready"},LOADING:{START:"loading.start",DONE:"loading.done"},IMAGE:{DONE:"image.done",ERROR:"image.error"},AUTH:{CHANGE:"auth.change",MODAL:{OPEN:"auth.modal.open",CLOSE:"auth.modal.close"},SIGNUP:{SUCCESS:"auth.signup.success",FAIL:"auth.signup.fail"},SIGNIN:{EMAIL_SENT:"auth.signup.email.sent",SUCCESS:"auth.signin.success",FAIL:"auth.signin.fail"},PASSWORD:{SET:{SUCCESS:"auth.password.set.success",FAIL:"auth.password.set.fail"},RESET:{EMAIL_SENT:"auth.password.reset.email.sent",EMAIL_FAIL:"auth.password.reset.email.fail",SUCCESS:"auth.password.reset.success",FAIL:"auth.password.reset.fail"}}},SHARE:{OPEN:"share.open"},PARTIAL_LOADING:{START:"partial_loading.start",DONE:"partial_loading.done"},VOTE:{VOTE:"vote.vote",VOTED:"vote.voted",DONE:"vote.done"},COMMENT:{COMMENT:"comment.comment"},ACTIVITY:{EDIT:"activity.edit",TRASH:"activity.trash",DONE:"activity.done"},LAYOUT:{REFRESH:"layout.refresh"}}}}])}(),function(e){function t(e,t,n,a,r,o,s){"use strict";function i(e){l.data.message=e.message,s.notify(a.EVENTS.AUTH.SIGNUP.FAIL,l.data.message)}function u(e){s.notify(a.EVENTS.AUTH.SIGNUP.SUCCESS,{email:l.data.formData.email})}function c(e,t){l.data.attempt++,o.sendLink(e,t,!1).then(u,i)}var l=this;l.data={formData:{name:null,email:null},attempt:0,message:null,state:t,authURL:null,facebookURL:r.FACEBOOK.OAUTH_URL},l.sendLink=c,o.getTwitterLink("signup").then(function(t){l.data.authURL=t.authURL,e.$apply()})}angular.module("maybe.components").component("signUp",{templateUrl:"/views/components/signUp.html",controller:["$scope","$state","localStorageService","CONSTANTS","ENV","AuthService","NotifyService",t]})}(window.jQuery),function(e){function t(e,t,n,a,r,o,s){"use strict";function i(e){f.data.message=e.message,s.notify(a.EVENTS.AUTH.SIGNIN.FAIL,f.data.message)}function u(e){s.notify(a.EVENTS.AUTH.SIGNIN.SUCCESS,e),s.notify(a.EVENTS.LAYOUT.REFRESH)}function c(e){s.notify(a.EVENTS.AUTH.SIGNIN.EMAIL_SENT,e)}function l(e,t){f.data.message=t}function d(e,t){t?o.login(e,t).then(u,i):o.sendLink(null,e,!0).then(c,i)}var f=this;f.data={formData:{email:null,password:null},attempt:0,message:null,state:t,authURL:null,facebookURL:r.FACEBOOK.OAUTH_URL},f.signIn=d,s.subscribe(e,a.EVENTS.AUTH.SIGNIN.FAIL,l),o.getTwitterLink("signup").then(function(t){f.data.authURL=t.authURL,e.$apply()})}angular.module("maybe.components").component("signIn",{templateUrl:"/views/components/signIn.html",controller:["$scope","$state","localStorageService","CONSTANTS","ENV","AuthService","NotifyService",t]})}(window.jQuery),function(e){function t(e,t,n,a,r,o,s){"use strict";function i(e){l.data.message="Password has already been set, please log in.",s.notify(r.EVENTS.AUTH.PASSWORD.SET.FAIL,l.data.message)}function u(e){s.notify(r.EVENTS.AUTH.PASSWORD.SET.SUCCESS,e)}function c(e,t){l.data.attempt++,o.setPassword(e,t).then(u,i)}var l=this;l.data={formData:{email:n.email?n.email:l.email,password:null},attempt:0,message:null,state:t},l.setPassword=c}angular.module("maybe.components").component("passwordSet",{bindings:{email:"="},templateUrl:"/views/components/passwordSet.html",controller:["$scope","$state","$stateParams","localStorageService","CONSTANTS","AuthService","NotifyService",t]})}(window.jQuery),function(e){function t(e,t,n,a,r,o){"use strict";function s(e){c.data.message=e.message,o.notify(a.EVENTS.AUTH.PASSWORD.RESET.FAIL,c.data.message)}function i(e){o.notify(a.EVENTS.AUTH.PASSWORD.RESET.SUCCESS,e)}function u(e){r.setPassword(r.currentUser().email,e).then(i,s)}var c=this;c.data={formData:{password:null},attempt:0,message:null,state:t},c.resetPassword=u}angular.module("maybe.components").component("passwordReset",{templateUrl:"/views/components/passwordReset.html",controller:["$scope","$state","localStorageService","CONSTANTS","AuthService","NotifyService",t]})}(window.jQuery),function(e){function t(e,t,n,a,r,o){"use strict";function s(e){c.data.message=e.message,o.notify(a.EVENTS.AUTH.PASSWORD.RESET.EMAIL_FAIL,c.data.message)}function i(e){o.notify(a.EVENTS.AUTH.PASSWORD.RESET.EMAIL_SENT,e)}function u(e){r.forgetPassword(e).then(i,s)}var c=this;c.data={formData:{email:null},attempt:0,message:null,state:t},c.forgetPassword=u}angular.module("maybe.components").component("passwordForget",{templateUrl:"/views/components/passwordForget.html",controller:["$scope","$state","localStorageService","CONSTANTS","AuthService","NotifyService",t]})}(window.jQuery),function(e){"use strict";function t(){e.storage.local.get("maybe.user",function(e){e["maybe.user"]&&localStorage.setItem("maybe.user",e["maybe.user"])}),e.storage.local.get("maybe.clean",function(t){t["maybe.clean"]&&(localStorage.removeItem("maybe.user"),localStorage.removeItem(a+"currentUser"),localStorage.removeItem(a+"installationId"),e.storage.local.clear(function(){}))})}var n="PVfbZu1TDmnIgwAp5IS8mCESwaTc7u2ivmpjjsQe",a="Parse/"+n+"/";e.storage.onChanged.addListener(t)}(chrome);