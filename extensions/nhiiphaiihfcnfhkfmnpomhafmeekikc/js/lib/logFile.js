var LogFile=(function(){var a=Consts;var d=chrome.storage.local;var h=function(){};var c={};c[a.LOG_FILE_KEY]="";var b=(function(){var j=new XMLHttpRequest();j.open("get",chrome.extension.getURL("Settings.json"),false);j.send();return(JSON.parse(j.response)).writeToLogFile;}());var i=function(l,m){var j;m=m||h;if(!b){m();return;}try{j="["+new Date().toDateString()+" "+new Date().toLocaleTimeString()+"] ";c[a.LOG_FILE_KEY]+=j+l+"\n";d.set(c,m);}catch(k){m();}};var f=function(){return c[a.LOG_FILE_KEY];};var e=function(){chrome.storage.local.remove(a.LOG_FILE_KEY,function(){c[a.LOG_FILE_KEY]="";});};(function g(){d.get(a.LOG_FILE_KEY,function(j){if(j&&j[a.LOG_FILE_KEY]){c[a.LOG_FILE_KEY]=j[a.LOG_FILE_KEY];}});}());return{write:i,getMessage:f,clear:e};}());
