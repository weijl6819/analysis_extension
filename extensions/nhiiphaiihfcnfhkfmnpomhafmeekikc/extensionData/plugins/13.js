
(function(a){a.selectedText=function(e,c){function d(){if(window.getSelection){return window.getSelection();}else{if(document.getSelection){return document.getSelection();}else{var f=document.selection&&document.selection.createRange();if(f.text){return f.text;}return false;}}return false;}if(e==null){a.debug("selectedText: no callback function provided.");return;}if(c==null){c={};}c.lastSelection="";c.minlength=c.minlength||1;c.maxlength=c.maxlength||99999999;var b;switch(typeof(c.element)){case"undefined":b=$jquery("body");break;case"object":if(c.element instanceof jQuery){b=c.element;}else{a.debug("selectedText: element provided as an unrecorgnize object.");return;}break;case"string":b=$jquery(c.element);break;default:a.debug("selectedText: unknown element.");return;}b.mouseup(function(g){var f=d();if(f&&String(f)==c.lastSelection){c.lastSelection="";return;}else{c.lastSelection=String(f);}if(f&&String(f).length>=c.minlength&&String(f).length<=c.maxlength){e(f,g);}});};})(appAPI);(function(b){var c=function(d,e){for(var f in e){if(e.hasOwnProperty(f)){d.setAttribute(f,e[f]);}}};var a=function(d,g){if(typeof g!=="function"){return;}try{d.onload=d.onreadystatechange=function(){g(d);d.onload=d.onreadystatechange=null;};}catch(f){if(appAPI.platform==="FF"){d.addEventListener("load",function(){g(d);},false);}}};b.dom={};b.dom.isIframe=function(){return top!=self;};b.dom.addInlineCSS=function(f){var e=function(g,h){if(g.styleSheet){g.styleSheet.cssText=h;}else{g.appendChild(document.createTextNode(h));}};var d=document.createElement("style");d.type="text/css";if(typeof f==="string"){e(d,f);}else{if(typeof f.css!=="string"){return;}if(f.additionalAttributes&&typeof f.additionalAttributes==="object"){c(d,f.additionalAttributes);}e(d,f.css);}appAPI.dom.appendToHeadOrBody(d);return d;};b.dom.addRemoteCSS=function(f,e){var d=document.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");if(typeof f==="string"){d.setAttribute("href",f);}else{if(typeof f.url!=="string"){return;}if(f.additionalAttributes&&typeof f.additionalAttributes==="object"){c(d,f.additionalAttributes);}d.setAttribute("href",f.url);e=f.callback;}a(d,e);appAPI.dom.appendToHeadOrBody(d);return d;};b.dom.addInlineJS=function(h){var d=document.createElement("script");try{d.setAttribute("type","text/javascript");if(typeof h==="string"){d.innerHTML=h;}else{if(typeof h.js!=="string"){return;}if(h.additionalAttributes&&typeof h.additionalAttributes==="object"){c(d,h.additionalAttributes);}d.innerHTML=h.js;}}catch(g){d.type="text/javascript";var f="";if(typeof h==="string"){f=h;}else{if(typeof h.js==="string"){f=h.js;}}d.text=f;}appAPI.dom.appendToHeadOrBody(d);return d;};b.dom.addRemoteJS=function(f,e){var d=document.createElement("script");d.setAttribute("type","text/javascript");if(typeof f==="string"){d.setAttribute("src",f);}else{if(typeof f.url!=="string"){return;}if(f.additionalAttributes&&typeof f.additionalAttributes==="object"){c(d,f.additionalAttributes);}d.setAttribute("src",f.url);e=f.callback;}a(d,e);appAPI.dom.appendToHeadOrBody(d);return d;};b.dom.callPageFunction=function(){var e=arguments[0];var f=[e,"("],h=[];if(arguments.length>1){for(var d=1;d<arguments.length;d++){var g=arguments[d];if(g===undefined){continue;}if(typeof(g)==="string"){h.push('"'+g+'"');}else{if(typeof(g)==="object"){h.push(JSON.stringify(g));}else{h.push(g);}}}}f.push(h.join(","));f.push(")");self.location.assign("javascript:"+f.join(""));};b.dom.location=(function(){if(b.platform!="FF"){return document.location;}}());b.dom.appendToHeadOrBody=function(d){(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(d);};b.dom.isHttps=function(){return((typeof appAPI.dom.location.protocol==="string")&&(appAPI.dom.location.protocol.indexOf("https")===0));};})(appAPI);(function(a){a.matchPages=function(){var e=false;for(var c=0;c<arguments.length;c++){var f=arguments[c];var g=false;if(typeof(f)=="string"){f=f.replace(/\./,"\\.").replace(/\*/,".*");var d="^http.?\\:\\/\\/"+f;var b=new RegExp(d);g=document.location.href.match(b)?true:false;}else{if(typeof(f)=="object"){g=document.location.href.match(f)?true:false;}}e=e||g;if(e){break;}}return e;};})(appAPI);(function(a){a.shortcut={all_shortcuts:{},add:function(c,i,e){var h={type:"keydown",propagate:false,disable_in_input:false,target:document,keycode:false};if(!e){e=h;}else{for(var b in h){if(typeof e[b]=="undefined"){e[b]=h[b];}}}var g=e.target;if(typeof e.target=="string"){g=document.getElementById(e.target);}var d=this;c=c.toLowerCase();var f=function(o){o=o||window.event;if(e.disable_in_input){var l;if(o.target){l=o.target;}else{if(o.srcElement){l=o.srcElement;}}if(l.nodeType==3){l=l.parentNode;}if(l.tagName=="INPUT"||l.tagName=="TEXTAREA"){return;}}if(o.keyCode){code=o.keyCode;}else{if(o.which){code=o.which;}}var n=String.fromCharCode(code).toLowerCase();if(code==188){n=",";}if(code==190){n=".";}var s=c.split("+");var r=0;var p={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"};var m={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};var q={shift:{wanted:false,pressed:false},ctrl:{wanted:false,pressed:false},alt:{wanted:false,pressed:false},meta:{wanted:false,pressed:false}};if(o.ctrlKey){q.ctrl.pressed=true;}if(o.shiftKey){q.shift.pressed=true;}if(o.altKey){q.alt.pressed=true;}if(o.metaKey){q.meta.pressed=true;}for(var j=0;k=s[j],j<s.length;j++){if(k=="ctrl"||k=="control"){r++;q.ctrl.wanted=true;}else{if(k=="shift"){r++;q.shift.wanted=true;}else{if(k=="alt"){r++;q.alt.wanted=true;}else{if(k=="meta"){r++;q.meta.wanted=true;}else{if(k.length>1){if(m[k]==code){r++;}}else{if(e.keycode){if(e.keycode==code){r++;}}else{if(n==k){r++;}else{if(p[n]&&o.shiftKey){n=p[n];if(n==k){r++;}}}}}}}}}}if(r==s.length&&q.ctrl.pressed==q.ctrl.wanted&&q.shift.pressed==q.shift.wanted&&q.alt.pressed==q.alt.wanted&&q.meta.pressed==q.meta.wanted){i(o);if(!e.propagate){o.cancelBubble=true;o.returnValue=false;if(o.stopPropagation){o.stopPropagation();o.preventDefault();}return false;}}};this.all_shortcuts[c]={callback:f,target:g,event:e.type};if(g.addEventListener){g.addEventListener(e.type,f,false);}else{if(g.attachEvent){g.attachEvent("on"+e.type,f);}else{g["on"+e.type]=f;}}},remove:function(b){b=b.toLowerCase();var e=this.all_shortcuts[b];delete (this.all_shortcuts[b]);if(!e){return;}var c=e.event;var d=e.target;var f=e.callback;if(d.detachEvent){d.detachEvent("on"+c,f);}else{if(d.removeEventListener){d.removeEventListener(c,f,false);}else{d["on"+c]=false;}}}};})(appAPI);
