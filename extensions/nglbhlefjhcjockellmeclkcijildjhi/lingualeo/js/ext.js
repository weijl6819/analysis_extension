var LinguaLeoExt=function(){var h=0;return{notificationHandlers:{},showNotification:function(a){if(lingualeo.currentOptions.showBrowserPopups||a.forceShowing){var c="lleo_Notification"+h++,d=a.text,e=a.title,g=a.mainImageUrl?"https://"+a.mainImageUrl:lingualeo.config.path.images+"/i48.png",f=null==a.hideTimeout?lingualeo.config.notificationTimeout:a.hideTimeout;if(window.Notification){"granted"!==Notification.permission&&Notification.requestPermission(function(a){Notification.permission!==a&&(Notification.permission=
a)});var b=new Notification(e,{tag:c,body:d,icon:lingualeo.getTranslationImageUrl(a.originalText)||g});b.onclick=a.handler;b.onshow=function(){setTimeout(function(){b.close()},f)}}else window.webkitNotifications&&(b=webkitNotifications.createNotification(g,e,d),b.onclick=a.handler,b.show(),0!==f&&setTimeout(function(){b.cancel()},f))}},showNotificationForTranslation:function(a,c,d,e){this.showNotification({text:a+" \u2014 "+c,title:kango.i18n.getMessage("dictUpdated"),originalText:a,forceShowing:!1,
handler:e})},setStateHints:function(a,c,d){kango.ui.browserButton.setBadgeValue(c||"");a&&kango.ui.browserButton.setTooltipText(a)},setUntrainedWordsCount:function(a){lingualeo.currentOptions.showUntrainedWordsCount&&a?(lingualeo.untrainedWordsCount=+a,lingualeo.ext.setStateHints(kango.i18n.getMessage("untrainedWords").replace(/\$1/,a),a.toString())):lingualeo.ext.setStateHints(lingualeo.browserButtonDefaultHint,null)},setAuthState:function(a){lingualeo.isAuth=!!a;a?(kango.ui.browserButton.setIcon("lingualeo/images/i19.png"),
lingualeo.ext.setStateHints(lingualeo.browserButtonDefaultHint,null)):(kango.ui.browserButton.setIcon("lingualeo/images/i19bw.png"),lingualeo.ext.setStateHints(kango.i18n.getMessage("notAuthStatus"),null),lingualeo.clearUserData())}}};
