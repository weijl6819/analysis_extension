function d(){K(),chrome.runtime.sendMessage({message_id:"update_language",language:select_language.value})}function I(){s?K():(J(),window.close())}function J(){d(),chrome.runtime.sendMessage({message_id:"start_recording",tab_id:M}),s=!0,n(!0)}function K(){s=!1,chrome.runtime.sendMessage({message_id:"stop_recording",tab_id:M}),n(!1)}function n(e){s=e,document.getElementById("speak_button").style.backgroundImage=e?"url('images/pause_button.png')":"url('images/start_button.png')"}function L(){function e(e){M=e[0].id}var t={active:!0,currentWindow:!0}
chrome.tabs.query(t,e),n(N.getIsRecording()),b()}function c(e,n){document.getElementById(e).value=n}function b(){var e=""
chrome.storage.local.get("stored_lang",function(n){(e=n.stored_lang)&&c("select_language",e)})}e()
var M=-100,s=!1
document.getElementById("speak_button").addEventListener("click",I),document.getElementById("select_language").addEventListener("change",d),chrome.runtime.onMessage.addListener(function(e,t){switch(e.message_id){case"recognition_started_in_bg":n(!0),s=!0
break
case"recognition_stopped_in_bg":n(!1),s=!1}})
var N=chrome.extension.getBackgroundPage()
window.onload=L
