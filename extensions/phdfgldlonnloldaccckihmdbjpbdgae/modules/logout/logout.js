"use strict";infinity.modules.logout=new Vue({el:"#logout",data:{user:infinity.get("infinity-user"),captchaurl:infinity.url+"captcha",isConfirmLogOut:!1,captchaCode:""},created:function(){var i=this;infinity.onMessage("loginStatusChange",function(){var t=infinity.get("infinity-user");i.user=t,t.isLogin||i.hide()})},methods:{show:function(){$("#logout").css("display","flex")},hide:function(){$("#logout").hide()},closeLogOut:function(){this.hide()},logout:function(){infinity.sendMessage("sendGa",{category:"user",event:"logout"}),infinity.sendMessage("logout")},LogoutAccount:function(){this.isConfirmLogOut=!0},closeConfirmLogOut:function(){this.isConfirmLogOut=!1,this.captchaCode=""},changeCaptcha:function(){var i=(new Date).getTime();this.captchaurl=infinity.url+"captcha?t="+i},confirmDellAccount:function(){var i=infinity.url+"user/deleteuser?uid="+this.user.uid+"&secret="+this.user.secret,t=this;$.ajax({url:i,type:"post",data:{captcha:t.captchaCode},beforeSend:function(){infinity.with("loading",function(i){i.show()})},success:function(i){200==i.status?(t.isConfirmLogOut=!1,infinity.sendMessage("logout"),infinity.with("alert",function(i){i.show(infinity.i18n("logout_success"))})):(t.changeCaptcha(),infinity.with("alert",function(i){i.show(infinity.i18n("error_please_try_again"))}))},complete:function(){infinity.with("loading",function(i){i.hide()})},error:function(){infinity.with("alert",function(i){i.show(infinity.i18n("error_please_try_again"))})}})}}});