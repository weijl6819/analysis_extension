function M_MY_USER_SYNC(){"use strict";new Vue({el:"#my-user-sync",data:{user:infinity.get("infinity-user"),isSyncing:infinity.get("infinity-sync-status"),notificationNum:infinity.get("infinity-notifications")||[],settings:infinity.get("infinity-settings"),recoveryPercent:!1,userInfo:infinity.get("infinity-user"),firstUseUserMobile:!infinity.get("infinity-used-user-mobile")},created:function(){var i=this;infinity.onMessage("loginStatusChange",function(){var n=infinity.get("infinity-user");i.user=n,n.isLogin&&n.isVipMember&&(parseInt(n["auto-backup"])>14e11&&infinity.with("confirm",function(i){i.show(infinity.i18n("please_select_handle"),[infinity.i18n("cloud_cover_local"),infinity.i18n("local_cover_cloud")],function(i){i?infinity.sendMessage("userRecovery"):infinity.sendMessage("userBackup")})}),0===parseInt(n["auto-backup"])&&infinity.sendMessage("userBackup"))}),infinity.onMessage("userRecovery",function(){infinity.with("confirm",function(i){i.hide()})}),infinity.onMessage("userBackup",function(){infinity.with("confirm",function(i){i.hide()})}),infinity.onMessage("toSyncStatus",function(n){var t=infinity.get("infinity-user");i.isSyncing=infinity.get("infinity-sync-status"),i.user=t}),infinity.onMessage("infinity-recevory-success",function(){infinity.with("info",function(n){i.recoveryPercent=!1,n.show(infinity.i18n("data_recovery_success"),!0)})}),infinity.onMessage("recovery-failed",function(){infinity.with("info",function(n){i.recoveryPercent=!1,n.show(infinity.i18n("data_recovery_failed"),!0)})}),infinity.onMessage("auto-recevory-success",function(){var n=infinity.get("infinity-user");i.user=n}),infinity.onMessage("autoBackupDone",function(){var n=infinity.get("infinity-user");i.user=n}),infinity.onMessage("infinity-noticationsDone",function(){i.notificationNum=infinity.get("infinity-notifications")||[]}),infinity.onMessage("recovery-percent",function(n){i.recoveryPercent=parseInt(n.progress)}),infinity.onMessage("settingIsAutoSyncDone",function(){i.settings=infinity.get("infinity-settings")}),infinity.onMessage("settingVipDone",function(n){!(i.userInfo=infinity.get("infinity-user")).isLogin&&i.settings.isAutoSync&&i.settingChange("isAutoSync")})},methods:{login:function(){this.handleLogin()},handleLogin:function(){this.user.isLogin?infinity.with("logout",function(i){i.show()}):infinity.with("login",function(i){i.show()})},backupData:function(){var i=this;infinity.isLogin()&&!i.isSyncing&&infinity.sendMessage("userBackup")},recoveryData:function(){var i=this;infinity.isLogin()&&!i.isSyncing&&infinity.sendMessage("userRecovery")},showUserMobile:function(){infinity.set("infinity-used-user-mobile",!0),infinity.sendMessage("sendGa",{category:"btn",event:"click",label:"userMobileBtn"}),this.firstUseUserMobile=!1,infinity.with("user-mobile",function(i){i.show()})},showNotication:function(){infinity.with("notification",function(i){i.show()})},settingChange:function(i){infinity.sendMessage("onSettingChange",{option:i})},openImportOldDataDialog:function(){infinity.with("import-old-data",function(i){i.show()})}},computed:{transAutoBackupDate:function(){if(!this.user.isLogin)return"";if("0"==this.user["auto-backup"])return"";var i=parseInt(this.user["auto-backup"]);return new Date(i).toLocaleString()},autoBackUpText:function(){return this.user.isLogin?"0"==this.user["auto-backup"]?{text:infinity.i18n("never_backup"),hideBackup:!1,hideRecovery:!0}:{text:infinity.i18n("last_backup_at"),hideBackup:!1,hideRecovery:!1}:{text:infinity.i18n("login_and_backup"),hideBackup:!0,hideRecovery:!0}},versionText:function(){return this.user.isLogin?-1==parseInt(this.user["pro-expire-date"])?infinity.i18n("infinity_pro_trial"):infinity.i18n("infinity_pro"):infinity.i18n("infinity_free")},expText:function(){if(this.user.isLogin){var i=parseInt(this.user["pro-expire-date"]);return-1==i?infinity.i18n("forever_pro"):0==i?infinity.i18n("timeout_renawal"):infinity.i18n("remaining_x_days_time_out").replace("{d%}",i)}return infinity.i18n("login_to_free_try_pro")},showRenewals:function(){return!!this.user.isLogin&&-1!=parseInt(this.user["pro-expire-date"])}}})}M_MY_USER_SYNC();