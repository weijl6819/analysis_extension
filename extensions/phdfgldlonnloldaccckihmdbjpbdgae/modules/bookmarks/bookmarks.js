!function(){"use strict";function o(o){function e(o){for(r=0;r<o.length;r++)o[r].hasOwnProperty("children")&&n.push(o[r]);for(var r=0;r<o.length;r++)o[r].hasOwnProperty("children")&&e(o[r].children)}var n=[];chrome.bookmarks.getTree(function(o){e(o[0].children)}),setTimeout(function(){o&&o(n)},0)}infinity.modules.bookmarks=new Vue({el:"#bookmark-box",data:{isInit:!1,input:"",folders:[],bookmarks:[],currentFolderId:"",showBookmarks:!1,searching:!1,leftzoom:infinity.get("infinity-settings").settingLeftSlideZoom/100},created:function(){var o=this;o.onsearch=$.debounce(300,!1,o.searched),$("#bookmark-box").on("transitionend",function(e){e.stopPropagation(),e.target.className.indexOf("sildeBox")>=0&&(e.target.className.indexOf("slide-show")>=0?(o.isInit||(o.init(),o.isInit=!0),$(".bookmark-splash").hide(),$(".bookmark-all").css("display","flex"),$(".bookmark-search")[0].focus()):($("#bookmark-box").hide(),$(".bookmark-all").removeClass("infinity-fadeIn-8")))}),$(document).on("click","#bookmark-cover",function(e){e.preventDefault(),o.hide()})},methods:{show:function(){$("#bookmark-cover,#bookmark-box").show(),$("#bookmark-box").addClass("slide-show slide-box-shadow")},hide:function(){$("#bookmark-box").removeClass("slide-show slide-box-shadow"),$("#bookmark-cover").hide()},init:function(){var e=this;o(function(o){e.folders=o,e.getBookmarks("recent")})},getBookmarks:function(o){var e=this;e.currentFolderId=o,"recent"==o?chrome.bookmarks.getRecent(80,function(o){e.showBookmarks=!1,e.bookmarks=o,setTimeout(function(){e.showBookmarks=!0},50)}):chrome.bookmarks.getSubTree(o,function(o){e.showBookmarks=!1;try{e.bookmarks=o[0].children.filter(function(o){return!o.hasOwnProperty("children")}),setTimeout(function(){e.showBookmarks=!0},50)}catch(n){e.bookmarks=o[0].children,setTimeout(function(){e.showBookmarks=!0},50)}})},openbookmark:function(o,e){infinity.open("isOpenBookmarkInNewTab",o,e)},searchBookmarks:function(){var o=this;o.searching=!0,o.onsearch()},searched:function(){var o=this;""==o.input||" "==o.input?(o.searching=!1,o.getBookmarks(o.currentFolderId)):chrome.bookmarks.search(o.input,function(e){o.bookmarks=e})}}})}();