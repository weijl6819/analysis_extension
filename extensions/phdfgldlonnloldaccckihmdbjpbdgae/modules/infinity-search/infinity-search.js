"use strict";infinity.modules["infinity-search"]=new Vue({el:"#infinity-search",data:{searchAjax:null,searchUrl:"https://"+infinity.get("infinity-search-server").name+"-search.infinitynewtab.com/",start:"0",context:{},cursor:{},results:[],keyword:"",searchedKeyword:"",showHover:!0,lang:infinity.get("infinity-search-language").lang.replace("-","_"),supportLanguage:["de","en_US","es","fr","ja","pl","pt_BR","pt_PT","ru","tr","uk","zh_CN","zh_TW"],showLanguageMenu:!1,showMoreMenu:!1},created:function(){var e=this;$(".infinity-search-input").focus(function(e){$(".infinity-search-input-out").addClass("infinity-search-always-shadow")}),$(".infinity-search-input").blur(function(e){$(".infinity-search-input-out").removeClass("infinity-search-always-shadow")}),$(document).on("click",function(n){$(n.target).parents(".infinity-search-language").length||(e.showLanguageMenu=!1)}),$(document).on("click",function(n){$(n.target).parents(".infinity-search-more-btn").length||(e.showMoreMenu=!1)})},methods:{show:function(e){var n=this;n.start="0",$(".infinity-search-out").show(),n.search(e),n.keyword=e,$(".infinity-search-input")[0].focus()},hide:function(){$(".infinity-search-out").hide(),$(".search-input")[0].focus()},toggleLanguageMenu:function(){var e=this;e.showLanguageMenu=!e.showLanguageMenu},changeLang:function(e){var n=this,o=infinity.get("infinity-search-language");o.lang=e,infinity.set("infinity-search-language",o),n.lang=e,n.start="0",n.search(n.searchedKeyword),n.showLanguageMenu=!1},toggleMoreMenu:function(){var e=this;e.showMoreMenu=!e.showMoreMenu},toGoogle:function(e){var n=this,o="";switch(e){case"image":o="https://www.google.com/search?isource=infinity&iname=google&tbm=isch&hl="+n.lang+"&q="+encodeURIComponent(n.keyword);break;case"map":o="https://www.google.com/maps/preview?isource=infinity&iname=google&hl="+n.lang+"&q="+encodeURIComponent(n.keyword);break;case"vedio":o="https://www.google.com/search?isource=infinity&iname=google&tbm=vid&hl="+n.lang+"&q="+encodeURIComponent(n.keyword);break;case"news":o="https://www.google.com/search?isource=infinity&iname=google&tbm=nws&hl="+n.lang+"&q="+encodeURIComponent(n.keyword);break;case"shopping":o="https://www.google.com/search?isource=infinity&iname=google&q="+encodeURIComponent(n.keyword)+"&source=lnms&tbm=shop&biw="+document.body.offsetWidth+"&bih="+document.body.offsetHeight+"&hl="+n.lang;break;case"books":o="https://www.google.com/search?isource=infinity&iname=google&q="+encodeURIComponent(n.keyword)+"&source=lnms&tbm=bks&biw="+document.body.offsetWidth+"&bih="+document.body.offsetHeight;break;case"airplane":o="https://www.google.com/flights/?isource=infinity&iname=google&#search;f=_;q="+encodeURIComponent(n.keyword)}n.showMoreMenu=!1,window.open(o,"_blank")},searchBy:function(e){var n=this,o="";switch(e){case"bing":o=infinity.isZh()?"https://cn.bing.com/search?isource=infinity&iname=bing&q="+encodeURIComponent(n.keyword):"https://global.bing.com/search?isource=infinity&iname=bing&q="+encodeURIComponent(n.keyword);break;case"baidu":o="https://www.baidu.com/baidu?isource=infinity&iname=baidu&ie=utf-8&wd="+encodeURIComponent(n.keyword);break;case"yahoo":o="https://search.yahoo.com/search?isource=infinity&iname=yahoo&p="+encodeURIComponent(n.keyword);break;case"duckduckgo":o="https://duckduckgo.com/?isource=infinity&iname=duckduckgo&q="+encodeURIComponent(n.keyword)}window.open(o,"_blank")},search2:function(){void 0;var e=this;e.start="0",e.search(e.keyword)},topage:function(e){var n=this;n.start=e.start,n.search(n.searchedKeyword)},trim:function(e){try{return e.trim()}catch(n){return e}},search:function(e){var n=this;if(""!=e.trim()){n.searchAjax&&n.searchAjax.abort(),n.showHover=!0;var o=new Date,i=encodeURIComponent(o.toLocaleDateString()+o.getHours());n.searchAjax=$.ajax({url:n.searchUrl+"?keyword="+encodeURIComponent(e)+"&hl="+n.lang+"&start="+n.start+"&randt="+i,type:"GET",dataType:"json"}).done(function(o){try{n.searchedKeyword=e,n.context=o.context,n.cursor=o.cursor,n.results=o.results,n.showHover=!1,n.keyword=decodeURIComponent(e),$(".infinity-search-out").scrollTop(0)}catch(e){}}).fail(function(){}).always(function(){}),0==n.start&&setTimeout(function(){n.anlyticSelf()},100)}else n.showHover=!1},anlyticSelf:function(){$.ajax({url:"https://infinity-api.infinitynewtab.com/countengineer?engineer=infinity&lang="+infinity.lang+"&id="+infinity.extId+"&t="+(new Date).getTime(),type:"GET",dataType:"json"})}},computed:{theNumsAndTime:function(){return infinity.i18n("found_about_re_nums_seconds").replace("{n%}",this.cursor.resultCount).replace("{s%}",this.cursor.searchResultTime)}}});