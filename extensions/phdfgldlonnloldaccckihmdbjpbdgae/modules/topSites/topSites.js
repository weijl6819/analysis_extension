infinity.modules.topSites=new Vue({el:"#topSites",data:{isShow:!1,topSites:null,isShowMore:!1,data:null,moresiteLenData:null,ulwidth:0,settings:infinity.get("infinity-settings")},created:function(){var t=this;chrome.topSites.get(function(i){t.data=i,t.calcalutelen()}),infinity.require("/lib/js/jquery-throttle-debounce.min",function(){$(window).resize($.throttle(250,t.calcalutelen))}),infinity.onMessage("settingDone",function(){t.settings=infinity.get("infinity-settings")})},methods:{calcalutelen:function(){var t=$("body").width();this.ulwidth=t-20;var i=Math.ceil(t/100);this.moresiteLen=i,this.dealtopSitesdata()},dealtopSitesdata:function(){this.topSites=this.data.slice(0,this.moresiteLen),this.moresiteLenData=this.data.slice(this.moresiteLen,this.data.length),this.$nextTick(function(){var t=0;$("#ulboxtopSites>li").each(function(){t+=$(this).outerWidth()}),t<200||(t<this.ulwidth&&$("#topSites").css("visibility","visible"),t>=this.ulwidth&&(this.moresiteLen=this.moresiteLen-1,this.dealtopSitesdata()))})},show:function(){var t=$("#topBookMarks"),i=$(".home-infinity");0!=t.length&&"none"!=t.css("display")?(i.css("top","60px"),$("#topSites").css("top","30px")):(i.css("top","28px"),$("#topSites").css("top","0px")),this.isShow=!0},hide:function(){var t=$(".home-infinity"),i=$("#topBookMarks");0!=i.length&&"none"!=i.css("display")?t.css("top","28px"):t.css("top","20px"),this.isShow=!1},showMoreTopSites:function(){this.isShowMore=!this.isShowMore},openTopSites:function(t){this.settings.isOpenLinkInNewTab?chrome.tabs.create({url:t},function(){}):chrome.tabs.update({url:t},function(){})}}});