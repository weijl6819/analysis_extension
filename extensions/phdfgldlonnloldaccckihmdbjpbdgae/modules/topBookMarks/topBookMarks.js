infinity.modules.topBookMarks=new Vue({el:"#topBookMarks",data:{isShow:!1,bookData:null,commombookdata:null,commonbookdatashow:null,commonbookdatashoalast:null,isshowmorebookdata:!1,isshowOtherData:!1,otherbookdata:null,secondbookdata:null,threebookdata:null,forthbookdata:null,secondbookmoredata:null,threebookmoredata:null,forthbookmoredata:null,activingindex:-1,isShowSecondbook:!1,tempLen:0,ulwidth:0,tempid:-1,tempidsi:-1,sibookdata:null,FMDid:-1,SMDid:-1,FOMDid:-1,isHavedClick:!1,otherbookmarks:infinity.i18n("otherbookmarks"),settings:infinity.get("infinity-settings")},created:function(){var o=this;chrome.bookmarks.getTree(function(t){o.bookData=t,void 0,o.commombookdata=t[0].children[0].children,o.commucateShow()}),infinity.require("/lib/js/jquery-throttle-debounce.min",function(){$(window).resize($.throttle(250,o.commucateShow))}),$(document).on("click",function(t){var i=$(".site-li-boxnot-click");i.is(t.target)||0!==i.has(t.target).length?void 0:(o.isHavedClick=!1,o.hidemainbookdata(),o.hidethebook())}),infinity.onMessage("settingBookMarkOpenWay",function(){o.settings=infinity.get("infinity-settings")})},methods:{hidethebook:function(){var o=this;o.isshowmorebookdata&&(o.isshowmorebookdata=!1),o.isshowOtherData&&(o.isshowOtherData=!1),o.FMDid=-1},show:function(){var o=$("#topSites"),t=$(".home-infinity");0!=o.length?"none"!=o.css("display")?(o.css("top","30px"),t.css("top","60px")):(o.css("top","30px"),t.css("top","28px")):t.css("top","28px"),this.isShow=!0},hide:function(){var o=$("#topSites"),t=$(".home-infinity");0!=o.length?(o.css("top","0px"),t.css("top","28px")):0!=o.length&&"none"!=o.css("display")?(o.css("top","0px"),t.css("top","20px")):t.css("top","20px"),this.isShow=!1},initSecondbook:function(o,t,i){var e=this;if(this.isHavedClick)if(void 0,e.isShowSecondbook&&t==this.activingindex)void 0;else{this.hidemainbookdata();var s=$(i.currentTarget),n=$("body").width(),h=s.offset().left;chrome.bookmarks.getChildren(o,function(o){if(0==o.length){var i={title:infinity.i18n("empty"),href:"/modules/topBookMarks/img/empt.png"};o.push(i)}e.hidethebook(),e.secondbookdata=o,e.activingindex=t,e.showthisbook(t),e.$nextTick(function(){n-h<360&&(void 0,s.find(".first-secondbook-box").css({right:-8,left:"auto"}))})})}},initClickBookData:function(o,t,i){if(this.isHavedClick)return this.isHavedClick=!1,this.hidemainbookdata(),void this.hidethebook();this.isHavedClick=!0,this.initSecondbook(o,t,i)},showthisbook:function(o){var t=this;void 0,t.isShowSecondbook=!0},hideSecondbook:function(){this.activingindex=-1,this.isShowSecondbook=!1},openbookmarks:function(o,t){t||(this.settings.isOpenBookmarkInNewTab?chrome.tabs.create({url:o},function(){}):chrome.tabs.update({url:o},function(){}))},hidemainbookdata:function(o){this.hidethebook(),this.activingindex=o,this.isShowSecondbook=!1,this.tempid=-1,this.tempidsi=-1},commucateShow:function(){var o=$("#more-bookmark-box").width(),t=$("body").width();void 0;var i=t-o;this.ulwidth=i;var e=Math.ceil(i/60),s=Math.ceil(i/180),n=Math.ceil((e+s)/2);this.tempLen=n,$("#ulbookdatashowbox").css("maxWidth",i-16),this.dealbookdata()},dealbookdata:function(){this.commonbookdatashow=this.commombookdata.slice(0,this.tempLen),this.$nextTick(function(){var o=0;if($("#ulbookdatashowbox>ul>li").each(function(){o+=$(this).outerWidth()}),o<200)return this.commombookdata.length<=this.tempLen?$(".more-bookmark-is-Show").css("visibility","hidden"):$(".more-bookmark-is-Show").css("visibility","visible"),void $("#topBookMarks").css("visibility","visible");o<this.ulwidth-26&&(this.commombookdata.length<=this.tempLen?$(".more-bookmark-is-Show").css("visibility","hidden"):$(".more-bookmark-is-Show").css("visibility","visible"),$("#topBookMarks").css("visibility","visible")),o>this.ulwidth-26&&(this.tempLen=this.tempLen-1,this.dealbookdata())})},downloadmoredata:function(o){var t=this;chrome.bookmarks.getChildren(o,function(o){t.secondbookdata=o})},initthreeDate:function(o,t){var i=this;void 0;var e=$(t.target);if(i.tempid!=o){var s=$("body").width()-e.offset().left-350;chrome.bookmarks.getChildren(o,function(t){if(0==t.length){var n={title:infinity.i18n("empty"),href:"/modules/topBookMarks/img/empt.png"};t.push(n)}i.threebookdata=t,i.tempid=o,i.$nextTick(function(){s>350?$(".threebook-box").css({left:e.offset().left+350-11,top:e.offset().top}):$(".threebook-box").css({left:e.offset().left-200,top:e.offset().top})})})}else void 0},openthreshowdata:function(o){this.tempid=o,this.tempidsi=-1},openforthshowdata:function(o){this.tempidsi=o},initforthData:function(o,t){var i=this;if(i.tempidsi!=o||-1==o){var e=$(t.target),s=e.offset(),n=$("body").width()-e.offset().left-200;chrome.bookmarks.getChildren(o,function(t){if(0==t.length){var e={title:infinity.i18n("empty"),href:"/modules/topBookMarks/img/empt.png"};t.push(e)}i.tempidsi=o,i.sibookdata=t,i.$nextTick(function(){n>200?$(".forthbook-box").css({left:s.left+200-11,top:s.top}):$(".forthbook-box").css({left:s.left-200,top:s.top})})})}},showMorebookData:function(){this.isHavedClick&&(this.isshowOtherData&&(this.isshowOtherData=!1),this.commonbookdatashoalast=this.commombookdata.slice(this.tempLen,this.commombookdata.length),this.isshowmorebookdata=!0,this.isShowSecondbook=!1)},showinitmorebookdata:function(){this.isHavedClick?(this.isHavedClick=!1,this.hidemainbookdata(),this.hidethebook()):(this.isHavedClick=!0,this.showMorebookData())},otherDataclick:function(){this.isHavedClick?(this.isHavedClick=!1,this.hidemainbookdata(),this.hidethebook()):(this.isHavedClick=!0,this.initohterdata())},initohterdata:function(){if(this.isHavedClick){if(this.isshowmorebookdata&&(this.isshowmorebookdata=!1),this.otherbookdata=this.bookData[0].children[1].children,0==this.otherbookdata.length){var o={title:infinity.i18n("empty"),href:"/modules/topBookMarks/img/empt.png"};this.otherbookdata.push(o)}this.isshowOtherData=!0,this.isShowSecondbook=!1}},openMoreBookDataSecond:function(o,t){var i=this;if(i.FMDid!=o||-1==o){var e=$(t.target).offset(),s=($("body").width(),$("body").height());chrome.bookmarks.getChildren(o,function(t){if(0==t.length){var n={title:infinity.i18n("empty"),href:"/modules/topBookMarks/img/empt.png"};t.push(n)}i.FMDid=o,i.secondbookmoredata=t;var h=e.top;t.length>20&&(h=40),i.$nextTick(function(){$(".firstload-more-book-data").css({right:350,top:h,"max-height":s-e.top-100})})})}},hideSecondmoreData:function(o){this.FMDid=o,this.SMDid=-1},hideThreemoreData:function(o){this.SMDid=o,this.FOMDid=-1},openMoreBookDataThree:function(o,t){var i=this;if(i.SMDid!=o||-1==o){var e=$(t.target).offset(),s=($("body").width(),$("body").height());chrome.bookmarks.getChildren(o,function(t){if(0==t.length){var n={title:infinity.i18n("empty"),href:"/modules/topBookMarks/img/empt.png"};t.push(n)}i.SMDid=o,i.threebookmoredata=t;var h=e.top;t.length>20&&(h=40),i.$nextTick(function(){$(".secondload-more-book-data").css({right:550,top:h,"max-height":s-e.top-100})})})}},openMoreBookDataForth:function(o,t){var i=this;if(i.FOMDid!=o||-1==o){var e=$(t.target).offset(),s=($("body").width(),$("body").height());chrome.bookmarks.getChildren(o,function(t){if(0==t.length){var n={title:infinity.i18n("empty"),href:"/modules/topBookMarks/img/empt.png"};t.push(n)}i.FOMDid=o,i.forthbookmoredata=t;var h=e.top;t.length>20&&(h=40),i.$nextTick(function(){$(".threeload-more-book-data").css({right:750,top:h,"max-height":s-e.top-100})})})}},hideForthmoreData:function(o){this.FOMDid=o}}});