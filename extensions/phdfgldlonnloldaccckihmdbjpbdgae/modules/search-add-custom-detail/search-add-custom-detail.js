infinity.modules["search-add-custom-detail"]=new Vue({el:"#search-add-custom-detail",data:{engine:{seId:null,name:null,logo:null,desc:null,types:[{name:infinity.i18n("web"),url:null}]},originLogo:null,logoBgColor:"transparent",isLoading:!1},computed:{validated:function(){var o=this.engine,n=o.name,i=o.logo;return n&&i}},methods:{cancel:function(){infinity.modules["search-add-custom"].cancelEdit()},edit:function(o){var n=this;n.engine=o,n.originLogo=o.logo,n.logoBgColor="transparent"},save:function(){var o=this;o.engine.types[0].url=infinity.isUrl(o.engine.types[0].url).str;var n=JSON.parse(JSON.stringify(o.engine));o.isLoading=!0,infinity.setIconImageBgColorSrc(o.logoBgColor,!1,n.logo,function(i){infinity.uploadBase64Img({src:i,scope:"custom-icon/"},function(i,e){o.isLoading=!1,i?infinity.with("info",function(o){o.show(infinity.i18n("upload_img_failed"),!0)}):(n.logo=e,infinity.modules["search-add-custom"].saveEdit(n))})})},chooseLogo:function(){var o=this;o.engine.logo?infinity.cropImg(o.originLogo,function(n,i){n||(o.engine.logo=i.croppedImg,o.logoBgColor=i.bgColor)}):infinity.chooseImg(function(n,i){n||(o.originLogo=i.img,o.engine.logo=i.croppedImg,o.logoBgColor=i.bgColor)})},clearLogo:function(){var o=this;o.engine.logo=null,o.originLogo=null,o.logoBgColor="transparent"}}});