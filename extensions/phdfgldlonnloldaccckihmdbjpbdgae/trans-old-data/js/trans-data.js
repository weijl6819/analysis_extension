var app=new Vue({el:"#body"});$(document).ready(function(){function n(){$(".cover").hide(),chrome.management.setEnabled(t,!1,function(n){infinity.with("alert",function(n){n.show(infinity.i18n("data_transfer_success"),function(){setTimeout(function(){window.close()},100)})})})}function e(){$(".cover").hide(),chrome.management.setEnabled(t,!1,function(n){infinity.with("alert",function(n){n.show(infinity.i18n("data_transfer_failed"))})})}document.title=infinity.i18n("transfer_your_data");var t="dbfmnekepjoapopniengjbcpnbljalfg";chrome.management.get(t,function(n){chrome.runtime.lastError?$(".transfer-not-installed").show():$(".transfer-installed").show()}),$(".onekeyTransfer").on("click",function(o){o.preventDefault(),$(".cover").show(),chrome.management.setEnabled(t,!0,function(o){chrome.runtime.lastError?e():setTimeout(function(){chrome.runtime.sendMessage(t,{getTargetData:!0},function(t){if(chrome.runtime.lastError)e();else try{var o=chrome.extension.getBackgroundPage();o.bgOldData.transOldData(t,function(t){t?(infinity.set("infinity-icons",t),o.bgIcon.setIconsFlat(),infinity.sendMessage("reloadIcon"),n()):e()})}catch(n){void 0,e()}})},2e3)})}),$("#dataRestore").on("click",function(n){$(this).val("")}),$("#dataRestore")[0].onchange=function(){$(".cover").show();try{var t=this.files[0],o=new FileReader;o.readAsText(t),o.type="text",o.onload=function(){var t=o.result;if(t.substring(0,30).indexOf("theNew__INFINITY")>=0){var i=JSON.parse(t),a=decodeURIComponent(i.main),r=decodeURIComponent(i.setting),c={};c.icon=a,c.setting=r;try{var s=chrome.extension.getBackgroundPage();s.bgOldData.transOldData(c,function(t){t?(infinity.set("infinity-icons",t),s.bgIcon.setIconsFlat(),infinity.sendMessage("reloadIcon"),n()):(void 0,e())})}catch(n){void 0,e()}}else void 0,e()}}catch(n){e()}}});