var bgWashData={init:function(){var i=this,n=function(){i.washIcons({sync:!0})};chrome.runtime.onInstalled.addListener(n),chrome.runtime.onStartup.addListener(n)},washIcons:function(i){i||(i={}),"function"==typeof i&&(i={callback:i});var n=i.callback||$.noop,t=infinity.get("infinity-icons");if(t){var e=!1,o=!1,c={},a=/^data:(image\/.+);base64,/;if(t.forEach(function(i){i.forEach(function(i){var n=i.src,t=i.uid;t||(e=!0,t=i.uid=infinity.id("800")),a.test(n)&&(o=!0,c[t]=n)})}),e&&infinity.set("infinity-icons",t),o){var s=[];Object.keys(c).forEach(function(i){s.push(new Promise(function(n,t){var e=c[i];infinity.uploadBase64Img({src:e,scope:"custom-icon/"},function(t,e){if(t)n();else{var o,c,a,s,f,r,u,y=infinity.get("infinity-icons");for(o=0,c=y.length;o<c;o++){for(u=!1,a=0,s=(f=y[o]).length;a<s;a++)if((r=f[a]).uid===i){u=!0,"image"===r.imageType&&(r.src=e,infinity.set("infinity-icons",y));break}if(u)break}n()}})}))}),Promise.all(s).then(function(){bgIcon.setIconsFlat(),infinity.sendMessage("reloadIcon"),!0===i.sync&&infinity.doSyncIcon(),n()})}else n()}else n()}};