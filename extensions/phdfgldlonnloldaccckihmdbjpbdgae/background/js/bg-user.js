"use strict";var bgUser={init:function(){var i={isLogin:!1,avatar:"",gender:"",name:"",secret:"",uid:"","user-backup":0,"auto-backup":0,"auto-backup-data":0,"auto-backup-icon":0,"auto-backup-wallpaper":0,"pro-expire-date":-1,isVipMember:!1};infinity.init("infinity-user",i),infinity.onMessage("loginsuccess",function(i){i.isLogin=!0,infinity.set("infinity-user",i),bgSync.checkAutoSyncStatus(),infinity.sendMessage("loginStatusChange",i)}),this.onLogin(),this.onLogout()},onLogin:function(){chrome.runtime.onMessageExternal.addListener(function(i,n,e){$.ajax({url:infinity.url+"user/user_hash",dataType:"json",data:{uid:i.uid,secret:i.secret}}).done(function(i){200===i.status&&infinity.set("infinity-mobile-uid",i.msg.mobileuid)}),infinity.set("infinity-user",i),bgInfinityPro.setVipMember(i["pro-expire-date"]),e({status:800,message:"Login Success"}),bgSync.checkAutoSyncStatus(),infinity.sendMessage("loginStatusChange",i)})},logoutResetUser:function(){var i={isLogin:!1,avatar:"",gender:"",name:"",secret:"",uid:"",isVipMember:!1};infinity.set("infinity-user",i),infinity.set("infinity-mobile-uid",null),infinity.sendMessage("loginStatusChange",i),infinity.sendMessage("settingVipDone")},onLogout:function(){var i=this;"infinity"==infinity.get("infinity-user")["login-type"]&&i.logoutResetUser(),infinity.onMessage("logout",function(){i.logoutResetUser()})}};