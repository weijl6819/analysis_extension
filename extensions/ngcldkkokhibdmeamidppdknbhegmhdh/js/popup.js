require.config({baseUrl:"./js",paths:{jquery:"./lib/jquery-3.1.1.min",jqueryUi:"./lib/jquery-ui.min"}});
require(["./module/i18nDom","./module/utils"],function(g,m){g();document.body.classList.remove("loading");var f=document.querySelector(".search .input__input");g=document.querySelector(".search .input__clear");var l=document.querySelector(".search .search__submit");(function(b,a){b.addEventListener("keypress",function(d){13===d.keyCode&&a.dispatchEvent(new MouseEvent("click",{cancelable:!0}))})})(f,l);(function(b,a){var d=!1;a.addEventListener("keyup",function(){0<this.value.length?d||(d=!0,b.classList.add("input__clear_visible")):
d&&(d=!1,b.classList.remove("input__clear_visible"))});b.addEventListener("click",function(d){d.preventDefault();a.value="";a.dispatchEvent(new CustomEvent("keyup"));a.focus()})})(g,f);(function(b){b.addEventListener("click",function(a){a.preventDefault();a=a.detail&&a.detail.query?a.detail.query:f.value;(a=a.trim())&&(a="#"+m.hashParam({query:a}));chrome.tabs.create({url:"index.html"+a})})})(l);var p=function(b,a){var d=null,f=function(){var a=null,h=function(e){chrome.storage.local.get({history:[]},
function(c){a=c.history;e&&e()});return{abort:function(){e=null}}},b=function(c,d){var b=c.length,e=c.toLowerCase();c=a.filter(function(a){a=a.query;return 0===b?!!a:0===a.toLowerCase().indexOf(e)}).sort(function(a,c){a=a.count;c=c.count;return a===c?0:a<c?1:-1}).map(function(a){return a.query});d(c)};return function(c,n){a?b(c,n):d=h(function(){b(c,n)})}}(),g=function(){var a={},b=function(c,b,d){a[c]=b;d(b)};return function(c,e){var h=a[c];h?b(c,h,e):d=m.request({url:"http://suggestqueries.google.com/complete/search",
data:{client:"firefox",q:c},json:!0},function(a,d){a||b(c,d.body[1],e)})}}(),k=null;$(b).autocomplete({minLength:0,delay:100,position:{collision:"bottom"},source:function(a,b){d&&(d.abort(),d=null);a=a.term;a.length?g(a,b):f(a,b);k&&k.querySelector(".ui-state-active")&&b()},select:function(c,b){c.preventDefault();a.dispatchEvent(new CustomEvent("click",{cancelable:!0,detail:{query:b.item.value}}))},create:function(){var a=!1;k=document.querySelector("ul.ui-autocomplete");k.addEventListener("scroll",
function(){0!==this.scrollTop?!0!==a&&(a=!0,this.style.boxShadow="rgba(0, 0, 0, 0.40) -2px 1px 2px 0px inset"):!1!==a&&(a=!1,this.style.boxShadow=null)})}})};setTimeout(function(){require(["jquery"],function(){require(["jqueryUi"],function(){p(f,l)})})},50)});
