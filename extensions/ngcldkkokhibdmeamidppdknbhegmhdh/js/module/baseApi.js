define(function(){window.API_getDom=function(e){var c=document.createDocumentFragment(),b=document.createElement("html");for(b.innerHTML=e;e=b.firstChild;)c.appendChild(e);return c};(function(){var e=/javascript/ig,c=/\/\//,b=/src=(['"]?)/ig,f=/srcset=(['"]?)/ig,a=/on(\w+)=/ig,d=/data:image\/gif,base64#blockurl#/g,g=/about:blank#blockurl#/g,h=/tms-block-javascript/g;window.API_sanitizeHtml=function(d){return d.replace(e,"tms-block-javascript").replace(c,"//about:blank#blockurl#").replace(b,"src=$1data:image/gif,base64#blockurl#").replace(f,
"data-block-attr-srcset=$1").replace(a,"data-block-event-$1=")};window.API_deSanitizeHtml=function(a){return a.replace(d,"").replace(g,"").replace(h,"javascript")}})();(function(){var e={};window.API_normalizeUrl=function(c,b,f){if(/^magnet:/.test(b)||/^http/.test(b))return b;var a=e[c];if(!a){f=f||{};a=/([^#?]+)/.exec(c)[1];var d=/(.+:\/\/.*)\//.exec(a);d=d?d[1]:c;d+="/";a={protocol:/(.+:)\/\//.exec(a)[1],origin:/(.+:\/\/[^\/]+)/.exec(a)[1],path:d,pathname:a};f.origin&&(a.origin=f.origin);f.path&&
(a.path=f.path);a=e[c]=a}return/^\/\//.test(b)?a.protocol+b:/^\//.test(b)?a.origin+b:/^\.\//.test(b)?a.path+b.substr(2):/^\?/.test(b)?a.pathname+b:a.path+b}})()});
