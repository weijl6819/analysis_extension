define(["./dom"],function(k){var f=function(a,b,c){return c.indexOf(a)===b},g={word:function(a,b){var c=!0;a.re[0]&&(c=!a.re[0].test(b.wordFilterLow));c&&a.re[1]&&(c=(b=b.wordFilterLow.match(a.re[1]))&&b.filter(f).length===a.re[2]);return c},size:function(a,b){var c=0===a.min?!0:b.size>=a.min;c&&a.max&&(c=b.size<=a.max);return c},date:function(a,b){var c=0===a.min?!0:b.date>=a.min;c&&a.max&&(c=b.date<=a.max);return c},seed:function(a,b){var c=0===a.min?!0:b.seed>=a.min;c&&a.max&&(c=b.seed<=a.max);
return c},peer:function(a,b){var c=0===a.min?!0:b.peer>=a.min;c&&a.max&&(c=b.peer<=a.max);return c},tracker:function(a,b){var c=!0;a=a.trackerIds;a.length&&(c=-1!==a.indexOf(b.trackerId));return c}},l={word:function(a){var b={type:a.type,re:Array(3)};a.re[0]&&(b.re[0]=a.re[0].toString());a.re[1]&&(b.re[1]=a.re[1].toString(),b.re[2]=a.re[2]);return b}};return function(a){var b=this,c=k.el("style",{class:["style_filter"],text:""});document.body.appendChild(c);var e={type:"tracker",trackerIds:[]},d=
[],h=JSON.stringify(d),f=function(){var a=d.map(function(a){var b=l[a.type];return b?b(a):a});return JSON.stringify(a)};this.remove=function(a){a=d.indexOf(a);-1!==a&&d.splice(a,1)};this.add=function(a){-1===d.indexOf(a)&&d.push(a)};this.addTracker=function(a){var c=e.trackerIds;-1===c.indexOf(a)&&c.push(a);c.length&&b.add(e)};this.removeTracker=function(a){var c=e.trackerIds;a=c.indexOf(a);-1!==a&&c.splice(a,1);c.length||b.remove(e)};this.clearTrackerFilter=function(){e.trackerIds.splice(0);b.remove(e)};
this.isFilteredTracker=function(a){return g.tracker(e,{trackerId:a})};this.update=function(){var b=f();b!==h&&(h=b,a.trigger("filterChange"),b=[],d.length&&b.push('.table-results .body__row:not([data-filter="true"]){display: none}'),c.textContent=b.join(""))};this.getFilterValue=function(a){return d.every(function(b){return g[b.type](b,a)})}}});
