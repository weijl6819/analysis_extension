define(function(){return function(f){var c=this,d=[],a=null,b=null,e=function(a){if(a.source===b&&c.onmessage)c.onmessage(a.data)};this.postMessage=function(a){b?b.postMessage(a,"*"):d.push(a)};this.onmessage=null;this.terminate=function(){a&&a.parentNode&&a.parentNode.removeChild(a);b=a=null;window.removeEventListener("message",e);c.onmessage=null};(function(){a=document.createElement("iframe");a.src="sandbox.html#id="+f;a.style.display="none";a.onload=function(){b=a.contentWindow;for(window.addEventListener("message",
e);d.length;)c.postMessage(d.shift())};document.body.appendChild(a)})()}});
