<link rel="import" href="scorebox-griditem.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="scorebox-grid">
  <template>
    <link href="css/scorebox-grid.css" rel="stylesheet" media="screen">
    <iron-ajax auto
        url$="http://mlb.mlb.com/gdcross/components/game/mlb/{{getCurrentDay()}}/master_scoreboard.json"
        handle-as="json"
        last-response="{{ajaxResponse}}"
        on-response="gridLoaded"></iron-ajax>
        <!-- Favorite -->
              <template is="dom-repeat" items="[[ajaxResponse.data.games.game]]">
                <div class$="content {{showOnlyFavorite(item.home_team_name, item.away_team_name, favoriteTeam)}}">
                    <!-- <div class="table"> -->
                    <table class="content">
                      <scorebox-griditem
                        home-name="[[item.home_team_name]]"
                        away-name="[[item.away_team_name]]"
                        home-score="[[item.linescore.r.home]]"
                        away-score="[[item.linescore.r.away]]"
                        home-abrev="[[item.home_name_abbrev]]"
                        away-abrev="[[item.away_name_abbrev]]"
                        favorite-team="{{favoriteTeam}}"
                        status="[[item.status.status]]"
                        top-inning="[[item.status.top_inning]]"
                        time="[[item.time]]"
                        tz="[[item.time_zone]]"
                        inning-num="[[item.status.inning]]">
                      </scorebox-griditem>
                    </table>
                    <!-- </div> -->
                  </div>
              </template>
              <!-- In Progress -->
              <template is="dom-repeat" items="[[ajaxResponse.data.games.game]]">
                <div class$="content {{isFavorite(item.home_team_name, item.away_team_name, favoriteTeam)}} {{isInProgressTop(item.status.status)}}">
                    <!-- <div class="table"> -->
                    <table class="content">
                      <scorebox-griditem
                        home-name="[[item.home_team_name]]"
                        away-name="[[item.away_team_name]]"
                        home-score="[[item.linescore.r.home]]"
                        away-score="[[item.linescore.r.away]]"
                        home-abrev="[[item.home_name_abbrev]]"
                        away-abrev="[[item.away_name_abbrev]]"
                        favorite-team="{{favoriteTeam}}"
                        status="[[item.status.status]]"
                        top-inning="[[item.status.top_inning]]"
                        time="[[item.time]]"
                        tz="[[item.time_zone]]"
                        inning-num="[[item.status.inning]]">
                      </scorebox-griditem>
                    </table>
                    <!-- </div> -->
                  </div>
              </template>

              <template is="dom-repeat" items="[[ajaxResponse.data.games.game]]">
                <div class$="content {{isFavorite(item.home_team_name, item.away_team_name, favoriteTeam)}} {{isInProgressDown(item.status.status)}}">
                    <!-- <div class="table"> -->
                    <table class="content">
                      <scorebox-griditem
                      home-name="[[item.home_team_name]]"
                      away-name="[[item.away_team_name]]"
                      home-score="[[item.linescore.r.home]]"
                      away-score="[[item.linescore.r.away]]"
                      home-abrev="[[item.home_name_abbrev]]"
                      away-abrev="[[item.away_name_abbrev]]"
                      favorite-team="{{favoriteTeam}}"
                      status="[[item.status.status]]"
                      top-inning="[[item.status.top_inning]]"
                      time="[[item.time]]"
                      tz="[[item.time_zone]]"
                      inning-num="[[item.status.inning]]">
                      </scorebox-griditem>
                    </table>
                    <!-- </div> -->
                  </div>
        </template>

  </template>
</dom-module>

<script src="js/scorebox-grid.js"></script>
