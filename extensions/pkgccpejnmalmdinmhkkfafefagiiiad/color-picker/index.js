let TRstaticjsmsg_type=function(e){return"object"==typeof e&&(e.exports={CODE_STANDARDS:"code_standards",FCP_HELPER_INIT:"fcp_helper_init",FCP_HELPER_DETECT:"fcp_helper_detect",GET_CSS:"get-css",GET_JS:"get-js",GET_HTML:"get-html",GET_COOKIE:"get-cookie",REMOVE_COOKIE:"remove-cookie",SET_COOKIE:"set-cookie",CSS_READY:"css-ready",JS_READY:"js-ready",HTML_READY:"html-ready",ALL_READY:"all-ready",GET_OPTIONS:"get_options",SET_OPTIONS:"set_options",MENU_SAVED:"menu_saved",START_OPTION:"start-option",OPT_START_FCP:"opt-item-fcp",CALC_PAGE_LOAD_TIME:"calc-page-load-time",GET_PAGE_WPO_INFO:"get_page_wpo_info",SHOW_PAGE_LOAD_TIME:"show-page-load-time",TAB_CREATED_OR_UPDATED:"tab_created_or_updated",REGEXP_TOOL:"regexp",EN_DECODE:"en-decode",JSON_FORMAT:"json-format",QR_CODE:"qr-code",CODE_BEAUTIFY:"code-beautify",JS_CSS_PAGE_BEAUTIFY:"JS_CSS_PAGE_BEAUTIFY",JS_CSS_PAGE_BEAUTIFY_REQUEST:"JS_CSS_PAGE_BEAUTIFY_REQUEST",CODE_COMPRESS:"code-compress",TIME_STAMP:"timestamp",IMAGE_BASE64:"image-base64",RANDOM_PASSWORD:"password",QR_DECODE:"qr-decode",JSON_COMPARE:"json-diff",JSON_PAGE_FORMAT:"JSON_PAGE_FORMAT",JSON_PAGE_FORMAT_REQUEST:"JSON_PAGE_FORMAT_REQUEST",COLOR_PICKER:"color-picker:newImage",SHOW_COLOR_PICKER:"show_color_picker",AJAX_DEBUGGER:"ajax-debugger",AJAX_DEBUGGER_CONSOLE:"ajax-debugger-console",AJAX_DEBUGGER_SWITCH:"ajax-debugger-switch",HTML_TO_MARKDOWN:"html2markdown",PAGE_CAPTURE:"page-capture",PAGE_CAPTURE_SCROLL:"page_capture_scroll",PAGE_CAPTURE_CAPTURE:"page_capture_capture",STICKY_NOTES:"sticky-notes",DEV_TOOLS:"dev-tools",OPEN_OPTIONS_PAGE:"open-options-page"}),e.exports}({exports:{}}),FeHelper=window.FeHelper||{};FeHelper.elemTool={elm:function(e,t,o,r){var i,n,l=document.createElement(e);if(t&&(t.event||t.events)){var a=t.event||t.events;if("string"==typeof a[0])l.addEventListener(a[0],a[1],a[2]);else if(a.length)for(i=0,n=a.length;i<n;i++)l.addEventListener(a[i][0],a[i][1],a[i][2])}for(i in t)"event"==i.substring(0,5)||("checked"==i||"selected"==i?t[i]&&l.setAttribute(i,i):l.setAttribute(i,t[i]));if(o)for(i=0,n=o.length;i<n;i++)o[i]&&l.appendChild(o[i]);return r&&this.insertNode(l,r),l},txt:function(e){return document.createTextNode(e)},ent:function(e){return document.createTextNode(this.unescapeHtml(e))},paragraphs:function(e){for(var t=e.split("\n"),o=[],r=0,i=t.length;r<i;r++)o.push(elemTool.elm("p",{},[elemTool.ent(t[r])]));return o},insertNode:function(e,t,o){t||(t=document.body),o&&o.parentNode==t?t.insertBefore(e,o):t.appendChild(e)},insertNodes:function(e,t,o){if("array"!=typeof e)this.insertNode(e,t,o);else for(var r=0,i=e.length;r<i;r++)this.insertNode(e[r],t,o,!0)},empty:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},unescapeHtml:function(e){if(e.length<1)return e;var t=document.createElement("div");e=e.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gim,""),t.innerHTML=e;var o=t.childNodes[0].nodeValue;return this.empty(t),o}},FeHelper.ColorPicker=function(){if(document.documentElement instanceof HTMLElement){var e,t="fehelper-colorpicker-box",o="fehelper-colorpicker-result",r=!1,i=!1,n="F00BAF",l="",a=null,c=0,d=0,s=!1,p=!1,m=!1,u="1px solid #666",h="",A=0,E=0,g=document.createElement("canvas"),f=g.getContext("2d"),v=1,_=1,T=!1,R=0,y=0,C=150;return{handler:function(t,o,r){var c={result:!0};t.enableColorPicker?(F(),c.wasAlreadyEnabled=U(),t.workerHasChanged&&(lsnaptabid=-1),c.wasAlreadyEnabled&&(c.hex=n,c.lhex=l,c.previewURI=e,c.FeHelper.elemTool=a.r,c.cg=a.g,c.cb=a.b)):t.doPick?P():t.setPickerImage&&(i.src=t.pickerImage),c.isPicking=!p,r(c)}}}function x(e){return document.getElementById(e)}function O(e,t,o){return r=S(e)+S(t)+S(o),m?r.toLowerCase():r;var r}function S(e){return null==e?"00":0==(e=parseInt(e))||isNaN(e)?"00":(e=Math.max(0,e),e=Math.min(e,255),e=Math.round(e),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16))}function I(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function b(){i.style.height="auto",i.style.width=innerWidth+"px",v=i.naturalWidth/innerWidth,_=i.naturalHeight/innerHeight,g.width=i.naturalWidth,g.height=i.naturalHeight,f.drawImage(i,0,0),setTimeout(function(){T=!1,i.style.visibility="visible",r.style.visibility="visible",document.body.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAA8ElEQVRYCe1WAQ6DIAwsm//e9rP9jOU2z0CpyWhlcQkkpoCld15rVcQ5cs5ZRLZrXbuiXVynDj40SVDQkBKfshChZdBe6yaRUkolmF6X934xxxsSGm4lQqjq8CRBQa6cBCwK9Bk4LzMdVO8USizW129k47HwFtX43i0YjiOIkIDGRGV/2/EezKGydxHBZY2btWntbT8mIMRhOe7s7RFo3IvYFSZqonEekQqAIO5KpMJETVRfw+rugIWFd4pXdJI4MtttZXdGn+mgYP+vBBoPnoaWT9Zr3UpoYL3uIeImARA2W9oe4NI3RKIMFJlPElTvBRTxXFcOwvQSAAAAAElFTkSuQmCC) 16 16,crosshair",Q()},255)}function k(e){e.target.select()}function w(){I(r),FeHelper.elemTool.elm("div",{},[FeHelper.elemTool.elm("input",{type:"text",size:7,style:"width:80px;height:20px;line-height:20px;font-size:10pt;border:"+u,id:"fehelper-colorpicker-cphexvl",value:"#"+n,event:["mouseover",k]}),FeHelper.elemTool.elm("img",{style:"width:20px;height:20px;position:absolute;top:-10px;right:-10px;cursor:pointer;",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAACwklEQVQ4Ea1US0tbQRg9kwmp8YXBi7hKyMZAcaFuFN26daFEUg1BEF24FQr9D/0BIqhbDe0/0I0LceNCQSIVIcZdLkrER2LUm6+caeZiEmkp7cDlMnfOOfM9zneB/7zUn/REJAEgXsfllVI/fscJvncoIhrAZwArrutGb25uoJRCb28vROQKwBqAr0opr5nfEqGIpGq12s7h4SH29vZQKpUMR2uN9vZ29PX1YWJiAsPDw7zkk1Iq+1a0QVBEkuVy+dvW1hYuLi58HKMLBoPo6uoyb+6j0ShmZmYQDodnlVLfLdgXFJGQ53nVjY0NnJ+fo1arMT2Do0BbWxs6OjoQCASMqOd5iMViSKVS0Fp/UEo9ExywygBWj4+PUSwWTWpDQ0MYHx/3jylE4cHBQSwuLiIUCqFQKODk5ISYVQt8K7jCujE1RtPf349kMomRkRGLRSKRwNTUlMng+dkEBHLYPAsyXRaRj9fX19H7+3sTBQ+Pjo5Miul0Gg8PD+aS6elp831/f9/ycXd3B3KpoZTKWdvEb29vfRBT4yKR0S4vL5uLTk9Psbu7619qCeQ6jkOv5t6mbM/Nm6J8WFfWj4sXsFG2WQ2E+sYK5nt6elrOHcfB/Py8sdDl5SUWFhZokxbROjdPASPI3B3Hueru7vZFCZqbm2N9sL29jc3NTVMv1pQdtpHSm+RSwxesq6yNjY35grQMm5TNZvHy8oKnpyesr6/Tc6bz3L++vmJ0dJQcjqJZLcamAP1F+7B2lUoFj4+PRpBRdXZ2mm9kDwwMYGlp6X1j0+la61lag2PF26vVqpkYToVdtBD38XgcmUyGYhy9X6YE4EdoCfw5eJ63wwk4ODiA67ool8tGhJhIJILJyUmwPFrrlp+D1Wl4c65F5IuIFFzXlbOzM8nlclIsFoXf6mehBlJ90xJhM+hvf7DN/H/e/wRZ4k9klRmUggAAAABJRU5ErkJggg==",alt:"Close",title:"[esc]键可直接关闭",id:"fehelper-colorpicker-exitbtn",event:["click",M,!0]})],r),x("fehelper-colorpicker-cphexvl")&&x("fehelper-colorpicker-cphexvl").select(),N()}function P(){p?(l=n,p=!1,I(r)):(p=!0,w())}function M(){var e=setTimeout(F,500);chrome.runtime.sendMessage({disableColorPicker:!0},function(t){clearTimeout(e)})}function F(){s=!1,p=!1,document.removeEventListener("mousemove",L),removeEventListener("scroll",G),removeEventListener("resize",G),removeEventListener("keyup",D),B(),clearTimeout(R)}function B(){document.body&&(i=x(t),r=x(o),i&&document.body.removeChild(i),r&&document.body.removeChild(r),i=!1,r=!1,document.body.style.cursor="")}function D(e){s&&(27==e.keyCode?M():82==e.keyCode||74==e.keyCode?G():13==e.keyCode&&P())}function L(e){s&&(p||(A=e.pageX-pageXOffset,E=e.pageY-pageYOffset,c=Math.round(A*v),d=Math.round(E*_),Q()))}function G(e){s&&(r.style.visibility="hidden",i.style.visibility="hidden",clearTimeout(R),R=setTimeout(function(){J()},250))}function U(){return r?H():(B(),i=FeHelper.elemTool.elm("img",{id:t,src:h,style:"position:fixed;max-width:none!important;max-height:none!important;top:0px;left:0px;margin:0px;padding:0px;overflow:hidden;z-index:2147483646;",events:[["click",P,!0],["load",b]]},[],document.body),r=FeHelper.elemTool.elm("div",{id:o,style:"position:fixed;min-width:30px;max-width:300px;box-shadow:2px 2px 2px #666;border:"+u+";border-radius:5px;z-index:2147483646;cursor:default;padding:10px;text-align:center;"},[],document.body),document.addEventListener("mousemove",L),addEventListener("keyup",D),addEventListener("scroll",G),addEventListener("resize",G),W(),H(),!1)}function H(){return!!s||(r.style.visibility="hidden",i.style.visibility="hidden",p&&P(),document.body.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAA8ElEQVRYCe1WAQ6DIAwsm//e9rP9jOU2z0CpyWhlcQkkpoCld15rVcQ5cs5ZRLZrXbuiXVynDj40SVDQkBKfshChZdBe6yaRUkolmF6X934xxxsSGm4lQqjq8CRBQa6cBCwK9Bk4LzMdVO8USizW129k47HwFtX43i0YjiOIkIDGRGV/2/EezKGydxHBZY2btWntbT8mIMRhOe7s7RFo3IvYFSZqonEekQqAIO5KpMJETVRfw+rugIWFd4pXdJI4MtttZXdGn+mgYP+vBBoPnoaWT9Zr3UpoYL3uIeImARA2W9oe4NI3RKIMFJlPElTvBRTxXFcOwvQSAAAAAElFTkSuQmCC) 16 16,crosshair",s=!0,setTimeout(J,1),!1)}function N(){r&&(r.style.top=E+8+"px",r.style.left=A+8+"px",r.clientWidth+r.offsetLeft+24>innerWidth&&(r.style.left=A-8-r.clientWidth+"px"),r.clientHeight+r.offsetTop+24>innerHeight&&(r.style.top=E-8-r.clientHeight+"px"))}function Q(t){if(s){N();var o,i=f.getImageData(c,d,1,1).data;(function(e,t,o){e/=255,t/=255,o/=255;var r,i,n=Math.max(e,t,o),l=Math.min(e,t,o),a=(n+l)/2;if(n==l)r=i=0;else{var c=n-l;switch(i=a>.5?c/(2-n-l):c/(n+l),n){case e:r=(t-o)/c+(t<o?6:0);break;case t:r=(o-e)/c+2;break;case o:r=(e-t)/c+4}r/=6}return{h:Math.round(360*r),s:Math.round(100*i),v:Math.round(100*a)}})(i[0],i[1],i[2]),a={r:i[0],g:i[1],b:i[2]},o={hex:O(i[0],i[1],i[2])},r&&(n=o.hex?o.hex:n,r.style.backgroundColor="#"+n,p&&w()),function(t){var o=c,i=d;if(T)return void!1;var s=Math.floor(.5*C),m=Math.round(o),h=Math.round(i);if(t){var A=Y();A.scale(2,2),A.drawImage(g,.5*s-m,.5*s-h),A.scale(.5,.5),A.fillStyle="rgba(0,0,0,0.3)",A.fillRect(s,0,1,C),A.fillRect(0,s,C,1)}else{var A=Y();A.drawImage(g,-m+s,-h+s);for(var E,f,v=15,_=0;_<s;_+=2){if(E=s-_,f=s+_,A.drawImage(y,f,0,E,C,f+1,0,E,C),A.drawImage(y,0,0,E+1,C,-1,0,E+1,C),A.drawImage(y,0,f,C,E,0,f+1,C,E),A.drawImage(y,0,0,C,E+1,0,-1,C,E+1),0==_){var R=A.getImageData(s,s,1,1).data,O=R[0]+R[1]+R[2];A.fillStyle=O>192?"rgba(30,30,30,0.8)":"rgba(225,225,225,0.8)"}else A.fillStyle="rgba(255,255,255,0.4)";for(var S=0;S<v&&!(++_>=s);S++)E=s-_,f=s+_,A.drawImage(y,f,0,E,C,f+1,0,E,C),A.drawImage(y,0,0,E+1,C,-1,0,E+1,C),A.drawImage(y,0,f,C,E,0,f+1,C,E),A.drawImage(y,0,0,C,E+1,0,-1,C,E+1);--v<1&&(v=1),A.fillRect(f+1,0,1,C),A.fillRect(E-1,0,1,C),A.fillRect(0,f+1,C,1),A.fillRect(0,E-1,C,1)}}e=y.toDataURL();var b=devicePixelRatio>1?38:19,w=Math.floor(.5*b),P=document.createElement("canvas");P.width=b,P.height=b,P.getContext("2d").drawImage(y,s-w,s-w,b,b,0,0,b,b);var M={};M[b]=P.toDataURL(),chrome.runtime.sendMessage({browserIconMsg:!0,path:M},function(){}),F=e,B=n,p||(n=B||n,!x("fehelper-colorpicker-cpimprev")||a&&!x("cprgbvl")?(I(r),FeHelper.elemTool.elm("div",{},[FeHelper.elemTool.elm("img",{id:"fehelper-colorpicker-cpimprev",height:150,width:150,src:F,style:"margin:0px;padding:0px;margin:0px;"}),FeHelper.elemTool.elm("br"),FeHelper.elemTool.elm("input",{type:"text",size:7,style:"width:60px;height:20px;line-height:20px;font-size:10pt;border:"+u,id:"fehelper-colorpicker-cphexvl",value:"#"+n,event:["mouseover",k]})],r),N()):(x("fehelper-colorpicker-cpimprev").src=F,x("fehelper-colorpicker-cpimprev").width=150,x("fehelper-colorpicker-cpimprev").height=150,x("fehelper-colorpicker-cphexvl").value=n,r.style.backgroundColor="#"+n)),chrome.runtime.sendMessage({setPreview:!0,previewURI:e,hex:n,lhex:l,elemTool:a.r,cg:a.g,cb:a.b},function(e){}),!1;var F,B}()}}function J(){if(s){if(T)return clearTimeout(R),void(R=setTimeout(function(){J()},255));document.body.style.cursor="wait",T=!0,r.style.visibility="hidden",i.style.visibility="hidden",i.src=h;var e=innerWidth,t=innerHeight;i.style.width=e+"px",i.style.height=t+"px",setTimeout(function(){try{var e=TRstaticjsmsg_type;chrome.runtime.sendMessage({type:e.COLOR_PICKER},function(e){})}catch(e){console.log("有错误发生，可提交此反馈到官网！",e)}},255)}}function Y(){var e=y.getContext("2d");return e||(W(),y.getContext("2d"))}function W(){(y=document.createElement("canvas")).width=C,y.height=C}}(),module.exports=FeHelper.ColorPicker;